<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2 Deutsch Training - ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿµÿßÿØŸÇÿ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #42A5F5;
            --secondary-dark: #1E88E5;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --light: #E3F2FD;
            --dark: #0D47A1;
            --text: #333;
            --text-light: #546E7A;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            --shadow-hover: 0 20px 40px rgba(33, 150, 243, 0.3);
            --radius: 25px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #BBDEFB 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: var(--light);
        }

        /* Floating Elements */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 3.5rem;
            opacity: 0.15;
            animation: float 8s ease-in-out infinite;
        }

        .floating-book { top: 15%; left: 8%; animation-delay: 0s; }
        .floating-pen { top: 75%; right: 12%; animation-delay: 1s; }
        .floating-globe { bottom: 20%; left: 15%; font-size: 4.5rem; animation-delay: 2s; }
        .floating-clock { top: 25%; right: 8%; animation-delay: 3s; }
        .floating-graduate { top: 65%; left: 5%; animation-delay: 4s; }
        .floating-notebook { bottom: 15%; right: 10%; animation-delay: 5s; }
        .floating-pencil { top: 45%; left: 12%; font-size: 2.8rem; animation-delay: 6s; }
        .floating-calculator { top: 35%; right: 15%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-30px) rotate(5deg) scale(1.1); }
            66% { transform: translateY(-15px) rotate(-3deg) scale(0.95); }
        }

        /* Header Controls */
        .header-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            border: none;
            background: var(--primary);
            color: var(--white);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .control-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        }

        /* Language Selector */
        .language-selector {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .dark-mode .lang-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .lang-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            overflow: hidden;
            min-width: 120px;
            animation: dropdownSlide 0.3s ease;
        }

        .dark-mode .lang-dropdown {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes dropdownSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-dropdown.show {
            display: block;
        }

        .lang-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            color: var(--text);
        }

        .dark-mode .lang-option {
            color: var(--light);
            border-bottom: 1px solid #37474F;
        }

        .lang-option:hover {
            background: #f5f5f5;
            transform: translateX(5px);
        }

        .dark-mode .lang-option:hover {
            background: #283593;
        }

        .lang-option:last-child {
            border-bottom: none;
        }

        /* Trial Countdown Banner */
        .trial-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
            padding: 0.8rem;
            text-align: center;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(66, 165, 245, 0.3);
            animation: slideDown 0.5s ease;
            display: none;
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }

        .trial-banner.expired {
            background: linear-gradient(135deg, var(--danger) 0%, #d32f2f 100%);
        }

        .trial-banner-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .trial-text {
            font-weight: 600;
            font-size: 1rem;
        }

        .trial-timer {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.1rem;
            background: rgba(0, 0, 0, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
        }

        /* Premium Crown Badge */
        .premium-badge {
            position: fixed;
            top: 85px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA000 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
            animation: rotate 4s linear infinite;
            display: none;
            cursor: pointer;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Subscription Activation Box */
        .subscription-activation {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
            padding: 0.8rem 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            box-shadow: 0 4px 12px rgba(66, 165, 245, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .subscription-activation:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(66, 165, 245, 0.4);
        }

        /* Phone Modal */
        .phone-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .phone-modal-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
            animation: modalAppear 0.3s ease;
        }

        .dark-mode .phone-modal-content {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .phone-number {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 1.5rem 0;
            color: var(--primary-dark);
            direction: ltr;
        }

        .dark-mode .phone-number {
            color: #90CAF9;
        }

        .whatsapp-activation-btn {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: var(--white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin: 1rem auto;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
            width: 100%;
        }

        .whatsapp-activation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
        }

        .close-modal {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            width: 100%;
            margin-top: 1rem;
        }

        .close-modal:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Signup Page */
        .signup-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
        }

        .signup-content {
            text-align: center;
            padding: 3rem;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            position: relative;
            z-index: 2;
            animation: contentSlideUp 0.8s ease;
        }

        @keyframes contentSlideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dark-mode .signup-content {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .signup-content h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.5)); }
            to { filter: drop-shadow(0 0 15px rgba(33, 150, 243, 0.8)); }
        }

        .signup-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2.5rem;
            font-weight: 300;
            line-height: 1.6;
        }

        .dark-mode .signup-subtitle {
            color: #B0BEC5;
        }

        /* Login Page */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
        }

        .login-content {
            text-align: center;
            padding: 3rem;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            position: relative;
            z-index: 2;
            animation: contentSlideUp 0.8s ease;
        }

        .dark-mode .login-content {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .login-content h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        .login-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2.5rem;
            font-weight: 300;
            line-height: 1.6;
        }

        .dark-mode .login-subtitle {
            color: #B0BEC5;
        }

        .auth-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            max-width: 350px;
            margin: 0 auto 2rem;
        }

        .auth-btn {
            padding: 1.3rem 2rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .auth-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.6s;
        }

        .auth-btn:hover::before {
            right: 100%;
        }

        .auth-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .login-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
        }

        .guest-btn {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        .guest-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .guest-btn:disabled:hover {
            transform: none;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .signup-btn {
            background: linear-gradient(135deg, var(--success) 0%, #388E3C 100%);
            color: var(--white);
        }

        .login-form, .signup-form {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            max-width: 350px;
            margin: 0 auto 2rem;
        }

        .form-input {
            padding: 1.2rem 1.5rem;
            font-size: 1rem;
            border-radius: 50px;
            border: 2px solid var(--primary);
            background: rgba(255, 255, 255, 0.9);
            transition: var(--transition);
            text-align: right;
            width: 100%;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
            transform: scale(1.02);
        }

        .dark-mode .form-input {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .password-input-container {
            position: relative;
            width: 100%;
        }

        .password-toggle {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1rem;
            padding: 0.5rem;
        }

        .password-toggle:hover {
            color: var(--primary);
        }

        /* Menu Page */
        .menu-container {
            min-height: 100vh;
            padding: 2rem;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 5rem;
            animation: contentSlideUp 0.8s ease;
        }

        .header h1 {
            font-size: 3rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dark-mode .header h1 {
            color: #90CAF9;
        }

        .page-subtitle {
            font-size: 1.3rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .dark-mode .page-subtitle {
            color: #B0BEC5;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
            max-width: 1200px;
            margin: 3rem auto 0;
        }

        .menu-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            transform: translateY(50px);
            opacity: 0;
            animation: cardSlideUp 0.8s ease forwards;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .menu-card:nth-child(1) { animation-delay: 0.2s; }
        .menu-card:nth-child(2) { animation-delay: 0.4s; }

        @keyframes cardSlideUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.4s ease;
        }

        .menu-card:hover::before {
            transform: scaleX(1);
        }

        .dark-mode .menu-card {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .menu-card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        .menu-card-icon {
            font-size: 5rem;
            margin-bottom: 2rem;
            filter: drop-shadow(0 6px 12px rgba(33, 150, 243, 0.3));
            transition: var(--transition);
        }

        .menu-card:hover .menu-card-icon {
            transform: scale(1.2) rotate(8deg);
        }

        .menu-card h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
            font-weight: 600;
        }

        .dark-mode .menu-card h2 {
            color: #90CAF9;
        }

        .menu-card p {
            color: var(--text-light);
            line-height: 1.7;
            font-size: 1.1rem;
        }

        .dark-mode .menu-card p {
            color: var(--light);
        }

        .back-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            box-shadow: var(--shadow);
            font-weight: 600;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }

        .back-btn:hover::before {
            left: 100%;
        }

        .back-btn:hover {
            transform: translateX(-8px) scale(1.05);
            box-shadow: 0 12px 30px rgba(33, 150, 243, 0.4);
        }

        /* Exams Page */
        .exams-container {
            min-height: 100vh;
            padding: 2rem;
            position: relative;
        }

        .exams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 3rem auto 0;
        }

        .exam-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            transform: translateY(30px);
            opacity: 0;
            animation: cardSlideUp 0.6s ease forwards;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .exam-card:nth-child(odd) { animation-delay: 0.1s; }
        .exam-card:nth-child(even) { animation-delay: 0.2s; }

        .dark-mode .exam-card {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .exam-card:hover {
            transform: translateY(-12px) scale(1.08);
            box-shadow: var(--shadow-hover);
        }

        .exam-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .exam-card:hover::after {
            opacity: 1;
        }

        .exam-card h3 {
            margin-bottom: 1rem;
            color: var(--primary-dark);
            font-size: 1.4rem;
            font-weight: 600;
            position: relative;
            z-index: 2;
        }

        .dark-mode .exam-card h3 {
            color: #90CAF9;
        }

        .exam-card p {
            color: var(--text-light);
            position: relative;
            z-index: 2;
        }

        .dark-mode .exam-card p {
            color: var(--light);
        }

        /* KURS Submenu */
        .kurs-submenu {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 3rem auto 0;
        }

        .kurs-submenu.active {
            display: grid;
        }

        .kurs-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            transform: translateY(30px);
            opacity: 0;
            animation: cardSlideUp 0.6s ease forwards;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .kurs-card:nth-child(1) { animation-delay: 0.1s; }
        .kurs-card:nth-child(2) { animation-delay: 0.2s; }
        .kurs-card:nth-child(3) { animation-delay: 0.3s; }
        .kurs-card:nth-child(4) { animation-delay: 0.4s; }
        .kurs-card:nth-child(5) { animation-delay: 0.5s; }

        .dark-mode .kurs-card {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .kurs-card:hover {
            transform: translateY(-12px) scale(1.08);
            box-shadow: var(--shadow-hover);
        }

        .kurs-card h3 {
            margin-bottom: 1rem;
            color: var(--primary-dark);
            font-size: 1.4rem;
            font-weight: 600;
            position: relative;
            z-index: 2;
        }

        .dark-mode .kurs-card h3 {
            color: #90CAF9;
        }

        .kurs-card p {
            color: var(--text-light);
            position: relative;
            z-index: 2;
        }

        .dark-mode .kurs-card p {
            color: var(--light);
        }

        /* Back Button for KURS */
        .back-to-kurs {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            box-shadow: var(--shadow);
            font-weight: 600;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .back-to-kurs::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }

        .back-to-kurs:hover::before {
            left: 100%;
        }

        .back-to-kurs:hover {
            transform: translateX(-8px) scale(1.05);
            box-shadow: 0 12px 30px rgba(66, 165, 245, 0.4);
        }

        /* M√ºndlich Submenu */
        .mundlich-submenu {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 3rem auto 0;
        }

        .mundlich-submenu.active {
            display: grid;
        }

        .mundlich-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            transform: translateY(30px);
            opacity: 0;
            animation: cardSlideUp 0.6s ease forwards;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .mundlich-card:nth-child(1) { animation-delay: 0.1s; }
        .mundlich-card:nth-child(2) { animation-delay: 0.2s; }
        .mundlich-card:nth-child(3) { animation-delay: 0.3s; }

        .dark-mode .mundlich-card {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .mundlich-card:hover {
            transform: translateY(-12px) scale(1.08);
            box-shadow: var(--shadow-hover);
        }

        /* Support Modal */
        .support-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .support-modal-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
            animation: modalAppear 0.3s ease;
        }

        .dark-mode .support-modal-content {
            background: #1a237e;
            color: var(--light);
        }

        .support-info {
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 15px;
        }

        .support-item {
            margin: 1rem 0;
            font-size: 1.1rem;
        }

        /* Profile Page */
        .profile-container {
            min-height: 100vh;
            padding: 2rem;
            position: relative;
        }

        .profile-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            transform: translateY(30px);
            opacity: 0;
            animation: cardSlideUp 0.8s ease forwards;
        }

        .dark-mode .profile-card {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .profile-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .profile-avatar-container {
            position: relative;
            display: inline-block;
            margin-bottom: 1.5rem;
        }

        .profile-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--white);
            font-weight: bold;
            box-shadow: 0 12px 30px rgba(33, 150, 243, 0.4);
            border: 4px solid var(--white);
            animation: avatarPulse 3s ease-in-out infinite;
            background-size: cover;
            background-position: center;
        }

        @keyframes avatarPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .image-upload-container {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .image-upload-label {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
            transition: var(--transition);
        }

        .image-upload-label:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.4);
        }

        .image-upload-input {
            display: none;
        }

        .profile-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .info-section {
            background: rgba(33, 150, 243, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(5px);
        }

        .info-section h3 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .dark-mode .info-section h3 {
            color: #90CAF9;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid rgba(33, 150, 243, 0.1);
            font-size: 1rem;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .countdown-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 12px 30px rgba(33, 150, 243, 0.3);
            position: relative;
            overflow: hidden;
        }

        .countdown-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shine 4s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .countdown-section h3 {
            color: var(--white);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            position: relative;
            z-index: 2;
        }

        .countdown-timer {
            font-family: 'Courier New', monospace;
            font-size: 2rem;
            font-weight: bold;
            color: var(--white);
            position: relative;
            z-index: 2;
        }

        .profile-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .profile-action-btn {
            padding: 1rem 1.8rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .profile-action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .edit-profile-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
        }

        .change-password-btn {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        .logout-btn {
            background: linear-gradient(135deg, var(--danger) 0%, #d32f2f 100%);
            color: var(--white);
        }

        /* Edit Profile Modal */
        .edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .edit-modal-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            animation: modalAppear 0.3s ease;
        }

        .dark-mode .edit-modal-content {
            background: #1a237e;
            color: var(--light);
        }

        .edit-form {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            margin: 1.5rem 0;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            text-align: right;
        }

        .form-group label {
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-select {
            padding: 1rem 1.5rem;
            font-size: 1rem;
            border-radius: 50px;
            border: 2px solid var(--primary);
            background: rgba(255, 255, 255, 0.9);
            transition: var(--transition);
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .dark-mode .form-select {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        /* Waiting Approval Page */
        .waiting-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
        }

        .waiting-content {
            text-align: center;
            padding: 3rem;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            position: relative;
            z-index: 2;
            animation: contentSlideUp 0.8s ease;
        }

        .dark-mode .waiting-content {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .waiting-icon {
            margin: 2rem 0;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .waiting-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .waiting-content p {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .dark-mode .waiting-content p {
            color: #B0BEC5;
        }

        .whatsapp-button {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: var(--white);
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin: 1.5rem auto;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(37, 211, 102, 0.4);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            padding: 1rem 1.5rem;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            animation: toastSlideIn 0.3s ease;
            max-width: 350px;
        }

        @keyframes toastSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .toast-success {
            background: linear-gradient(135deg, var(--success) 0%, #388E3C 100%);
        }

        .toast-error {
            background: linear-gradient(135deg, var(--danger) 0%, #d32f2f 100%);
        }

        .toast-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #FF8F00 100%);
        }

        .toast-info {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .login-content, .signup-content, .waiting-content, .profile-card, .edit-modal-content {
                padding: 2rem 1.5rem;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .page-subtitle {
                font-size: 1.1rem;
            }

            .menu-grid, .exams-grid, .kurs-submenu, .mundlich-submenu {
                grid-template-columns: 1fr;
            }

            .menu-card, .exam-card, .kurs-card, .mundlich-card {
                padding: 2rem 1.5rem;
            }

            .profile-info-grid {
                grid-template-columns: 1fr;
            }

            .profile-actions {
                flex-direction: column;
                align-items: center;
            }

            .profile-action-btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }

            .header-controls {
                top: 10px;
                right: 10px;
            }

            .language-selector {
                top: 10px;
                left: 10px;
            }

            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .trial-banner-content {
                flex-direction: column;
                gap: 0.5rem;
            }

            .trial-text {
                font-size: 0.9rem;
            }

            .trial-timer {
                font-size: 1rem;
            }
        }

        /* Page Management */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Floating Background Elements -->
    <div class="floating-elements">
        <div class="floating-element floating-book">üìö</div>
        <div class="floating-element floating-pen">‚úèÔ∏è</div>
        <div class="floating-element floating-globe">üåç</div>
        <div class="floating-element floating-clock">‚è∞</div>
        <div class="floating-element floating-graduate">üéì</div>
        <div class="floating-element floating-notebook">üìì</div>
        <div class="floating-element floating-pencil">‚úèÔ∏è</div>
        <div class="floating-element floating-calculator">üßÆ</div>
    </div>

    <!-- Trial Countdown Banner -->
    <div class="trial-banner" id="trialBanner">
        <div class="trial-banner-content">
            <div class="trial-text" id="trialBannerText">ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ© - ŸÖÿ™ÿ®ŸÇŸä:</div>
            <div class="trial-timer" id="trialTimer">24:00:00</div>
        </div>
    </div>

    <!-- Premium Crown Badge -->
    <div class="premium-badge" id="premiumBadge">
        <i class="fas fa-crown" style="color: #fff; font-size: 1.2rem;"></i>
    </div>

    <!-- Language Selector -->
    <div class="language-selector">
        <button class="lang-btn" id="langBtn">
            <span>üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
        </button>
        <div class="lang-dropdown" id="langDropdown">
            <div class="lang-option" data-lang="ar">
                <span>üá∏üá¶</span>
                <span>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
            </div>
            <div class="lang-option" data-lang="de">
                <span>üá©üá™</span>
                <span>Deutsch</span>
            </div>
            <div class="lang-option" data-lang="en">
                <span>üá¨üáß</span>
                <span>English</span>
            </div>
        </div>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <button class="control-btn theme-toggle" id="themeToggle">üåô</button>
        <button class="control-btn support-btn" id="supportBtn">üí¨</button>
        <button class="control-btn profile-btn" id="profileBtn" style="display: none;">üë§</button>
    </div>

    <!-- Phone Modal -->
    <div class="phone-modal" id="phoneModal">
        <div class="phone-modal-content">
            <h2 id="phoneModalTitle">ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ</h2>
            <p id="phoneModalText">ŸÑÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ Ÿàÿ•ŸÉŸÖÿßŸÑ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®:</p>
            <div class="phone-number">+212 649-661976</div>
            <button class="whatsapp-activation-btn" id="whatsappActivationBtn">
                <i class="fab fa-whatsapp"></i>
                <span>ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÑÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ</span>
            </button>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-light);">ÿ≥ŸÜŸÇŸàŸÖ ÿ®ÿ™Ÿàÿ¨ŸäŸáŸÉ ŸÑÿ•ŸÉŸÖÿßŸÑ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ</p>
            <button class="close-modal" id="closePhoneModal">ÿ•ÿ∫ŸÑÿßŸÇ</button>
        </div>
    </div>

    <!-- Support Modal -->
    <div class="support-modal" id="supportModal">
        <div class="support-modal-content">
            <h2 id="supportTitle">ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿØÿπŸÖ</h2>
            <p id="supportText">ŸÑŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿ£Ÿà ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ ÿ£Ÿà ŸÑÿ¥ÿ±ÿßÿ° ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ© Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ:</p>
            <div class="support-info">
                <div class="support-item">
                    <i class="fas fa-phone"></i>
                    <span>+212 649-661976</span>
                </div>
                <div class="support-item">
                    <i class="fas fa-envelope"></i>
                    <span>im.meza200@gmail.com</span>
                </div>
            </div>
            <button class="close-modal" id="closeSupportModal">ÿ•ÿ∫ŸÑÿßŸÇ</button>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="edit-modal" id="editModal">
        <div class="edit-modal-content">
            <h2 id="editProfileTitle">ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä</h2>
            <div class="edit-form">
                <div class="form-group">
                    <label for="editName">ÿßŸÑÿßÿ≥ŸÖ:</label>
                    <input type="text" id="editName" class="form-input" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ">
                </div>
                <div class="form-group">
                    <label for="editEmail">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:</label>
                    <input type="email" id="editEmail" class="form-input" placeholder="ÿ£ÿØÿÆŸÑ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                </div>
                <div class="form-group">
                    <label for="editPhone">ÿßŸÑŸáÿßÿ™ŸÅ:</label>
                    <input type="tel" id="editPhone" class="form-input" placeholder="ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅŸÉ">
                </div>
                <div class="form-group">
                    <label for="editLocation">ÿßŸÑŸÖŸÉÿßŸÜ:</label>
                    <input type="text" id="editLocation" class="form-input" placeholder="ÿ£ÿØÿÆŸÑ ŸÖŸÉÿßŸÜ ÿ•ŸÇÿßŸÖÿ™ŸÉ">
                </div>
                <div class="form-group">
                    <label for="editExamDate">ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:</label>
                    <input type="date" id="editExamDate" class="form-input">
                </div>
                <div class="form-group">
                    <label for="editExamLocation">ŸÖŸÉÿßŸÜ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:</label>
                    <select id="editExamLocation" class="form-select">
                        <option value="">ÿßÿÆÿ™ÿ± ŸÖÿØŸäŸÜÿ© ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ</option>
                        <option value="ŸÅÿßÿ≥">ŸÅÿßÿ≥ ‚Äî F√®s</option>
                        <option value="ÿßŸÑŸÇŸÜŸäÿ∑ÿ±ÿ©">ÿßŸÑŸÇŸÜŸäÿ∑ÿ±ÿ© ‚Äî K√©nitra</option>
                        <option value="ÿßŸÑÿ±ÿ®ÿßÿ∑">ÿßŸÑÿ±ÿ®ÿßÿ∑ ‚Äî Rabat</option>
                        <option value="ŸÖÿ±ÿßŸÉÿ¥">ŸÖÿ±ÿßŸÉÿ¥ ‚Äî Marrakech</option>
                        <option value="ÿßŸÑÿØÿßÿ± ÿßŸÑÿ®Ÿäÿ∂ÿßÿ°">ÿßŸÑÿØÿßÿ± ÿßŸÑÿ®Ÿäÿ∂ÿßÿ° ‚Äî Casablanca</option>
                        <option value="ÿ∑ŸÜÿ¨ÿ©">ÿ∑ŸÜÿ¨ÿ© ‚Äî Tanger</option>
                        <option value="ÿ®ŸÜŸä ŸÖŸÑÿßŸÑ">ÿ®ŸÜŸä ŸÖŸÑÿßŸÑ ‚Äî B√©ni Mellal</option>
                        <option value="ÿßŸÑŸÜÿßÿ∏Ÿàÿ±">ÿßŸÑŸÜÿßÿ∏Ÿàÿ± ‚Äî Nador</option>
                        <option value="ÿ£ŸÉÿßÿØŸäÿ±">ÿ£ŸÉÿßÿØŸäÿ± ‚Äî Agadir</option>
                    </select>
                </div>
            </div>
            <div class="profile-actions">
                <button class="profile-action-btn edit-profile-btn" id="saveProfile">
                    <i class="fas fa-save"></i>
                    <span>ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™</span>
                </button>
                <button class="profile-action-btn change-password-btn" id="changePassword">
                    <i class="fas fa-key"></i>
                    <span>ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</span>
                </button>
                <button class="profile-action-btn logout-btn" id="cancelEdit">
                    <i class="fas fa-times"></i>
                    <span>ÿ•ŸÑÿ∫ÿßÿ°</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-content">
                <h1 id="loginTitle">B2 Deutsch Training - ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿµÿßÿØŸÇÿ©</h1>
                <p class="login-subtitle" id="loginSubtitle">ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ŸÑŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿ£Ÿà ÿ¨ÿ±Ÿëÿ® ŸÉÿ∂ŸäŸÅ</p>
                
                <div class="login-form">
                    <input type="email" class="form-input" id="emailInput" placeholder="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    <div class="password-input-container">
                        <input type="password" class="form-input" id="passwordInput" placeholder="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                        <button class="password-toggle" id="passwordToggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button class="auth-btn login-btn" id="loginButton">
                        <i class="fas fa-sign-in-alt"></i>
                        <span id="loginBtnText">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</span>
                    </button>
                </div>

                <div class="auth-buttons">
                    <button class="auth-btn signup-btn" id="signupButton">
                        <i class="fas fa-user-plus"></i>
                        <span id="signupBtnText">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ</span>
                    </button>
                    <button class="auth-btn guest-btn" id="guestButton" disabled style="opacity: 0.5; cursor: not-allowed;">
                        <i class="fas fa-user"></i>
                        <span id="guestBtnText">ÿßŸÑÿØÿÆŸàŸÑ ŸÉÿ∂ŸäŸÅ</span>
                    </button>
                </div>

                <div class="subscription-activation" id="subscriptionActivation">
                    <i class="fas fa-crown"></i>
                    <span>ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Page -->
    <div id="signupPage" class="page">
        <div class="signup-container">
            <div class="signup-content">
                <h1 id="signupTitle">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ</h1>
                <p class="signup-subtitle" id="signupSubtitle">ÿßŸÖŸÑÿ£ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÑÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®ŸÉ</p>
                
                <div class="signup-form">
                    <input type="text" class="form-input" id="signupName" placeholder="ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ">
                    <input type="email" class="form-input" id="signupEmail" placeholder="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    <div class="password-input-container">
                        <input type="password" class="form-input" id="signupPassword" placeholder="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                        <button class="password-toggle" id="signupPasswordToggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-input-container">
                        <input type="password" class="form-input" id="signupConfirmPassword" placeholder="ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                        <button class="password-toggle" id="signupConfirmPasswordToggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button class="auth-btn signup-btn" id="createAccountButton">
                        <i class="fas fa-user-plus"></i>
                        <span id="createAccountText">ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®</span>
                    </button>
                </div>

                <div class="auth-buttons">
                    <button class="auth-btn login-btn" id="backToLoginFromSignup">
                        <i class="fas fa-arrow-right"></i>
                        <span id="backToLoginText">ÿßŸÑÿπŸàÿØÿ© ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Page -->
    <div id="menuPage" class="page">
        <div class="menu-container">
            <div class="header">
                <h1 id="menuTitle">B2 Deutsch Training Portal</h1>
                <p class="page-subtitle" id="menuSubtitle">ÿßÿÆÿ™ÿ± ŸÖÿ¨ÿßŸÑ ÿ™ÿπŸÑŸÖŸÉ Ÿàÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± ŸÑŸÑÿßÿÆÿ™ÿ®ÿßÿ±</p>
                <button class="back-btn" id="backToLogin">
                    <i class="fas fa-sign-out-alt"></i>
                    <span id="backToLoginText">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</span>
                </button>
            </div>
            
            <div class="menu-grid">
                <div class="menu-card" id="kursCard">
                    <div class="menu-card-icon">üìò</div>
                    <h2 id="kursTitle">KURS</h2>
                    <p id="kursDescription">ÿßŸÑÿØÿ±Ÿàÿ≥ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© ŸàÿßŸÑÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÖÿµŸÜŸÅÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ</p>
                </div>
                
                <div class="menu-card" id="examsCard">
                    <div class="menu-card-icon">üìö</div>
                    <h2 id="examsTitle">Pr√ºfungen</h2>
                    <p id="examsDescription">ÿßÿÆÿ™ÿ®ÿ± ŸÖÿπÿ±ŸÅÿ™ŸÉ ŸÖÿπ ÿ™ÿ≠ÿ∂Ÿäÿ±ÿßÿ™ŸÜÿß ÿßŸÑÿ¥ÿßŸÖŸÑÿ© ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ŸàÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©</p>
                </div>
            </div>
        </div>
    </div>

    <!-- KURS Submenu Page -->
    <div id="kursPage" class="page">
        <div class="exams-container">
            <button class="back-btn" id="backFromKurs">
                <i class="fas fa-arrow-right"></i>
                <span id="backKursText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
            </button>
            <div class="header">
                <h1 id="kursPageTitle">KURS - ÿßŸÑÿØÿ±Ÿàÿ≥</h1>
                <p class="page-subtitle" id="kursPageSubtitle">ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá</p>
            </div>
            
            <div class="kurs-submenu active">
                <div class="kurs-card" id="lesenCard">
                    <div class="menu-card-icon">üìñ</div>
                    <h3 id="lesenTitle">Lesen</h3>
                    <p id="lesenDescription">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ŸàÿßŸÑŸÅŸáŸÖ ÿßŸÑŸÜÿµŸä</p>
                </div>
                
                <div class="kurs-card" id="hoerenCard">
                    <div class="menu-card-icon">üëÇ</div>
                    <h3 id="hoerenTitle">H√∂ren</h3>
                    <p id="hoerenDescription">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ŸàÿßŸÑŸÅŸáŸÖ ÿßŸÑÿ≥ŸÖÿπŸä</p>
                </div>
                
                <div class="kurs-card" id="schreibenCard">
                    <div class="menu-card-icon">‚úçÔ∏è</div>
                    <h3 id="schreibenTitle">Schreiben</h3>
                    <p id="schreibenDescription">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ŸàÿßŸÑÿ™ÿπÿ®Ÿäÿ± ÿßŸÑŸÉÿ™ÿßÿ®Ÿä</p>
                </div>

                <div class="kurs-card" id="mundlichCard">
                    <div class="menu-card-icon">üó£Ô∏è</div>
                    <h3 id="mundlichTitle">M√ºndlich</h3>
                    <p id="mundlichDescription">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ŸàÿßŸÑÿ™ÿπÿ®Ÿäÿ± ÿßŸÑÿ¥ŸÅŸáŸä</p>
                </div>
                
                <div class="kurs-card" id="pdfsCard">
                    <div class="menu-card-icon">üìÑ</div>
                    <h3 id="pdfsTitle">PDFs</h3>
                    <p id="pdfsDescription">ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ© ÿ®ÿµŸäÿ∫ÿ© PDF ŸÑŸÑÿ™ÿ≠ŸÖŸäŸÑ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Lesen Exams Page -->
    <div id="lesenPage" class="page">
        <div class="exams-container">
            <button class="back-to-kurs" id="backFromLesen">
                <i class="fas fa-arrow-right"></i>
                <span id="backLesenText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS</span>
            </button>
            <div class="header">
                <h1 id="lesenPageTitle">Lesen - ÿßŸÑŸÇÿ±ÿßÿ°ÿ©</h1>
                <p class="page-subtitle" id="lesenPageSubtitle">ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá</p>
            </div>
            
            <div class="exams-grid" id="lesenGrid">
                <!-- Lesen exams will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- H√∂ren Exams Page -->
    <div id="hoerenPage" class="page">
        <div class="exams-container">
            <button class="back-to-kurs" id="backFromHoeren">
                <i class="fas fa-arrow-right"></i>
                <span id="backHoerenText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS</span>
            </button>
            <div class="header">
                <h1 id="hoerenPageTitle">H√∂ren - ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ</h1>
                <p class="page-subtitle" id="hoerenPageSubtitle">ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá</p>
            </div>
            
            <div class="exams-grid" id="hoerenGrid">
                <!-- H√∂ren exams will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Schreiben Exams Page -->
    <div id="schreibenPage" class="page">
        <div class="exams-container">
            <button class="back-to-kurs" id="backFromSchreiben">
                <i class="fas fa-arrow-right"></i>
                <span id="backSchreibenText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS</span>
            </button>
            <div class="header">
                <h1 id="schreibenPageTitle">Schreiben - ÿßŸÑŸÉÿ™ÿßÿ®ÿ©</h1>
                <p class="page-subtitle" id="schreibenPageSubtitle">ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá</p>
            </div>
            
            <div class="exams-grid" id="schreibenGrid">
                <!-- Schreiben exams will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- M√ºndlich Page -->
    <div id="mundlichPage" class="page">
        <div class="exams-container">
            <button class="back-to-kurs" id="backFromMundlich">
                <i class="fas fa-arrow-right"></i>
                <span id="backMundlichText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS</span>
            </button>
            <div class="header">
                <h1 id="mundlichPageTitle">M√ºndlich - ÿßŸÑÿ™ÿ≠ÿØÿ´</h1>
                <p class="page-subtitle" id="mundlichPageSubtitle">ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá</p>
            </div>
            
            <div class="mundlich-submenu active" id="mundlichSubmenu">
                <div class="mundlich-card" id="teil1Card">
                    <div class="menu-card-icon">1Ô∏è‚É£</div>
                    <h3 id="teil1Title">Teil 1</h3>
                    <p id="teil1Description">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ£ŸàŸÑ</p>
                </div>
                
                <div class="mundlich-card" id="teil2Card">
                    <div class="menu-card-icon">2Ô∏è‚É£</div>
                    <h3 id="teil2Title">Teil 2</h3>
                    <p id="teil2Description">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ´ÿßŸÜŸä</p>
                </div>
                
                <div class="mundlich-card" id="teil3Card">
                    <div class="menu-card-icon">3Ô∏è‚É£</div>
                    <h3 id="teil3Title">Teil 3</h3>
                    <p id="teil3Description">ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ´ÿßŸÑÿ´</p>
                </div>
            </div>
        </div>
    </div>

    <!-- PDFs Page -->
    <div id="pdfsPage" class="page">
        <div class="exams-container">
            <button class="back-to-kurs" id="backFromPdfs">
                <i class="fas fa-arrow-right"></i>
                <span id="backPdfsText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS</span>
            </button>
            <div class="header">
                <h1 id="pdfsPageTitle">PDFs - ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©</h1>
                <p class="page-subtitle" id="pdfsPageSubtitle">ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿßÿØÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑŸáÿß</p>
            </div>
            
            <div class="exams-grid" id="pdfsGrid">
                <!-- PDFs will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Exams Page -->
    <div id="examsPage" class="page">
        <div class="exams-container">
            <button class="back-btn" id="backFromExams">
                <i class="fas fa-arrow-right"></i>
                <span id="backExamsText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
            </button>
            <div class="header">
                <h1 id="examsPageTitle">Pr√ºfungen - ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™</h1>
                <p class="page-subtitle" id="examsPageSubtitle">ÿßÿÆÿ™ÿ± ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ™ÿØÿ±ÿ® ÿπŸÑŸäŸá</p>
            </div>
            
            <div class="exams-grid" id="examsGrid">
                <!-- Exams will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profilePage" class="page">
        <div class="profile-container">
            <button class="back-btn" id="backFromProfile">
                <i class="fas fa-arrow-right"></i>
                <span id="backProfileText">ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
            </button>
            <div class="header">
                <h1 id="profileTitle">ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä</h1>
                <p class="page-subtitle" id="profileSubtitle">ÿ•ÿØÿßÿ±ÿ© ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© Ÿàÿ™ÿ™ÿ®ÿπ ÿ™ŸÇÿØŸÖŸÉ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸä</p>
            </div>
            
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar-container">
                        <div class="profile-avatar" id="userAvatar">ÿ≤</div>
                    </div>
                    <h2 id="userName">ÿ≤ŸÉÿ±Ÿäÿßÿ°</h2>
                    <p id="userLevel">ÿ∑ÿßŸÑÿ® ŸÖÿ≥ÿ™ŸàŸâ B2</p>
                </div>

                <div class="image-upload-container">
                    <label for="imageUpload" class="image-upload-label">
                        <i class="fas fa-camera"></i> ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ©
                    </label>
                    <input type="file" id="imageUpload" class="image-upload-input" accept="image/*">
                </div>
                
                <div class="profile-info-grid">
                    <div class="info-section">
                        <h3 id="personalInfoTitle">ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ©</h3>
                        <div class="info-item">
                            <span id="nameLabel">ÿßŸÑÿßÿ≥ŸÖ:</span>
                            <span id="profileName">ÿ≤ŸÉÿ±Ÿäÿßÿ°</span>
                        </div>
                        <div class="info-item">
                            <span id="emailLabel">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:</span>
                            <span id="profileEmail">zakariaap.6@gmail.com</span>
                        </div>
                        <div class="info-item">
                            <span id="phoneLabel">ÿßŸÑŸáÿßÿ™ŸÅ:</span>
                            <span id="profilePhone">+212 649-661976</span>
                        </div>
                        <div class="info-item">
                            <span id="locationLabel">ÿßŸÑŸÖŸÉÿßŸÜ:</span>
                            <span id="profileLocation">ÿßŸÑŸÖÿ∫ÿ±ÿ®</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 id="examInfoTitle">ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ</h3>
                        <div class="info-item">
                            <span id="examDateLabel">ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:</span>
                            <span id="profileExamDate">01/12/2025</span>
                        </div>
                        <div class="info-item">
                            <span id="examLocationLabel">ŸÖŸÉÿßŸÜ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:</span>
                            <span id="profileExamLocation">ÿ®ÿ±ŸÑŸäŸÜ</span>
                        </div>
                        <div class="info-item">
                            <span id="levelLabel">ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ:</span>
                            <span id="profileLevel">B2</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 id="statsTitle">ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</h3>
                        <div class="info-item">
                            <span id="pointsLabel">ÿßŸÑŸÜŸÇÿßÿ∑:</span>
                            <span id="profilePoints">150</span>
                        </div>
                        <div class="info-item">
                            <span id="completedLabel">ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©:</span>
                            <span id="profileCompleted">8/20</span>
                        </div>
                        <div class="info-item">
                            <span id="progressLabel">ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ™ŸÇÿØŸÖ:</span>
                            <span id="profileProgress">65%</span>
                        </div>
                    </div>
                </div>
                
                <div class="countdown-section">
                    <h3 id="examCountdownTitle">ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä ÿ≠ÿ™Ÿâ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:</h3>
                    <div class="countdown-timer" id="examCountdown">30 ŸäŸàŸÖ 00:00:00</div>
                </div>
                
                <div class="profile-actions">
                    <button class="profile-action-btn edit-profile-btn" id="editProfileBtn">
                        <i class="fas fa-edit"></i>
                        <span id="editProfileText">ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä</span>
                    </button>
                    <button class="profile-action-btn change-password-btn" id="changePasswordBtn">
                        <i class="fas fa-key"></i>
                        <span id="changePasswordText">ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</span>
                    </button>
                    <button class="profile-action-btn logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span id="logoutText">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Waiting Approval Page -->
    <div id="waitingPage" class="page">
        <div class="waiting-container">
            <div class="waiting-content">
                <h1 id="waitingTitle">ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ∑ŸÑÿ®ŸÉ</h1>
                <p id="waitingText">ÿ™ŸÖ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ∑ŸÑÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ. ŸÜÿπŸÖŸÑ ÿßŸÑÿ¢ŸÜ ÿπŸÑŸâ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ∑ŸÑÿ® ŸàÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™.</p>
                <div class="waiting-icon">
                    <i class="fas fa-clock fa-4x"></i>
                </div>
                <p id="waitingSubtext">ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ®ŸÑÿßÿ∫ŸÉ ÿ®ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÅŸä ÿ£ŸÇÿ±ÿ® ŸàŸÇÿ™ ŸÖŸÖŸÉŸÜ. ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÑŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™.</p>
                
                <button class="whatsapp-button" id="whatsappButton">
                    <i class="fab fa-whatsapp"></i>
                    <span>ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®</span>
                </button>
                
                <button class="auth-btn login-btn" id="signOutWaiting">
                    <i class="fas fa-sign-out-alt"></i>
                    <span id="signOutWaitingText">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script type="module">
        // ÿ™ŸÉŸàŸäŸÜ Supabase
        const SUPABASE_URL = 'https://vjiavzcyzrzemnkixcdm.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqaWF2emN5enJ6ZW1ua2l4Y2RtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3MzkwODYsImV4cCI6MjA4NjMxNTA4Nn0.DcKKxeWD52Y9-vECT9YE5xiXeQ37v9nV1RaobHtqAP4';
        
        // ÿ™ŸáŸäÿ¶ÿ© Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Ÿàÿ∏ŸäŸÅÿ© ÿ™ŸàŸÑŸäÿØ ŸÖÿπÿ±ŸÅ ÿßŸÑÿ¨Ÿáÿßÿ≤
        function getDeviceId() {
            let id = localStorage.getItem("device_id");
            if (!id) {
                id = crypto.randomUUID();
                localStorage.setItem("device_id", id);
            }
            return id;
        }
        
        const deviceId = getDeviceId();

        // ŸÇŸàÿßÿ¶ŸÖ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ŸàÿßŸÑÿØÿ±Ÿàÿ≥
        const themaKompliExams = [
            "ALBI2A.html", "ALPEN.html", "BATATA.html", "BILDER.html", "BINZIL.html",
            "GRUND SCHULE.html", "HACHARAT.html", "KELLNER.html", "L9AHWA.html", "LHALWA.html",
            "LI9A7.html", "LICHT.html", "LIMON.html", "MOBARMIJIN.html", "NA7L.html",
            "NAMSA.html", "SCHLAFZUG.html", "SPORT IST GESUND.html", "TANZKURZ.html", "TRANPOLIN.html",
            "INSEL.html", "L2AL3AB.html", "KINDER HENDY.html", "DROGEN.html", "GELD.html"
        ];

        const lesenExams = [
            "AL3AB.html", "ALBI2A.html", "ALPEN.html", "BATATA.html", "BENZIL.html",
            "BILDER.html", "GELD.html", "GRUNDSCHULE.html", "HACHARAT.html", "HATIF L2ATFAL.html",
            "INSEL.html", "INTIKHABAT.html", "KELLNER.html", "L7ALWA.html", "L9AHWA.html",
            "LI9A7.html", "LICHT.html", "LIMON.html", "MOBARMIJIN.html", "MOKHADIRAT.html",
            "NA7L.html", "NAMSA.html", "SCHLAFZUG.html", "SPORT IST GESUND.html", "TANZKURS.html", 
            "TRAMPOLIN.html", "L2AL3AB.html", "KINDER HENDY.html", "DROGEN.html"
        ];

        const hoerenExams = ["HOREN.html", "HOREN1.html"];
        const schreibenExams = ["SCHREIBEN.html"];
        const mundlichExams = ["teil1.pdf", "teil2.pdf", "teil3.pdf"];
        const pdfs = [
            "ALBI2A.pdf", "AL3AB.pdf", "ALPEN.pdf", "BATATA.pdf", "BENZIL.pdf",
            "BILDER.pdf", "GELD.pdf", "GRUNDSCHULE.pdf", "HACHARAT.pdf", "HATIF L2ATFAL.pdf",
            "INSEL.pdf", "INTIKHABAT.pdf", "KELLNER.pdf", "L7ALWA.pdf", "L9AHWA.pdf",
            "LI9A7.pdf", "LICHT.pdf", "LIMON.pdf", "MOBARMIJIN.pdf", "MOKHADIRAT.pdf",
            "NA7L.pdf", "NAMSA.pdf", "SCHLAFZUG.pdf", "SPORT IST GESUND.pdf", "TANZKURZ.pdf",
            "TRAMPOLINE.pdf", "horen.pdf", "horen1.pdf", "Schreiben.pdf", "L2AL3AB.pdf",
            "KINDER HENDY.pdf", "DROGEN.pdf", "GELD.pdf", "teil1.pdf", "teil2.pdf", "teil3.pdf"
        ];

        // ŸÇÿßŸÖŸàÿ≥ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ© ÿßŸÑŸÖÿµÿ≠ÿ≠
        const examTranslations = {
            "ALPEN": { de: "ALPEN", ar: "ÿ¨ÿ®ÿßŸÑ ÿßŸÑÿ£ŸÑÿ®" },
            "BATATA": { de: "KARTOFFEL", ar: "ÿßŸÑÿ®ÿ∑ÿßÿ∑ÿß" },
            "BILDER": { de: "BILDER", ar: "ÿßŸÑÿµŸàÿ±" },
            "BINZIL": { de: "BENZIN", ar: "ÿßŸÑÿ®ŸÜÿ≤ŸäŸÜ" },
            "GRUND SCHULE": { de: "GRUNDSCHULE", ar: "ÿßŸÑŸÖÿØÿ±ÿ≥ÿ© ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿäÿ©" },
            "HACHARAT": { de: "INSEKTEN", ar: "ÿßŸÑÿ≠ÿ¥ÿ±ÿßÿ™" },
            "KELLNER": { de: "KELLNER", ar: "ÿßŸÑŸÜÿßÿØŸÑ" },
            "L9AHWA": { de: "KAFFEE", ar: "ÿßŸÑŸÇŸáŸàÿ©" },
            "LHALWA": { de: "S√ú√üIGKEITEN", ar: "ÿßŸÑÿ≠ŸÑŸàŸâ" },
            "LI9A7": { de: "IMPFSTOFF", ar: "ÿßŸÑŸÑŸÇÿßÿ≠" },
            "LICHT": { de: "LICHT", ar: "ÿßŸÑÿ∂Ÿàÿ°" },
            "LIMON": { de: "LIMONADE", ar: "ÿπÿµŸäÿ± ÿßŸÑŸÑŸäŸÖŸàŸÜ" },
            "MOBARMIJIN": { de: "PROGRAMMIERER", ar: "ÿßŸÑŸÖÿ®ÿ±ŸÖÿ¨ŸäŸÜ" },
            "NA7L": { de: "BIENEN", ar: "ÿßŸÑŸÜÿ≠ŸÑ" },
            "NAMSA": { de: "√ñSTERREICH", ar: "ÿßŸÑŸÜŸÖÿ≥ÿß" },
            "SCHLAFZUG": { de: "SCHLAFZUG", ar: "ŸÇÿ∑ÿßÿ± ÿßŸÑŸÜŸàŸÖ" },
            "SPORT IST GESUND": { de: "SPORT IST GESUND", ar: "ÿßŸÑÿ±Ÿäÿßÿ∂ÿ© ÿµÿ≠Ÿäÿ©" },
            "TANZKURZ": { de: "TANZKURS", ar: "ÿØŸàÿ±ÿ© ÿßŸÑÿ±ŸÇÿµ" },
            "TRANPOLIN": { de: "TRAMPOLIN", ar: "ÿßŸÑÿ™ÿ±ÿßŸÖÿ®ŸàŸÑŸäŸÜ" },
            "INSEL": { de: "INSEL", ar: "ÿßŸÑÿ¨ÿ≤Ÿäÿ±ÿ©" },
            "L2AL3AB": { de: "SPIELE", ar: "ÿßŸÑÿ£ŸÑÿπÿßÿ®" },
            "KINDER HENDY": { de: "KINDERHANDY", ar: "Ÿáÿßÿ™ŸÅ ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ" },
            "DROGEN": { de: "DROGEN", ar: "ÿßŸÑŸÖÿÆÿØÿ±ÿßÿ™" },
            "GELD": { de: "GELD", ar: "ÿßŸÑŸÖÿßŸÑ" },
            "AL3AB": { de: "SPIELE", ar: "ÿßŸÑÿ£ŸÑÿπÿßÿ®" },
            "BENZIL": { de: "BENZIN", ar: "ÿßŸÑÿ®ŸÜÿ≤ŸäŸÜ" },
            "HATIF L2ATFAL": { de: "KINDERTELEFON", ar: "Ÿáÿßÿ™ŸÅ ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ" },
            "INTIKHABAT": { de: "WAHLEN", ar: "ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™" },
            "L7ALWA": { de: "S√ú√üIGKEITEN", ar: "ÿßŸÑÿ≠ŸÑŸàŸâ" },
            "MOKHADIRAT": { de: "DROGEN", ar: "ÿßŸÑŸÖÿÆÿØÿ±ÿßÿ™" },
            "TRAMPOLIN": { de: "TRAMPOLIN", ar: "ÿßŸÑÿ™ÿ±ÿßŸÖÿ®ŸàŸÑŸäŸÜ" },
            "HOREN": { de: "H√ñREN", ar: "ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ" },
            "HOREN1": { de: "H√ñREN 1", ar: "ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ 1" },
            "SCHREIBEN": { de: "SCHREIBEN", ar: "ÿßŸÑŸÉÿ™ÿßÿ®ÿ©" }
        };

        // ÿØÿßŸÑÿ© ŸÑÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÑŸÅ ÿ®ÿØŸàŸÜ ÿßŸÑÿßŸÖÿ™ÿØÿßÿØ
        function getExamName(filename) {
            return filename.replace('.html', '').replace('.pdf', '');
        }

        // ÿØÿßŸÑÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿ© ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸäÿ© ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
        function getGermanTranslation(filename) {
            const examName = getExamName(filename);
            return examTranslations[examName]?.de || examName;
        }

        // ÿØÿßŸÑÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸàÿµŸÅ ÿßŸÑÿπÿ±ÿ®Ÿä ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
        function getArabicDescription(filename) {
            const examName = getExamName(filename);
            return examTranslations[examName]?.ar || examName;
        }

        // ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™
        const translations = {
            ar: {
                loginTitle: "B2 Deutsch Training - ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿµÿßÿØŸÇÿ©",
                loginSubtitle: "ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ŸÑŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿ£Ÿà ÿ¨ÿ±Ÿëÿ® ŸÉÿ∂ŸäŸÅ",
                loginBtnText: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",
                signupBtnText: "ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ",
                guestBtnText: "ÿßŸÑÿØÿÆŸàŸÑ ŸÉÿ∂ŸäŸÅ",
                signupTitle: "ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ",
                signupSubtitle: "ÿßŸÖŸÑÿ£ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÑÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®ŸÉ",
                createAccountText: "ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®",
                backToLoginText: "ÿßŸÑÿπŸàÿØÿ© ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",
                menuTitle: "B2 Deutsch Training Portal",
                menuSubtitle: "ÿßÿÆÿ™ÿ± ŸÖÿ¨ÿßŸÑ ÿ™ÿπŸÑŸÖŸÉ Ÿàÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± ŸÑŸÑÿßÿÆÿ™ÿ®ÿßÿ±",
                kursTitle: "KURS",
                kursDescription: "ÿßŸÑÿØÿ±Ÿàÿ≥ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© ŸàÿßŸÑÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÖÿµŸÜŸÅÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ",
                examsTitle: "Pr√ºfungen",
                examsDescription: "ÿßÿÆÿ™ÿ®ÿ± ŸÖÿπÿ±ŸÅÿ™ŸÉ ŸÖÿπ ÿ™ÿ≠ÿ∂Ÿäÿ±ÿßÿ™ŸÜÿß ÿßŸÑÿ¥ÿßŸÖŸÑÿ© ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ŸàÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©",
                backToLoginText: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
                backKursText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                kursPageTitle: "KURS - ÿßŸÑÿØÿ±Ÿàÿ≥",
                kursPageSubtitle: "ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá",
                lesenTitle: "Lesen",
                lesenDescription: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ŸàÿßŸÑŸÅŸáŸÖ ÿßŸÑŸÜÿµŸä",
                hoerenTitle: "H√∂ren",
                hoerenDescription: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ŸàÿßŸÑŸÅŸáŸÖ ÿßŸÑÿ≥ŸÖÿπŸä",
                schreibenTitle: "Schreiben",
                schreibenDescription: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ŸàÿßŸÑÿ™ÿπÿ®Ÿäÿ± ÿßŸÑŸÉÿ™ÿßÿ®Ÿä",
                mundlichTitle: "M√ºndlich",
                mundlichDescription: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ŸàÿßŸÑÿ™ÿπÿ®Ÿäÿ± ÿßŸÑÿ¥ŸÅŸáŸä",
                pdfsTitle: "PDFs",
                pdfsDescription: "ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ© ÿ®ÿµŸäÿ∫ÿ© PDF ŸÑŸÑÿ™ÿ≠ŸÖŸäŸÑ",
                backLesenText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS",
                lesenPageTitle: "Lesen - ÿßŸÑŸÇÿ±ÿßÿ°ÿ©",
                lesenPageSubtitle: "ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá",
                backHoerenText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS",
                hoerenPageTitle: "H√∂ren - ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ",
                hoerenPageSubtitle: "ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá",
                backSchreibenText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS",
                schreibenPageTitle: "Schreiben - ÿßŸÑŸÉÿ™ÿßÿ®ÿ©",
                schreibenPageSubtitle: "ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá",
                backMundlichText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS",
                mundlichPageTitle: "M√ºndlich - ÿßŸÑÿ™ÿ≠ÿØÿ´",
                mundlichPageSubtitle: "ÿßÿÆÿ™ÿ± ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ®ÿØÿ° ÿ®Ÿá",
                teil1Title: "Teil 1",
                teil1Description: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ£ŸàŸÑ",
                teil2Title: "Teil 2",
                teil2Description: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ´ÿßŸÜŸä",
                teil3Title: "Teil 3",
                teil3Description: "ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ´ÿßŸÑÿ´",
                backPdfsText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ KURS",
                pdfsPageTitle: "PDFs - ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©",
                pdfsPageSubtitle: "ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿßÿØÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑŸáÿß",
                backExamsText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                examsPageTitle: "Pr√ºfungen - ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™",
                examsPageSubtitle: "ÿßÿÆÿ™ÿ± ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ™ÿØÿ±ÿ® ÿπŸÑŸäŸá",
                backProfileText: "ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                profileTitle: "ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä",
                profileSubtitle: "ÿ•ÿØÿßÿ±ÿ© ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© Ÿàÿ™ÿ™ÿ®ÿπ ÿ™ŸÇÿØŸÖŸÉ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸä",
                personalInfoTitle: "ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ©",
                nameLabel: "ÿßŸÑÿßÿ≥ŸÖ:",
                emailLabel: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:",
                phoneLabel: "ÿßŸÑŸáÿßÿ™ŸÅ:",
                locationLabel: "ÿßŸÑŸÖŸÉÿßŸÜ:",
                examInfoTitle: "ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ",
                examDateLabel: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:",
                examLocationLabel: "ŸÖŸÉÿßŸÜ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:",
                levelLabel: "ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ:",
                statsTitle: "ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™",
                pointsLabel: "ÿßŸÑŸÜŸÇÿßÿ∑:",
                completedLabel: "ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©:",
                progressLabel: "ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ™ŸÇÿØŸÖ:",
                examCountdownTitle: "ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä ÿ≠ÿ™Ÿâ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ:",
                editProfileText: "ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä",
                changePasswordText: "ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",
                logoutText: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
                supportTitle: "ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿØÿπŸÖ",
                supportText: "ŸÑŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿ£Ÿà ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ ÿ£Ÿà ŸÑÿ¥ÿ±ÿßÿ° ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ© Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ:",
                phoneModalTitle: "ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",
                phoneModalText: "ŸÑÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ Ÿàÿ•ŸÉŸÖÿßŸÑ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®:",
                trialBannerText: "ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ© - ŸÖÿ™ÿ®ŸÇŸä:",
                waitingTitle: "ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ∑ŸÑÿ®ŸÉ",
                waitingText: "ÿ™ŸÖ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ∑ŸÑÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ. ŸÜÿπŸÖŸÑ ÿßŸÑÿ¢ŸÜ ÿπŸÑŸâ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ∑ŸÑÿ® ŸàÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™.",
                waitingSubtext: "ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ®ŸÑÿßÿ∫ŸÉ ÿ®ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÅŸä ÿ£ŸÇÿ±ÿ® ŸàŸÇÿ™ ŸÖŸÖŸÉŸÜ. ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÑŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™.",
                signOutWaitingText: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
                editProfileTitle: "ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä"
            },
            en: {
                loginTitle: "B2 Deutsch Training - Authentication System",
                loginSubtitle: "Log in to start training or try as a guest",
                loginBtnText: "Login",
                signupBtnText: "Create New Account",
                guestBtnText: "Login as Guest",
                signupTitle: "Create New Account",
                signupSubtitle: "Fill in the following information to create your account",
                createAccountText: "Create Account",
                backToLoginText: "Back to Login",
                menuTitle: "B2 Deutsch Training Portal",
                menuSubtitle: "Choose your learning area and start preparing for the exam",
                kursTitle: "KURS",
                kursDescription: "Interactive lessons and classified exercises by level",
                examsTitle: "Pr√ºfungen",
                examsDescription: "Test your knowledge with our comprehensive exam preparations and simulations",
                backToLoginText: "Logout",
                backKursText: "Back to Main Menu",
                kursPageTitle: "KURS - Lessons",
                kursPageSubtitle: "Choose the type of training you want to start with",
                lesenTitle: "Lesen",
                lesenDescription: "Reading and text comprehension exercises",
                hoerenTitle: "H√∂ren",
                hoerenDescription: "Listening and auditory comprehension exercises",
                schreibenTitle: "Schreiben",
                schreibenDescription: "Writing and written expression exercises",
                mundlichTitle: "M√ºndlich",
                mundlichDescription: "Speaking and oral expression exercises",
                pdfsTitle: "PDFs",
                pdfsDescription: "Study materials in PDF format for download",
                backLesenText: "Back to KURS",
                lesenPageTitle: "Lesen - Reading",
                lesenPageSubtitle: "Choose the reading exercise you want to start with",
                backHoerenText: "Back to KURS",
                hoerenPageTitle: "H√∂ren - Listening",
                hoerenPageSubtitle: "Choose the listening exercise you want to start with",
                backSchreibenText: "Back to KURS",
                schreibenPageTitle: "Schreiben - Writing",
                schreibenPageSubtitle: "Choose the writing exercise you want to start with",
                backMundlichText: "Back to KURS",
                mundlichPageTitle: "M√ºndlich - Speaking",
                mundlichPageSubtitle: "Choose the speaking exercise you want to start with",
                teil1Title: "Teil 1",
                teil1Description: "Speaking exercises Part 1",
                teil2Title: "Teil 2",
                teil2Description: "Speaking exercises Part 2",
                teil3Title: "Teil 3",
                teil3Description: "Speaking exercises Part 3",
                backPdfsText: "Back to KURS",
                pdfsPageTitle: "PDFs - Study Materials",
                pdfsPageSubtitle: "Choose the material you want to download",
                backExamsText: "Back to Main Menu",
                examsPageTitle: "Pr√ºfungen - Exams",
                examsPageSubtitle: "Choose the exam you want to practice",
                backProfileText: "Back to Main Menu",
                profileTitle: "My Profile",
                profileSubtitle: "Manage your personal data and track your educational progress",
                personalInfoTitle: "Personal Information",
                nameLabel: "Name:",
                emailLabel: "Email:",
                phoneLabel: "Phone:",
                locationLabel: "Location:",
                examInfoTitle: "Exam Information",
                examDateLabel: "Exam Date:",
                examLocationLabel: "Exam Location:",
                levelLabel: "Level:",
                statsTitle: "Statistics",
                pointsLabel: "Points:",
                completedLabel: "Completed Exams:",
                progressLabel: "Progress Level:",
                examCountdownTitle: "Time remaining until exam:",
                editProfileText: "Edit Profile",
                changePasswordText: "Change Password",
                logoutText: "Logout",
                supportTitle: "Support Contact",
                supportText: "For questions, problems, or to purchase the full version, please contact:",
                phoneModalTitle: "Subscription Activation",
                phoneModalText: "To activate subscription and complete payment, please contact us via WhatsApp:",
                trialBannerText: "Trial Version - Remaining:",
                waitingTitle: "Waiting for Review",
                waitingText: "Your registration request has been received. We are now reviewing the request and verifying the information.",
                waitingSubtext: "You will be notified of the result as soon as possible. You can contact the administrator for more information.",
                signOutWaitingText: "Sign Out",
                editProfileTitle: "Edit Profile"
            },
            de: {
                loginTitle: "B2 Deutsch Training - Authentifizierungssystem",
                loginSubtitle: "Melden Sie sich an, um mit dem Training zu beginnen, oder probieren Sie es als Gast",
                loginBtnText: "Anmelden",
                signupBtnText: "Neues Konto erstellen",
                guestBtnText: "Als Gast anmelden",
                signupTitle: "Neues Konto erstellen",
                signupSubtitle: "F√ºllen Sie die folgenden Informationen aus, um Ihr Konto zu erstellen",
                createAccountText: "Konto erstellen",
                backToLoginText: "Zur√ºck zur Anmeldung",
                menuTitle: "B2 Deutsch Training Portal",
                menuSubtitle: "W√§hlen Sie Ihren Lernbereich und beginnen Sie mit der Pr√ºfungsvorbereitung",
                kursTitle: "KURS",
                kursDescription: "Interaktive Lektionen und nach Level klassifizierte √úbungen",
                examsTitle: "Pr√ºfungen",
                examsDescription: "Testen Sie Ihr Wissen mit unseren umfassenden Pr√ºfungsvorbereitungen und Simulationen",
                backToLoginText: "Abmelden",
                backKursText: "Zur√ºck zum Hauptmen√º",
                kursPageTitle: "KURS - Lektionen",
                kursPageSubtitle: "W√§hlen Sie die Art des Trainings, mit dem Sie beginnen m√∂chten",
                lesenTitle: "Lesen",
                lesenDescription: "Lese- und Textverst√§ndnis√ºbungen",
                hoerenTitle: "H√∂ren",
                hoerenDescription: "H√∂r- und H√∂rverst√§ndnis√ºbungen",
                schreibenTitle: "Schreiben",
                schreibenDescription: "Schreib- und schriftliche Ausdrucks√ºbungen",
                mundlichTitle: "M√ºndlich",
                mundlichDescription: "Sprech- und m√ºndliche Ausdrucks√ºbungen",
                pdfsTitle: "PDFs",
                pdfsDescription: "Lernmaterialien im PDF-Format zum Download",
                backLesenText: "Zur√ºck zu KURS",
                lesenPageTitle: "Lesen - Reading",
                lesenPageSubtitle: "W√§hlen Sie die Lese√ºbung, mit der Sie beginnen m√∂chten",
                backHoerenText: "Zur√ºck zu KURS",
                hoerenPageTitle: "H√∂ren - Listening",
                hoerenPageSubtitle: "W√§hlen Sie die H√∂r√ºbung, mit der Sie beginnen m√∂chten",
                backSchreibenText: "Zur√ºck zu KURS",
                schreibenPageTitle: "Schreiben - Writing",
                schreibenPageSubtitle: "W√§hlen Sie die Schreib√ºbung, mit der Sie beginnen m√∂chten",
                backMundlichText: "Zur√ºck zu KURS",
                mundlichPageTitle: "M√ºndlich - Speaking",
                mundlichPageSubtitle: "W√§hlen Sie die Sprech√ºbung, mit der Sie beginnen m√∂chten",
                teil1Title: "Teil 1",
                teil1Description: "Sprech√ºbungen Teil 1",
                teil2Title: "Teil 2",
                teil2Description: "Sprech√ºbungen Teil 2",
                teil3Title: "Teil 3",
                teil3Description: "Sprech√ºbungen Teil 3",
                backPdfsText: "Zur√ºck zu KURS",
                pdfsPageTitle: "PDFs - Lernmaterialien",
                pdfsPageSubtitle: "W√§hlen Sie das Material aus, das Sie herunterladen m√∂chten",
                backExamsText: "Zur√ºck zum Hauptmen√º",
                examsPageTitle: "Pr√ºfungen - Exams",
                examsPageSubtitle: "W√§hlen Sie die Pr√ºfung, die Sie √ºben m√∂chten",
                backProfileText: "Zur√ºck zum Hauptmen√º",
                profileTitle: "Mein Profil",
                profileSubtitle: "Verwalten Sie Ihre pers√∂nlichen Daten und verfolgen Sie Ihren Bildungsfortschritt",
                personalInfoTitle: "Pers√∂nliche Informationen",
                nameLabel: "Name:",
                emailLabel: "E-Mail:",
                phoneLabel: "Telefon:",
                locationLabel: "Ort:",
                examInfoTitle: "Pr√ºfungsinformationen",
                examDateLabel: "Pr√ºfungsdatum:",
                examLocationLabel: "Pr√ºfungsort:",
                levelLabel: "Niveau:",
                statsTitle: "Statistiken",
                pointsLabel: "Punkte:",
                completedLabel: "Abgeschlossene Pr√ºfungen:",
                progressLabel: "Fortschrittsniveau:",
                examCountdownTitle: "Verbleibende Zeit bis zur Pr√ºfung:",
                editProfileText: "Profil bearbeiten",
                changePasswordText: "Passwort √§ndern",
                logoutText: "Abmelden",
                supportTitle: "Support-Kontakt",
                supportText: "Bei Fragen, Problemen oder zum Kauf der Vollversion wenden Sie sich bitte an:",
                phoneModalTitle: "Abo-Aktivierung",
                phoneModalText: "Um das Abonnement zu aktivieren und die Zahlung abzuschlie√üen, wenden Sie sich bitte √ºber WhatsApp an uns:",
                trialBannerText: "Testversion - Verbleibend:",
                waitingTitle: "Warten auf √úberpr√ºfung",
                waitingText: "Ihre Registrierungsanfrage wurde empfangen. Wir √ºberpr√ºfen nun die Anfrage und die Informationen.",
                waitingSubtext: "Sie werden so schnell wie m√∂glich √ºber das Ergebnis informiert. Sie k√∂nnen sich f√ºr weitere Informationen an den Administrator wenden.",
                signOutWaitingText: "Abmelden",
                editProfileTitle: "Profil bearbeiten"
            }
        };

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        document.addEventListener('DOMContentLoaded', function() {
            // ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
            const pages = {
                login: document.getElementById('loginPage'),
                signup: document.getElementById('signupPage'),
                menu: document.getElementById('menuPage'),
                kurs: document.getElementById('kursPage'),
                lesen: document.getElementById('lesenPage'),
                hoeren: document.getElementById('hoerenPage'),
                schreiben: document.getElementById('schreibenPage'),
                mundlich: document.getElementById('mundlichPage'),
                pdfs: document.getElementById('pdfsPage'),
                exams: document.getElementById('examsPage'),
                profile: document.getElementById('profilePage'),
                waiting: document.getElementById('waitingPage')
            };

            // ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ŸÜŸÇŸÑ
            const backToLogin = document.getElementById('backToLogin');
            const backFromKurs = document.getElementById('backFromKurs');
            const backFromLesen = document.getElementById('backFromLesen');
            const backFromHoeren = document.getElementById('backFromHoeren');
            const backFromSchreiben = document.getElementById('backFromSchreiben');
            const backFromMundlich = document.getElementById('backFromMundlich');
            const backFromPdfs = document.getElementById('backFromPdfs');
            const backFromExams = document.getElementById('backFromExams');
            const backFromProfile = document.getElementById('backFromProfile');
            const backToLoginFromSignup = document.getElementById('backToLoginFromSignup');

            // ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÇÿßÿ¶ŸÖÿ©
            const kursCard = document.getElementById('kursCard');
            const examsCard = document.getElementById('examsCard');
            const lesenCard = document.getElementById('lesenCard');
            const hoerenCard = document.getElementById('hoerenCard');
            const schreibenCard = document.getElementById('schreibenCard');
            const mundlichCard = document.getElementById('mundlichCard');
            const pdfsCard = document.getElementById('pdfsCard');
            const teil1Card = document.getElementById('teil1Card');
            const teil2Card = document.getElementById('teil2Card');
            const teil3Card = document.getElementById('teil3Card');

            // ÿπŸÜÿßÿµÿ± ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ
            const emailInput = document.getElementById('emailInput');
            const passwordInput = document.getElementById('passwordInput');
            const loginButton = document.getElementById('loginButton');
            const signupButton = document.getElementById('signupButton');
            const guestButton = document.getElementById('guestButton');
            const passwordToggle = document.getElementById('passwordToggle');

            // ÿπŸÜÿßÿµÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®
            const signupName = document.getElementById('signupName');
            const signupEmail = document.getElementById('signupEmail');
            const signupPassword = document.getElementById('signupPassword');
            const signupConfirmPassword = document.getElementById('signupConfirmPassword');
            const createAccountButton = document.getElementById('createAccountButton');
            const signupPasswordToggle = document.getElementById('signupPasswordToggle');
            const signupConfirmPasswordToggle = document.getElementById('signupConfirmPasswordToggle');

            // ÿπŸÜÿßÿµÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
            const themeToggle = document.getElementById('themeToggle');
            const supportBtn = document.getElementById('supportBtn');
            const profileBtn = document.getElementById('profileBtn');

            // ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©
            const phoneModal = document.getElementById('phoneModal');
            const supportModal = document.getElementById('supportModal');
            const editModal = document.getElementById('editModal');
            const closePhoneModal = document.getElementById('closePhoneModal');
            const closeSupportModal = document.getElementById('closeSupportModal');
            const subscriptionActivation = document.getElementById('subscriptionActivation');
            const whatsappActivationBtn = document.getElementById('whatsappActivationBtn');

            // ŸÖÿ≠ÿØÿØ ÿßŸÑŸÑÿ∫ÿ©
            const langBtn = document.getElementById('langBtn');
            const langDropdown = document.getElementById('langDropdown');

            // ÿßŸÑÿπÿØÿßÿØ ŸàÿßŸÑÿ¥ÿßÿ±ÿßÿ™
            const trialBanner = document.getElementById('trialBanner');
            const trialTimer = document.getElementById('trialTimer');
            const premiumBadge = document.getElementById('premiumBadge');

            // ÿπŸÜÿßÿµÿ± ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä
            const editProfileBtn = document.getElementById('editProfileBtn');
            const changePasswordBtn = document.getElementById('changePasswordBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const saveProfile = document.getElementById('saveProfile');
            const changePassword = document.getElementById('changePassword');
            const cancelEdit = document.getElementById('cancelEdit');

            // ÿπŸÜÿßÿµÿ± ÿµŸÅÿ≠ÿ© ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±
            const signOutWaiting = document.getElementById('signOutWaiting');
            const whatsappButton = document.getElementById('whatsappButton');

            // Toast container
            const toastContainer = document.getElementById('toastContainer');

            // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©
            let currentUser = null;
            let currentLanguage = 'ar';
            let trialExpiry = new Date();
            let isGuest = false;
            let examDate = new Date();
            examDate.setMonth(examDate.getMonth() + 1);
            
            // ÿ™ÿ≠ŸÖŸäŸÑ ŸàŸÇÿ™ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ŸÖŸÜ localStorage
            const savedTrialExpiry = localStorage.getItem('trialExpiry');
            if (savedTrialExpiry) {
                trialExpiry = new Date(savedTrialExpiry);
            } else {
                trialExpiry.setHours(trialExpiry.getHours() + 24);
                localStorage.setItem('trialExpiry', trialExpiry.toISOString());
            }

            // ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ ŸÖŸÜ localStorage
            const savedExamDate = localStorage.getItem('examDate');
            if (savedExamDate) {
                examDate = new Date(savedExamDate);
            } else {
                localStorage.setItem('examDate', examDate.toISOString());
            }

            // ========== Ÿàÿ∏ŸäŸÅÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ≠ÿ≥ŸÜÿ© ==========
            async function handleLogin() {
                const email = emailInput.value.trim();
                const password = passwordInput.value;
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ•ÿØÿÆÿßŸÑ
                if (!email) {
                    showToast('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä', 'error');
                    return;
                }
                
                if (!password) {
                    showToast('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±', 'error');
                    return;
                }
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    showToast('ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠', 'error');
                    return;
                }
                
                try {
                    const { data, error } = await supabase.auth.signInWithPassword({
                        email,
                        password
                    });

                    if (error) {
                        // ÿ±ÿ≥ÿßÿ¶ŸÑ ÿÆÿ∑ÿ£ ŸÖÿÆÿµÿµÿ©
                        if (error.message.includes('Invalid login credentials')) {
                            showToast('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©', 'error');
                        } else if (error.message.includes('Email not confirmed')) {
                            showToast('ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ŸÖŸÅÿπŸÑ', 'error');
                        } else if (error.message.includes('Invalid email')) {
                            showToast('ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠', 'error');
                        } else {
                            showToast('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ: ' + error.message, 'error');
                        }
                        return;
                    }

                    currentUser = data.user;
                    
                    // ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ŸÑÿ≥ÿ© ÿßŸÑÿØÿÆŸàŸÑ
                    const { data: sessionData, error: sessionError } = await supabase
                        .rpc('log_user_login', {
                            user_uuid: currentUser.id,
                            device: deviceId
                        });
                    
                    if (sessionError) {
                        console.error('Error logging session:', sessionError);
                    } else {
                        localStorage.setItem('currentSessionId', sessionData);
                    }
                    
                    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿØ ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ©
                    const { data: deviceCheck, error: deviceError } = await supabase
                        .rpc('verify_device_limit', {
                            user_uuid: currentUser.id,
                            device: deviceId
                        });

                    if (deviceError) {
                        console.error('Device check error:', deviceError);
                    }

                    if (deviceCheck && deviceCheck.status === 'blocked') {
                        showToast(deviceCheck.message, 'error');
                        
                        // ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ÿßŸÑÿ¨ŸÑÿ≥ÿ©
                        if (localStorage.getItem('currentSessionId')) {
                            await supabase.rpc('log_user_logout', {
                                session_uuid: localStorage.getItem('currentSessionId')
                            });
                        }
                        
                        await supabase.auth.signOut();
                        currentUser = null;
                        localStorage.removeItem('currentSessionId');
                        return;
                    }
                    
                    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
                    const hasAccess = await checkUserAccess();
                    
                    if (hasAccess) {
                        showToast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');
                        showPage('menu');
                        updateUIForLoggedInUser();
                    } else {
                        showPage('waiting');
                    }
                    
                } catch (error) {
                    console.error('Login error:', error);
                    showToast('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ', 'error');
                }
            }

            // Ÿàÿ∏ŸäŸÅÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨
            async function handleSignOut() {
                try {
                    // ÿ™ÿ≥ÿ¨ŸäŸÑ ŸàŸÇÿ™ ÿßŸÑÿÆÿ±Ÿàÿ¨ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ¨ŸÑÿ≥ÿ© ŸÜÿ¥ÿ∑ÿ©
                    const sessionId = localStorage.getItem('currentSessionId');
                    if (sessionId && currentUser) {
                        await supabase.rpc('log_user_logout', {
                            session_uuid: sessionId
                        });
                        localStorage.removeItem('currentSessionId');
                    }
                    
                    const { error } = await supabase.auth.signOut();
                    if (error) throw error;
                    
                    currentUser = null;
                    isGuest = false;
                    updateUIForLoggedOutUser();
                    showPage('login');
                    
                    showToast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                    
                } catch (error) {
                    console.error('Sign out error:', error);
                    showToast('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨', 'error');
                }
            }

            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            async function checkUserAccess() {
                if (!currentUser) return false;
                
                try {
                    const { data, error } = await supabase
                        .from('user_permissions')
                        .select('can_access, subscription_type, subscription_expiry, trial_expiry')
                        .eq('user_id', currentUser.id)
                        .single();

                    // ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿµŸÑÿßÿ≠Ÿäÿ©
                    if (error || !data || !data.can_access) {
                        return false;
                    }

                    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ
                    const now = new Date();
                    
                    // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä ŸàÿßŸÜÿ™ŸáŸâ
                    if (data.subscription_type === 'trial_24h' && data.trial_expiry) {
                        const trialExpiry = new Date(data.trial_expiry);
                        if (trialExpiry < now) {
                            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ© ÿ•ŸÑŸâ ŸÖŸÜÿ™ŸáŸäÿ©
                            await supabase
                                .from('user_permissions')
                                .update({ can_access: false })
                                .eq('user_id', currentUser.id);
                            return false;
                        }
                    }
                    
                    // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿπÿßÿØŸä ŸàÿßŸÜÿ™ŸáŸâ
                    if (data.subscription_expiry) {
                        const subscriptionExpiry = new Date(data.subscription_expiry);
                        if (subscriptionExpiry < now) {
                            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ© ÿ•ŸÑŸâ ŸÖŸÜÿ™ŸáŸäÿ©
                            await supabase
                                .from('user_permissions')
                                .update({ can_access: false })
                                .eq('user_id', currentUser.id);
                            return false;
                        }
                    }

                    return true;

                } catch (error) {
                    console.error('Error checking user access:', error);
                    return false;
                }
            }

            // ÿØÿßŸÑÿ© ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
            async function changeUserPassword() {
                if (!currentUser) {
                    showToast('Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã', 'error');
                    return;
                }
                
                const currentPassword = prompt('ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©:');
                if (!currentPassword) return;
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©
                try {
                    const { error } = await supabase.auth.signInWithPassword({
                        email: currentUser.email,
                        password: currentPassword
                    });
                    
                    if (error) {
                        showToast('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©', 'error');
                        return;
                    }
                    
                    const newPassword = prompt('ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ© (6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ):');
                    if (!newPassword || newPassword.length < 6) {
                        showToast('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ', 'error');
                        return;
                    }
                    
                    const confirmPassword = prompt('ÿ£ŸÉÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©:');
                    if (newPassword !== confirmPassword) {
                        showToast('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ©', 'error');
                        return;
                    }
                    
                    // ÿ™ÿ≠ÿØŸäÿ´ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ŸÅŸä Supabase
                    const { error: updateError } = await supabase.auth.updateUser({
                        password: newPassword
                    });
                    
                    if (updateError) {
                        throw updateError;
                    }
                    
                    showToast('ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                    
                } catch (error) {
                    console.error('Error changing password:', error);
                    showToast('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±: ' + error.message, 'error');
                }
            }

            async function handleSignUp() {
                const name = signupName.value.trim();
                const email = signupEmail.value.trim();
                const password = signupPassword.value;
                const confirmPassword = signupConfirmPassword.value;
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ
                if (!name) {
                    showToast('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ', 'error');
                    return;
                }
                
                if (!email) {
                    showToast('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä', 'error');
                    return;
                }
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    showToast('ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠', 'error');
                    return;
                }
                
                if (!password) {
                    showToast('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±', 'error');
                    return;
                }
                
                if (!confirmPassword) {
                    showToast('Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showToast('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿàÿ™ÿ£ŸÉŸäÿØŸáÿß ÿ∫Ÿäÿ± ŸÖÿ™ÿ∑ÿßÿ®ŸÇŸäŸÜ', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showToast('ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ', 'error');
                    return;
                }
                
                try {
                    const { data, error } = await supabase.auth.signUp({
                        email,
                        password,
                        options: {
                            data: {
                                full_name: name
                            }
                        }
                    });

                    if (error) {
                        if (error.message.includes('User already registered')) {
                            showToast('Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ¨ŸÑ ŸÖÿ≥ÿ®ŸÇÿßŸã', 'error');
                        } else {
                            showToast('ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®: ' + error.message, 'error');
                        }
                        return;
                    }

                    // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿ¨ÿØŸàŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ
                    if (data.user) {
                        await addUserToRegistrationRequests(data.user, name);
                    }

                    showToast('ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠! Ÿäÿ±ÿ¨Ÿâ ÿßŸÜÿ™ÿ∏ÿßÿ± ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ', 'success');
                    showPage('waiting');
                    
                    // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ
                    signupName.value = '';
                    signupEmail.value = '';
                    signupPassword.value = '';
                    signupConfirmPassword.value = '';
                    
                } catch (error) {
                    showToast('ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®: ' + error.message, 'error');
                }
            }

            async function addUserToRegistrationRequests(user, name) {
                try {
                    const { data, error } = await supabase
                        .from('registration_requests')
                        .insert([
                            {
                                user_id: user.id,
                                email: user.email,
                                full_name: name,
                                status: 'pending'
                            }
                        ]);

                    if (error) throw error;
                    
                    return data;
                } catch (error) {
                    console.error('Error adding user to registration requests:', error);
                }
            }

            function handleGuestLogin() {
                showToast('ÿßŸÑÿØÿÆŸàŸÑ ŸÉÿ∂ŸäŸÅ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ÿ≠ÿßŸÑŸäÿßŸã', 'warning');
                return;
            }

            function updateUIForLoggedInUser() {
                profileBtn.style.display = 'flex';
                premiumBadge.style.display = 'flex';
                trialBanner.style.display = 'none';
            }

            function updateUIForLoggedOutUser() {
                profileBtn.style.display = 'none';
                premiumBadge.style.display = 'none';
                trialBanner.style.display = 'none';
            }

            function updateUIForGuestUser() {
                profileBtn.style.display = 'none';
                premiumBadge.style.display = 'none';
                trialBanner.style.display = 'block';
            }

            // Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑÿ™ŸÜŸÇŸÑ
            function showPage(pageName) {
                Object.values(pages).forEach(page => {
                    page.classList.remove('active');
                });
                
                if (pages[pageName]) {
                    pages[pageName].classList.add('active');
                }
                
                if (pageName === 'exams') {
                    populateExamsGrid();
                } else if (pageName === 'lesen') {
                    populateLesenGrid();
                } else if (pageName === 'hoeren') {
                    populateHoerenGrid();
                } else if (pageName === 'schreiben') {
                    populateSchreibenGrid();
                } else if (pageName === 'pdfs') {
                    populatePdfsGrid();
                } else if (pageName === 'profile') {
                    updateProfileDisplay();
                }
                
                updateTexts();
            }

            // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑÿ¥ÿ®ŸÉÿßÿ™
            function populateExamsGrid() {
                const examsGrid = document.getElementById('examsGrid');
                examsGrid.innerHTML = '';
                
                themaKompliExams.forEach((exam, index) => {
                    const germanName = getGermanTranslation(exam);
                    const arabicDesc = getArabicDescription(exam);
                    
                    const examCard = document.createElement('div');
                    examCard.className = 'exam-card';
                    examCard.style.animationDelay = `${index * 0.1}s`;
                    examCard.innerHTML = `
                        <h3>${germanName}</h3>
                        <p>${arabicDesc}</p>
                    `;
                    examCard.addEventListener('click', () => {
                        if ((currentUser?.guest || isGuest) && isTrialExpired()) {
                            showToast('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.', 'error');
                            return;
                        }
                        // ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®
                        if (exam === "INSEL.html") {
                            window.location.href = 'THEMA KOMPLI/INSEL.html';
                        } else {
                            window.location.href = 'THEMA KOMPLI/' + exam;
                        }
                    });
                    examsGrid.appendChild(examCard);
                });
            }

            function populateLesenGrid() {
                const lesenGrid = document.getElementById('lesenGrid');
                lesenGrid.innerHTML = '';
                
                lesenExams.forEach((exam, index) => {
                    const germanName = getGermanTranslation(exam);
                    const arabicDesc = getArabicDescription(exam);
                    
                    const examCard = document.createElement('div');
                    examCard.className = 'exam-card';
                    examCard.style.animationDelay = `${index * 0.1}s`;
                    examCard.innerHTML = `
                        <h3>${germanName}</h3>
                        <p>${arabicDesc}</p>
                    `;
                    examCard.addEventListener('click', () => {
                        if ((currentUser?.guest || isGuest) && isTrialExpired()) {
                            showToast('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.', 'error');
                            return;
                        }
                        // ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®
                        window.location.href = 'KURS/LESEN/' + exam;
                    });
                    lesenGrid.appendChild(examCard);
                });
            }

            function populateHoerenGrid() {
                const hoerenGrid = document.getElementById('hoerenGrid');
                hoerenGrid.innerHTML = '';
                
                hoerenExams.forEach((exam, index) => {
                    const germanName = getGermanTranslation(exam);
                    const arabicDesc = getArabicDescription(exam);
                    
                    const examCard = document.createElement('div');
                    examCard.className = 'exam-card';
                    examCard.style.animationDelay = `${index * 0.1}s`;
                    examCard.innerHTML = `
                        <h3>${germanName}</h3>
                        <p>${arabicDesc}</p>
                    `;
                    examCard.addEventListener('click', () => {
                        if ((currentUser?.guest || isGuest) && isTrialExpired()) {
                            showToast('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.', 'error');
                            return;
                        }
                        // ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖŸÜÿßÿ≥ÿ® ŸÖÿπ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÖÿ≥ÿßÿ± ÿ•ŸÑŸâ HOREN
                        window.location.href = 'KURS/HOREN/' + exam;
                    });
                    hoerenGrid.appendChild(examCard);
                });
            }

            function populateSchreibenGrid() {
                const schreibenGrid = document.getElementById('schreibenGrid');
                schreibenGrid.innerHTML = '';
                
                schreibenExams.forEach((exam, index) => {
                    const germanName = getGermanTranslation(exam);
                    const arabicDesc = getArabicDescription(exam);
                    
                    const examCard = document.createElement('div');
                    examCard.className = 'exam-card';
                    examCard.style.animationDelay = `${index * 0.1}s`;
                    examCard.innerHTML = `
                        <h3>${germanName}</h3>
                        <p>${arabicDesc}</p>
                    `;
                    examCard.addEventListener('click', () => {
                        if ((currentUser?.guest || isGuest) && isTrialExpired()) {
                            showToast('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.', 'error');
                            return;
                        }
                        // ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®
                        window.location.href = 'KURS/SCHREIBEN/' + exam;
                    });
                    schreibenGrid.appendChild(examCard);
                });
            }

            function populatePdfsGrid() {
                const pdfsGrid = document.getElementById('pdfsGrid');
                pdfsGrid.innerHTML = '';
                
                pdfs.forEach((pdf, index) => {
                    const germanName = getGermanTranslation(pdf);
                    const arabicDesc = getArabicDescription(pdf);
                    
                    const pdfCard = document.createElement('div');
                    pdfCard.className = 'exam-card';
                    pdfCard.style.animationDelay = `${index * 0.1}s`;
                    pdfCard.innerHTML = `
                        <h3>${germanName}</h3>
                        <p>${arabicDesc}</p>
                    `;
                    pdfCard.addEventListener('click', () => {
                        if ((currentUser?.guest || isGuest) && isTrialExpired()) {
                            showToast('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.', 'error');
                            return;
                        }
                        // ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖŸÜÿßÿ≥ÿ® ŸÖÿπ ÿ™ÿ∫ŸäŸäÿ± ÿ£ÿ≥ŸÖÿßÿ° ŸÖŸÑŸÅÿßÿ™ PDF
                        if (pdf === "teil1.pdf" || pdf === "teil2.pdf" || pdf === "teil3.pdf") {
                            window.location.href = 'KURS/MUNDLICH/' + pdf;
                        } else {
                            window.location.href = 'PDFs/' + pdf;
                        }
                    });
                    pdfsGrid.appendChild(pdfCard);
                });
            }

            function isTrialExpired() {
                return new Date() > trialExpiry;
            }

            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä
            function updateProfileDisplay() {
                if (currentUser && !currentUser.guest) {
                    const userName = currentUser.email ? currentUser.email.split('@')[0] : 'ŸÖÿ≥ÿ™ÿÆÿØŸÖ';
                    document.getElementById('userName').textContent = userName;
                    document.getElementById('profileName').textContent = userName;
                    document.getElementById('userAvatar').textContent = userName.charAt(0);
                    document.getElementById('profileEmail').textContent = currentUser.email || 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±';
                }
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿπÿØÿßÿØ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
                updateExamCountdown();
            }

            // ÿ™ÿ≠ÿØŸäÿ´ ÿπÿØÿßÿØ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
            function updateExamCountdown() {
                const now = new Date();
                const diff = examDate - now;
                
                if (diff <= 0) {
                    document.getElementById('examCountdown').textContent = "00:00:00";
                } else {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    document.getElementById('examCountdown').textContent = 
                        `${days} ŸäŸàŸÖ ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }

            // ÿ™ÿ≠ÿØŸäÿ´ ÿπÿØÿßÿØ ÿßŸÑŸàŸÇÿ™
            function updateCountdown() {
                const now = new Date();
                const diff = trialExpiry - now;
                
                if (diff <= 0) {
                    trialTimer.textContent = "00:00:00";
                    trialBanner.classList.add('expired');
                    if (isGuest) {
                        showToast('ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÑŸÑÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.', 'error');
                        showPage('login');
                    }
                } else {
                    const hours = Math.floor(diff / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    trialTimer.textContent = 
                        `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }

            // ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ©
            function changeLanguage(lang) {
                currentLanguage = lang;
                updateTexts();
                localStorage.setItem('language', lang);
                
                const langTexts = {
                    ar: 'üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
                    de: 'üá©üá™ Deutsch', 
                    en: 'üá¨üáß English'
                };
                langBtn.innerHTML = `<span>${langTexts[lang]}</span>`;
                
                document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
                document.documentElement.lang = lang;
            }

            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿµŸàÿµ ÿ≠ÿ≥ÿ® ÿßŸÑŸÑÿ∫ÿ©
            function updateTexts() {
                const t = translations[currentLanguage];
                if (!t) return;
                
                Object.keys(t).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.textContent = t[key];
                    }
                });
            }

            // ÿπÿ±ÿ∂ Toast
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                
                toast.innerHTML = `
                    <i class="fas ${icons[type]}"></i>
                    <span>${message}</span>
                `;
                
                toastContainer.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 5000);
            }

            // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©
            function handleImageUpload(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('userAvatar').style.backgroundImage = `url(${e.target.result})`;
                        localStorage.setItem('userAvatar', e.target.result);
                        showToast('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿµŸàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            }

            // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
            function loadSavedAvatar() {
                const savedAvatar = localStorage.getItem('userAvatar');
                if (savedAvatar) {
                    document.getElementById('userAvatar').style.backgroundImage = `url(${savedAvatar})`;
                }
            }

            // ŸÅÿ™ÿ≠ ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä
            function openEditProfile() {
                // ÿ™ÿπÿ®ÿ¶ÿ© ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿ®ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©
                document.getElementById('editName').value = document.getElementById('profileName').textContent;
                document.getElementById('editEmail').value = document.getElementById('profileEmail').textContent;
                document.getElementById('editPhone').value = document.getElementById('profilePhone').textContent;
                document.getElementById('editLocation').value = document.getElementById('profileLocation').textContent;
                document.getElementById('editExamDate').value = formatDateForInput(examDate);
                document.getElementById('editExamLocation').value = document.getElementById('profileExamLocation').textContent;
                
                editModal.style.display = 'flex';
            }

            // ÿ≠ŸÅÿ∏ ÿ™ÿπÿØŸäŸÑÿßÿ™ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä
            function saveProfileChanges() {
                const name = document.getElementById('editName').value;
                const email = document.getElementById('editEmail').value;
                const phone = document.getElementById('editPhone').value;
                const location = document.getElementById('editLocation').value;
                const examDateInput = document.getElementById('editExamDate').value;
                const examLocation = document.getElementById('editExamLocation').value;
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿßŸÑŸàÿßÿ¨Ÿáÿ©
                document.getElementById('userName').textContent = name;
                document.getElementById('profileName').textContent = name;
                document.getElementById('profileEmail').textContent = email;
                document.getElementById('profilePhone').textContent = phone;
                document.getElementById('profileLocation').textContent = location;
                document.getElementById('profileExamLocation').textContent = examLocation;
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
                if (examDateInput) {
                    examDate = new Date(examDateInput);
                    localStorage.setItem('examDate', examDate.toISOString());
                    updateExamCountdown();
                }
                
                showToast('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                editModal.style.display = 'none';
            }

            // ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ŸÑÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ
            function formatDateForInput(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }

            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
            async function checkLoginStatus() {
                try {
                    const { data, error } = await supabase.auth.getSession();
                    if (error) throw error;
                    
                    if (data.session) {
                        currentUser = data.session.user;
                        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
                        const hasAccess = await checkUserAccess();
                        
                        if (hasAccess) {
                            showPage('menu');
                            updateUIForLoggedInUser();
                        } else {
                            showPage('waiting');
                        }
                        return;
                    }
                    
                    // ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸáŸÜÿßŸÉ ÿ¨ŸÑÿ≥ÿ©ÿå ÿπÿ±ÿ∂ ÿµŸÅÿ≠ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ
                    showPage('login');
                } catch (error) {
                    console.error('Error checking auth status:', error);
                    showPage('login');
                }
            }

            // Ÿàÿ∏ÿßÿ¶ŸÅ ÿ™ÿ®ÿØŸäŸÑ ÿ±ÿ§Ÿäÿ© ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
            function togglePasswordVisibility(inputId, toggleButton) {
                const input = document.getElementById(inputId);
                if (input.type === 'password') {
                    input.type = 'text';
                    toggleButton.innerHTML = '<i class="fas fa-eye-slash"></i>';
                } else {
                    input.type = 'password';
                    toggleButton.innerHTML = '<i class="fas fa-eye"></i>';
                }
            }

            // Ÿàÿ∏ŸäŸÅÿ© ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÑÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ
            function openWhatsAppActivation() {
                const phoneNumber = '+212649661976';
                const message = 'ŸÖÿ±ÿ≠ÿ®ÿßÿå ÿ£ŸàÿØ ÿ™ŸÅÿπŸäŸÑ ÿßÿ¥ÿ™ÿ±ÿßŸÉŸä ŸÅŸä ÿ™ÿ∑ÿ®ŸäŸÇ B2 Deutsch Training Ÿàÿ•ŸÉŸÖÿßŸÑ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ';
                const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            }

            // Ÿàÿ∏ŸäŸÅÿ© ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÑŸÑÿØÿπŸÖ
            function openWhatsApp() {
                const phoneNumber = '+212649661976';
                const message = 'ÿ£ÿ±ÿ∫ÿ® ŸÅŸä ŸÖÿπÿ±ŸÅÿ© ÿ≠ÿßŸÑÿ© ÿ∑ŸÑÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ∞Ÿä ÿ™ŸÇÿØŸëŸÖÿ™Ÿè ÿ®Ÿá(ùí∂ùí∑ùíπ‚ÑØ)';
                const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            }

            // ÿ•ÿπÿØÿßÿØ ŸÖÿ≥ÿ™ŸÖÿπŸä ÿßŸÑÿ£ÿ≠ÿØÿßÿ´
            function setupEventListeners() {
                // ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸàÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ
                loginButton.addEventListener('click', handleLogin);
                signupButton.addEventListener('click', () => showPage('signup'));
                createAccountButton.addEventListener('click', handleSignUp);
                guestButton.addEventListener('click', handleGuestLogin);
                
                // ÿ™ÿ®ÿØŸäŸÑ ÿ±ÿ§Ÿäÿ© ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
                passwordToggle.addEventListener('click', () => togglePasswordVisibility('passwordInput', passwordToggle));
                signupConfirmPasswordToggle.addEventListener('click', () => togglePasswordVisibility('signupConfirmPassword', signupConfirmPasswordToggle));
                
                // ÿßŸÑÿ™ŸÜŸÇŸÑ ÿ®ŸäŸÜ ÿßŸÑÿµŸÅÿ≠ÿßÿ™
                backToLogin.addEventListener('click', handleSignOut);
                backToLoginFromSignup.addEventListener('click', () => showPage('login'));
                backFromKurs.addEventListener('click', () => showPage('menu'));
                backFromLesen.addEventListener('click', () => showPage('kurs'));
                backFromHoeren.addEventListener('click', () => showPage('kurs'));
                backFromSchreiben.addEventListener('click', () => showPage('kurs'));
                backFromMundlich.addEventListener('click', () => showPage('kurs'));
                backFromPdfs.addEventListener('click', () => showPage('kurs'));
                backFromExams.addEventListener('click', () => showPage('menu'));
                backFromProfile.addEventListener('click', () => showPage('menu'));
                
                // ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
                kursCard.addEventListener('click', () => showPage('kurs'));
                examsCard.addEventListener('click', () => showPage('exams'));
                
                // ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÅÿ±ÿπŸäÿ© ŸÑŸÄ KURS
                lesenCard.addEventListener('click', () => showPage('lesen'));
                hoerenCard.addEventListener('click', () => showPage('hoeren'));
                schreibenCard.addEventListener('click', () => showPage('schreiben'));
                mundlichCard.addEventListener('click', () => showPage('mundlich'));
                pdfsCard.addEventListener('click', () => showPage('pdfs'));
                
                // ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÅÿ±ÿπŸäÿ© ŸÑŸÄ M√ºndlich
                teil1Card.addEventListener('click', () => {
                    window.location.href = 'KURS/MUNDLICH/teil1.pdf';
                });
                teil2Card.addEventListener('click', () => {
                    window.location.href = 'KURS/MUNDLICH/teil2.pdf';
                });
                teil3Card.addEventListener('click', () => {
                    window.location.href = 'KURS/MUNDLICH/teil3.pdf';
                });
                
                // ÿπŸÜÿßÿµÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ
                themeToggle.addEventListener('click', () => {
                    document.body.classList.toggle('dark-mode');
                    themeToggle.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
                    localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
                });
                
                supportBtn.addEventListener('click', () => {
                    supportModal.style.display = 'flex';
                });
                
                profileBtn.addEventListener('click', () => {
                    showPage('profile');
                });
                
                // ÿ≤ÿ± ÿßŸÑÿ™ÿßÿ¨
                premiumBadge.addEventListener('click', () => {
                    showToast('ÿ£ŸÜÿ™ ŸÖÿ¥ÿ™ÿ±ŸÉ! ÿ¥ŸÉÿ±ÿßŸã ÿπŸÑŸâ ÿØÿπŸÖŸÉ üíé', 'info');
                });
                
                // ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©
                subscriptionActivation.addEventListener('click', () => {
                    phoneModal.style.display = 'flex';
                });
                
                whatsappActivationBtn.addEventListener('click', openWhatsAppActivation);
                
                closePhoneModal.addEventListener('click', () => {
                    phoneModal.style.display = 'none';
                });
                
                closeSupportModal.addEventListener('click', () => {
                    supportModal.style.display = 'none';
                });
                
                // ÿ≤ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®
                whatsappButton.addEventListener('click', openWhatsApp);
                
                // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿ®ÿßŸÑŸÜŸÇÿ± ÿÆÿßÿ±ÿ¨Ÿáÿß
                phoneModal.addEventListener('click', (e) => {
                    if (e.target === phoneModal) {
                        phoneModal.style.display = 'none';
                    }
                });
                
                supportModal.addEventListener('click', (e) => {
                    if (e.target === supportModal) {
                        supportModal.style.display = 'none';
                    }
                });
                
                editModal.addEventListener('click', (e) => {
                    if (e.target === editModal) {
                        editModal.style.display = 'none';
                    }
                });
                
                // ŸÖÿ≠ÿØÿØ ÿßŸÑŸÑÿ∫ÿ©
                langBtn.addEventListener('click', () => {
                    langDropdown.classList.toggle('show');
                });
                
                document.querySelectorAll('.lang-option').forEach(option => {
                    option.addEventListener('click', () => {
                        const lang = option.getAttribute('data-lang');
                        changeLanguage(lang);
                        langDropdown.classList.remove('show');
                    });
                });
                
                // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÇŸàÿßÿ¶ŸÖ ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ© ÿ®ÿßŸÑŸÜŸÇÿ± ÿÆÿßÿ±ÿ¨Ÿáÿß
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.language-selector')) {
                        langDropdown.classList.remove('show');
                    }
                });
                
                // ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©
                document.getElementById('imageUpload').addEventListener('change', handleImageUpload);
                
                // ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä
                editProfileBtn.addEventListener('click', openEditProfile);
                saveProfile.addEventListener('click', saveProfileChanges);
                changePasswordBtn.addEventListener('click', changeUserPassword);
                changePassword.addEventListener('click', changeUserPassword);
                cancelEdit.addEventListener('click', () => {
                    editModal.style.display = 'none';
                });
                
                // ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨
                logoutBtn.addEventListener('click', handleSignOut);
                signOutWaiting.addEventListener('click', handleSignOut);

                // ÿ•ÿØÿÆÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±
                passwordInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleLogin();
                    }
                });
                
                signupPassword.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSignUp();
                    }
                });
                
                signupConfirmPassword.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSignUp();
                    }
                });
            }

            // ÿ®ÿØÿ° ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
            async function init() {
                // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
                const savedDarkMode = localStorage.getItem('darkMode') === 'true';
                if (savedDarkMode) {
                    document.body.classList.add('dark-mode');
                    themeToggle.textContent = '‚òÄÔ∏è';
                }
                
                const savedLanguage = localStorage.getItem('language') || 'ar';
                changeLanguage(savedLanguage);
                
                // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
                loadSavedAvatar();
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ
                await checkLoginStatus();
                
                setupEventListeners();
                updateCountdown();
                updateExamCountdown();
                setInterval(updateCountdown, 1000);
                setInterval(updateExamCountdown, 1000);
            }

            init();
        });
    </script>
</body>
</html>