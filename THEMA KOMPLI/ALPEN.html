<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Deutsch B2 Pr√ºfung - Komplett</title>
  <style>
    /* ===== GLOBAL STYLES ===== */
    :root {
      --primary-color: #1e3a5f;
      --secondary-color: #2c5282;
      --accent-color: #4da6ff;
      --light-color: #ebf8ff;
      --text-color: #2d3748;
      --white: #ffffff;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: var(--white);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    button {
      cursor: pointer;
    }
    
    /* ===== START PAGE STYLES ===== */
    .start-container {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px;
      min-height: 100vh;
    }
    
    .start-content {
      max-width: 600px;
      width: 100%;
      background-color: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 40px;
      box-shadow: var(--shadow);
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .logo {
      margin-bottom: 20px;
    }
    
    .logo-icon {
      font-size: 48px;
      margin-bottom: 10px;
    }
    
    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      font-weight: 700;
    }
    
    .subtitle {
      font-size: 18px;
      margin-bottom: 30px;
      opacity: 0.9;
    }
    
    .card {
      background-color: var(--white);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      color: var(--text-color);
    }
    
    .card h2 {
      font-size: 20px;
      margin-bottom: 15px;
      color: var(--primary-color);
    }
    
    .card p {
      margin-bottom: 20px;
      line-height: 1.5;
    }
    
    select {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      border-radius: 8px;
      border: 2px solid var(--accent-color);
      outline: none;
      background-color: var(--white);
      color: var(--text-color);
      cursor: pointer;
      transition: var(--transition);
    }
    
    select:focus {
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3);
    }
    
    .timer-container {
      margin: 25px 0;
    }
    
    .timer-label {
      font-size: 16px;
      margin-bottom: 10px;
    }
    
    .timer {
      font-size: 48px;
      font-weight: 700;
      color: var(--accent-color);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    .progress-bar {
      height: 8px;
      width: 100%;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    .progress {
      height: 100%;
      width: 100%;
      background-color: var(--accent-color);
      border-radius: 4px;
      transform: scaleX(1);
      transform-origin: left;
      transition: transform 1s linear;
    }
    
    .info-text {
      font-size: 14px;
      margin-top: 20px;
      opacity: 0.8;
    }
    
    .button-container {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .btn {
      flex: 1;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      background-color: var(--accent-color);
      color: white;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }
    
    .btn:hover {
      background-color: #3399ff;
    }
    
    /* ===== EXAM PAGE STYLES ===== */
    .exam-body {
      background: #f5f5f5;
      color: #333;
      line-height: 1.45;
      -webkit-font-smoothing: antialiased;
    }
    
    /* Header Styles */
    header.topbar {
      background: #1e3a5f;
      color: #fff;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      min-height: 80px;
    }

    .brand {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .brand .logo {
      width: 80px;
      height: 40px;
      background: #e74c3c;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: white;
      font-size: 18px;
    }

    .meta .main-title {
      font-weight: 800;
      font-size: 18px;
    }

    .meta .sub-title {
      font-size: 13px;
      opacity: 0.9;
    }

    .timer {
      font-weight: 700;
      font-size: 18px;
      color: #fff;
      margin: 0 20px;
    }

    .buttons-grid {
      display: grid;
      grid-template-columns: repeat(2, auto);
      gap: 10px 20px;
    }

    .exam-btn {
      padding: 12px 20px;
      border-radius: 6px;
      border: none;
      background: #4da6ff;
      color: white;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
      min-width: 150px;
      text-align: center;
    }

    .exam-btn:hover {
      background: #336fbf;
    }
    
    .exam-btn.save {
      background: #4da6ff;
      color: #000;
    }
    
    .exam-btn.save:hover {
      background: #3399ff;
    }
    
    .exam-btn.submit {
      background: #4da6ff;
    }
    
    .exam-btn.submit:hover {
      background: #3399ff;
    }
    
    .exam-btn.result {
      background: #4da6ff;
    }
    
    .exam-btn.result:hover {
      background: #3399ff;
    }
    
    .exam-btn.next {
      background: #4da6ff;
      color: #fff;
    }
    
    .exam-btn.next:hover {
      background: #3399ff;
    }
    
    .exam-btn.reset {
      background: #4da6ff;
    }
    
    .exam-btn.reset:hover {
      background: #3399ff;
    }
    
    .exam-btn.reset-section {
      background: #d35400;
      font-size: 12px;
      padding: 6px 10px;
      min-width: auto;
    }
    
    .exam-btn.reset-section:hover {
      background: #e67e22;
    }
    
    .exam-btn.no-match {
      background: #95a5a6;
      font-size: 12px;
      padding: 6px 10px;
      min-width: auto;
      margin-top: 5px;
    }
    
    .exam-btn.no-match:hover {
      background: #7f8c8d;
    }
    
    .exam-btn.no-match.selected {
      background: #e74c3c;
    }
    
    /* Top Tiles */
    .top-tiles {
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 8px 12px;
      background: #1e3a5f;
      border-bottom: 1px solid #0f223a;
    }
    
    .tile {
      flex: 1;
      max-width: 180px;
      text-align: center;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #3b4a63;
      color: #fff;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 60px;
    }
    
    .tile:hover {
      background: #4a5b78;
    }
    
    .tile.active {
      background: #ffffff;
      color: #000;
      border-color: #bbb;
    }
    
    .tile.done {
      background: #2ecc71;
      color: #fff;
      border-color: #27ae60;
    }
    
    .tile.done::after {
      content: " ‚úÖ";
      margin-left: 5px;
    }
    
    .tile .points {
      background: rgba(255,255,255,0.2);
      padding: 4px 8px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 11px;
      margin-top: 4px;
    }
    
    .tile.active .points {
      background: #e9eefc;
      color: #2c3e50;
    }
    
    /* Container Styles */
    .container {
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 16px;
      padding: 16px;
      max-width: 1200px;
      margin: 12px auto;
    }
    
    .container-full {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      padding: 16px;
      max-width: 1200px;
      margin: 12px auto;
    }
    
    .container-split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      padding: 16px;
      max-width: 1200px;
      margin: 12px auto;
    }
    
    .left-panel {
      background: white;
      border-radius: 8px;
      padding: 18px;
      box-shadow: 0 1px 6px rgba(0,0,0,0.06);
      max-height: 76vh;
      overflow: auto;
    }
    
    .left-panel .passage {
      font-size: 14px;
      color: #2c3e50;
      line-height: 1.8;
    }
    
    .left-panel h2 {
      font-size: 16px;
      margin-bottom: 10px;
    }
    
    .right-panel {
      background: white;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 1px 6px rgba(0,0,0,0.06);
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 76vh;
      overflow: auto;
    }
    
    .main-panel {
      background: white;
      border-radius: 8px;
      padding: 25px;
      box-shadow: 0 1px 6px rgba(0,0,0,0.06);
      max-height: 76vh;
      overflow: auto;
    }
    
    .panel-title {
      font-size: 18px;
      margin-bottom: 15px;
      color: #1e3a5f;
      font-weight: 700;
    }
    
    /* Question Styles */
    .question-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }
    
    .question-body {
      margin-top: 8px;
    }
    
    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .option {
      background: #fbfdff;
      border: 1px solid #e1e8f6;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .option:hover {
      background: #f0f6ff;
    }
    
    .option.selected {
      background: #e8fbe9;
      border-color: #2ecc71;
    }
    
    .option .radio {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid #cfdff6;
      background: #fff;
      display: inline-block;
      flex-shrink: 0;
    }
    
    .option.selected .radio {
      background: #3498db;
      border-color: #3498db;
      box-shadow: inset 0 -3px 0 rgba(0,0,0,0.05);
    }
    
    .text-container {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #e1e8f6;
      border-radius: 8px;
      background: #fbfdff;
      position: relative;
      min-height: 120px;
    }
    
    .text-container:hover {
      background: #f0f6ff;
    }
    
    .text-title {
      font-weight: 700;
      margin-bottom: 8px;
      color: #2c3e50;
    }
    
    .text-content {
      font-size: 14px;
      color: #2c3e50;
      line-height: 1.6;
    }
    
    .title-slot {
      min-height: 40px;
      margin-top: 10px;
      padding: 8px;
      border: 2px dashed #c8d9f6;
      border-radius: 6px;
      background: #f8fbff;
    }
    
    .title-slot.has-title {
      background: #e8fbe9;
      border-color: #2ecc71;
    }
    
    .title-slot.has-x {
      background: #f8d7da;
      border-color: #e74c3c;
      color: #c0392b;
      font-weight: bold;
    }
    
    .headings-bank {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 0;
    }
    
    .heading-item {
      padding: 10px;
      border: 1px solid #dbe7fb;
      border-radius: 8px;
      background: #f8fbff;
      cursor: grab;
    }
    
    .heading-item:hover {
      background: #e9f0ff;
    }
    
    .heading-item.used {
      opacity: 0.5;
      cursor: not-allowed;
      background: #f8d7da;
      border-color: #f5c6cb;
    }
    
    .result-correct {
      color: #27ae60;
      font-weight: bold;
    }
    
    .result-incorrect {
      color: #c0392b;
      font-weight: bold;
    }
    
    .result-item {
      margin: 10px 0;
      padding: 10px;
      border-radius: 6px;
      background: #f8f9fa;
    }
    
    .instructions {
      color: #7f8c8d;
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 15px;
    }
    
    .question-text {
      font-weight: 600;
      margin-bottom: 15px;
      font-size: 15px;
      color: #2c3e50;
    }
    
    .all-questions {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .question-block {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #e1e8f6;
      border-radius: 8px;
      background: #fbfdff;
    }
    
    .texts-list, .situations-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .text-item, .situation-item {
      padding: 15px;
      border: 1px solid #e1e8f6;
      border-radius: 8px;
      background: #fbfdff;
    }
    
    .text-letter {
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 8px;
    }
    
    .situation-number {
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 8px;
    }
    
    .fill-blank-container {
      margin: 20px 0;
    }
    
    .blank-word {
      display: inline-block;
      min-width: 120px;
      padding: 4px 8px;
      margin: 0 6px;
      background: #fff;
      cursor: pointer;
      position: relative;
      border: 1px solid #dbe7fb;
      border-radius: 4px;
    }
    
    .blank-word.has-answer {
      background: #e8fbe9;
      border-color: #2ecc71;
    }
    
    .options-popup {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      border: 1px solid #dbe7fb;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 100;
      min-width: 150px;
    }
    
    .option-item {
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid #f0f4fb;
    }
    
    .option-item:hover {
      background: #f0f6ff;
    }
    
    .option-item:last-child {
      border-bottom: none;
    }
    
    .horizontal-options {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .option-row {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px;
      border: 1px solid #e1e8f6;
      border-radius: 8px;
      background: #fbfdff;
    }
    
    .option-number {
      font-weight: bold;
      color: #2c3e50;
      min-width: 30px;
    }
    
    .option-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .option-btn {
      padding: 8px 16px;
      border: 1px solid #dbe7fb;
      border-radius: 6px;
      background: #f8fbff;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .option-btn:hover {
      background: #e9f0ff;
    }
    
    .option-btn.selected {
      background: #3498db;
      color: white;
      border-color: #3498db;
    }
    
    .word-bank-vertical {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .bank-word-vertical {
      padding: 10px;
      border: 1px solid #dbe7fb;
      border-radius: 6px;
      background: #f8fbff;
      text-align: center;
      cursor: grab;
    }
    
    .bank-word-vertical.used {
      opacity: 0.5;
      cursor: not-allowed;
      background: #f8d7da;
      border-color: #f5c6cb;
    }
    
    .blank-slot {
      display: inline-block;
      min-width: 100px;
      padding: 4px 8px;
      margin: 0 6px;
      background: #fff;
      min-height: 30px;
      vertical-align: middle;
      border: 1px solid #dbe7fb;
      border-radius: 4px;
      cursor: pointer;
    }
    
    .blank-slot.has-answer {
      background: #e8fbe9;
      border-color: #2ecc71;
    }
    
    .footer-buttons {
      display: flex;
      gap: 10px;
    }
    
    .situation-item.used {
      opacity: 0.7;
      cursor: not-allowed;
      background: #f8d7da;
      border-color: #f5c6cb;
      color: #333;
    }
    
    /* Listening Section Styles */
    .listening-task {
      margin-bottom: 10px;
    }
    
    .true-false-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 14px;
    }
    
    .true-false-table th {
      background: #3498db;
      color: white;
      padding: 15px;
      text-align: left;
      font-weight: 600;
      font-size: 14px;
    }
    
    .true-false-table td {
      padding: 15px;
      border-bottom: 1px solid #e1e8f6;
      vertical-align: top;
    }
    
    .true-false-table tr:nth-child(even) {
      background: #f8f9fa;
    }
    
    .true-false-table tr:hover {
      background: #e3f2fd;
    }
    
    .answer-options {
      display: flex;
      gap: 25px;
    }
    
    .answer-option {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 10px 15px;
      border-radius: 4px;
      transition: background 0.2s;
      font-weight: 500;
    }
    
    .answer-option:hover {
      background: #e3f2fd;
    }
    
    .answer-option input {
      margin: 0;
      transform: scale(1.2);
    }

    .correct-answer {
      background: #d4edda !important;
      border-left: 4px solid #28a745;
    }
    
    .incorrect-answer {
      background: #f8d7da !important;
      border-left: 4px solid #dc3545;
    }
    
    /* Writing Section Styles */
    .writing-task {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #e1e8f6;
      border-radius: 8px;
      background: #fbfdff;
    }
    
    .writing-prompt {
      font-size: 14px;
      color: #2c3e50;
      line-height: 1.6;
      margin-bottom: 15px;
    }
    
    .writing-requirements {
      background: #f8f9fa;
      padding: 12px;
      border-radius: 6px;
      border-left: 4px solid #3498db;
      margin-bottom: 15px;
    }
    
    .writing-requirements h4 {
      margin: 0 0 8px 0;
      color: #2c3e50;
    }
    
    .writing-requirements ul {
      margin: 0;
      padding-left: 20px;
    }
    
    .writing-requirements li {
      margin-bottom: 5px;
      color: #2c3e50;
    }
    
    .writing-area {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .writing-textarea {
      flex: 1;
      min-height: 500px;
      padding: 15px;
      border: 2px solid #e1e8f6;
      border-radius: 8px;
      font-size: 14px;
      line-height: 1.6;
      resize: vertical;
      font-family: Arial, sans-serif;
    }
    
    .writing-textarea:focus {
      outline: none;
      border-color: #3498db;
    }
    
    .word-counter {
      margin-top: 10px;
      text-align: right;
      font-size: 13px;
      color: #7f8c8d;
      padding: 8px 0;
    }
    
    .word-counter .count {
      font-weight: bold;
      color: #2c3e50;
    }
    
    /* Results Page Styles */
    .results-body {
      background: #f7fafc;
      color: #0f1724;
      line-height: 1.6;
    }
    
    .results-header {
      background: #1e3a5f;
      color: #fff;
      padding: 18px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .results-logo {
      background: #fff;
      color: #1e3a5f;
      padding: 8px 12px;
      border-radius: 6px;
      font-weight: 800;
    }
    
    .results-title {
      font-size: 18px;
      font-weight: 700;
    }
    
    .results-container {
      max-width: 1100px;
      margin: 22px auto;
      padding: 20px;
    }
    
    .results-tiles {
      display: flex;
      gap: 12px;
      margin: 18px 0;
    }
    
    .results-tile {
      flex: 1;
      background: #fff;
      border-radius: 10px;
      padding: 16px;
      box-shadow: 0 6px 18px rgba(2, 6, 23, 0.06);
      border-left: 6px solid #1e3a5f;
    }
    
    .results-tile h3 {
      margin: 0;
      font-size: 16px;
      color: #1e3a5f;
    }
    
    .results-tile .score {
      font-size: 20px;
      font-weight: 800;
      margin-top: 8px;
    }
    
    .section-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
    }
    
    .section-table th,
    .section-table td {
      padding: 8px;
      border-bottom: 1px solid #e6eef8;
      text-align: left;
      font-size: 14px;
    }
    
    .summary {
      background: #fff;
      padding: 16px;
      border-radius: 10px;
      margin-top: 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .summary .left {
      font-weight: 700;
    }
    
    .summary .right {
      text-align: right;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-top: 18px;
    }
    
    .results-btn {
      background: #4da6ff;
      border: none;
      color: #fff;
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .results-btn:hover {
      background: #3a8ce0;
    }
    
    .button-like {
      text-decoration: none;
    }
    
    .small-muted {
      color: #6b7280;
      font-size: 13px;
    }
    
    input[type="number"] {
      width: 90px;
      padding: 8px;
      border: 1px solid #d7e6fb;
      border-radius: 6px;
    }
    
    .note {
      font-size: 13px;
      color: #6b7280;
      margin-top: 8px;
    }
    
    /* Footer */
    footer.controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: white;
      border-top: 1px solid #e1e8f6;
      margin-top: 20px;
    }
    
    .status {
      font-size: 14px;
      color: #7f8c8d;
    }
    
    .ghost {
      background: transparent;
      border: 2px solid #2c3e50;
      color: #2c3e50;
    }
    
    .ghost:hover {
      background: #2c3e50;
      color: white;
    }

    /* Responsive Styles */
    @media (max-width: 980px) {
      .container {
        grid-template-columns: 1fr;
        padding: 12px;
      }
      
      .container-split {
        grid-template-columns: 1fr;
      }
      
      .right-panel {
        order: 2;
      }
      
      .top-tiles {
        padding-left: 8px;
        padding-right: 8px;
      }
      
      header.topbar {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }
      
      .buttons-grid {
        grid-template-columns: 1fr;
      }
      
      .answer-options {
        flex-direction: column;
        gap: 10px;
      }
      
      footer.controls {
        flex-direction: column;
        gap: 15px;
      }
      
      .results-tiles {
        flex-direction: column;
      }
      
      .summary {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .controls {
        flex-direction: column;
      }
    }
    
    @media (max-width: 600px) {
      .start-content {
        padding: 25px 20px;
      }
      
      h1 {
        font-size: 28px;
      }
      
      .card {
        padding: 20px 15px;
      }
    }

    /* === ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿÆÿßÿµÿ© ŸÑŸÑŸáŸàÿßÿ™ŸÅ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© ÿ¨ÿØÿß === */
    @media (max-width: 480px) {
      /* 1. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ≠ÿßŸàŸäÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© */
      .container, .container-split, .container-full {
        grid-template-columns: 1fr !important;
        padding: 8px !important;
        gap: 10px !important;
      }
      
      /* 2. ÿ¨ÿπŸÑ ÿßŸÑŸÑŸàÿ≠ÿßÿ™ (panels) ÿ™ÿ£ÿÆÿ∞ ÿπÿ±ÿ∂ ŸÉÿßŸÖŸÑ */
      .left-panel, .right-panel, .main-panel {
        max-height: none !important;
        height: auto !important;
        overflow: visible !important;
        margin-bottom: 10px;
      }
      
      /* 3. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸáŸäÿØÿ± */
      .topbar {
        flex-direction: column !important;
        align-items: stretch !important;
        padding: 10px !important;
      }
      
      .brand {
        justify-content: center;
        margin-bottom: 10px;
      }
      
      /* 4. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ŸÅŸä ÿßŸÑŸáŸäÿØÿ± */
      .buttons-grid {
        grid-template-columns: 1fr !important;
        width: 100%;
      }
      
      .exam-btn {
        width: 100% !important;
        margin: 2px 0 !important;
        font-size: 14px !important;
        padding: 12px 8px !important;
      }
      
      /* 5. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ™ÿßŸäŸÑÿßÿ™ */
      .top-tiles {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .tile {
        flex: 0 0 calc(33% - 5px) !important;
        max-width: calc(33% - 5px) !important;
        margin: 2px;
        font-size: 11px !important;
        padding: 8px 4px !important;
      }
      
      /* 6. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÜÿµŸàÿµ */
      .passage, .text-content, .question-text {
        font-size: 15px !important;
        line-height: 1.5 !important;
      }
      
      /* 7. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ */
      .option {
        padding: 12px 10px !important;
        margin: 4px 0 !important;
      }
      
      /* 8. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¨ÿØÿßŸàŸÑ True/False */
      .true-false-table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }
      
      /* 9. ÿ™ÿ≠ÿ≥ŸäŸÜ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÉÿ™ÿßÿ®ÿ© */
      .writing-textarea {
        min-height: 300px !important;
        font-size: 16px !important;
      }
      
      /* 10. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÅŸàÿ™ÿ± */
      footer.controls {
        flex-direction: column !important;
        gap: 10px !important;
      }
      
      .footer-buttons {
        width: 100%;
        display: flex;
        gap: 5px;
      }
      
      .footer-buttons .exam-btn {
        flex: 1;
      }
      
      /* 11. ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ */
      .results-tiles {
        flex-direction: column !important;
      }
      
      .results-tile {
        margin-bottom: 10px;
      }
    }

    /* === ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ŸÑŸÑŸáŸàÿßÿ™ŸÅ ÿßŸÑŸÖÿ™Ÿàÿ≥ÿ∑ÿ© === */
    @media (min-width: 481px) and (max-width: 768px) {
      .container, .container-split {
        grid-template-columns: 1fr !important;
      }
      
      .tile {
        max-width: 180px !important;
      }
    }
  </style>
</head>
<body id="body">
  <!-- Start Page -->
  <div id="start-page" class="start-container">
    <div class="start-content">
      <div class="logo">
        <div class="logo-icon">üìù</div>
        <h1>Deutsch B2 Pr√ºfung</h1>
        <div class="subtitle">Bereiten Sie sich auf Ihre Pr√ºfung vor</div>
      </div>
      <div class="card">
        <h2>Pr√ºfungsbereich ausw√§hlen</h2>
        <p>W√§hlen Sie bitte den Bereich aus, den Sie √ºben m√∂chten. Die Pr√ºfung startet automatisch in <span id="time-display">30</span> Sekunden.</p>
        <select id="sectionSelect">
          <option value="lesen">Lesen</option>
          <option value="hoeren">H√∂ren</option>
          <option value="schreiben">Schreiben</option>
        </select>
        <div class="button-container">
          <button id="cancelBtn" class="btn">Abbrechen</button>
          <button id="startBtn" class="btn">Jetzt starten</button>
        </div>
      </div>
      <div class="timer-container">
        <div class="timer-label">Die Pr√ºfung startet in:</div>
        <div class="timer" id="countdown">30</div>
        <div class="progress-bar">
          <div class="progress" id="progress"></div>
        </div>
      </div>
      <div class="info-text">Stellen Sie sicher, dass Sie in einer ruhigen Umgebung sind und gen√ºgend Zeit haben.</div>
    </div>
  </div>

  <!-- Lesen Page -->
  <div id="lesen-page" class="exam-page" style="display: none;">
    <header class="topbar" role="banner">
      <div class="brand">
        <div class="logo">test</div>
        <div class="meta">
          <div class="main-title">Deutsch - B2 (√úbung)</div>
          <div class="sub-title">Lesen ‚Äî Testbeispiel</div>
        </div>
      </div>

      <div id="timer-lesen" class="timer" aria-live="polite">Verbleibende Zeit: 90:00</div>

      <div class="buttons-grid">
        <button id="resetBtn-lesen" class="exam-btn reset">üîÑ Von neu beginnen</button>
        <button id="saveBtn-lesen" class="exam-btn save">üìã Speichern</button>
        <button id="resultBtn-lesen" class="exam-btn result">üìä Ergebnis</button>
        <button id="submitBtn-lesen" class="exam-btn submit">üèÅ Abgabe</button>
        <button class="exam-btn next" id="nextBtn-lesen">‚û°Ô∏è N√§chste Pr√ºfung</button>
      </div>
    </header>

    <div class="top-tiles" id="topTiles-lesen" role="navigation" aria-label="Sections overview"></div>

    <div class="container">
      <main class="left-panel" id="leftPanel-lesen">
        <div class="passage" id="passage-lesen">
          <h2 id="passageTitle-lesen">Aufgabe</h2>
          <div id="passageContent-lesen"></div>
        </div>
      </main>

      <aside class="right-panel" id="rightPanel-lesen" aria-labelledby="questionTitle-lesen">
        <div class="question-head">
          <div>
            <div id="sectionName-lesen" style="font-weight:800"></div>
            <div id="questionTitle-lesen" style="font-size:13px;color:#55607a">Frage</div>
          </div>
          <button id="resetSectionBtn-lesen" class="exam-btn reset-section" style="display:none;">Teil zur√ºcksetzen</button>
        </div>
        <div class="question-body" id="questionBody-lesen"></div>
        <div id="headingsBankContainer-lesen"></div>
      </aside>
    </div>

    <footer class="controls">
      <div class="footer-buttons">
        <button id="prevBtn-lesen" class="exam-btn ghost">Zur√ºck</button>
        <button id="nextBtn-lesen" class="exam-btn ghost">Weiter</button>
      </div>
      <div class="status"><span id="statusText-lesen">Nicht gespeichert</span></div>
    </footer>
  </div>

  <!-- H√∂ren Page -->
  <div id="hoeren-page" class="exam-page" style="display: none;">
    <header class="topbar" role="banner">
      <div class="brand">
        <div class="logo">test</div>
        <div class="meta">
          <div class="main-title">Deutsch - B2 (√úbung)</div>
          <div class="sub-title">H√∂rverstehen ‚Äî Testbeispiel</div>
        </div>
      </div>

      <div id="timer-hoeren" class="timer" aria-live="polite">Verbleibende Zeit: 17:00</div>

      <div class="buttons-grid">
        <button id="resetBtn-hoeren" class="exam-btn reset">üîÑ Von neu beginnen</button>
        <button id="saveBtn-hoeren" class="exam-btn save">üìã Speichern</button>
        <button id="resultBtn-hoeren" class="exam-btn result">üìä Ergebnis</button>
        <button id="submitBtn-hoeren" class="exam-btn submit">üèÅ Abgabe</button>
        <button class="exam-btn next" id="nextBtn-hoeren">‚û°Ô∏è N√§chste Pr√ºfung</button>
      </div>
    </header>

    <div class="top-tiles" id="topTiles-hoeren" role="navigation" aria-label="Sections overview"></div>

    <div class="container-full">
      <main class="main-panel" id="mainPanel-hoeren">
        <div id="contentContainer-hoeren"></div>
      </main>
    </div>

    <footer class="controls">
      <div class="footer-buttons">
        <button id="prevBtn-hoeren" class="exam-btn ghost">Zur√ºck</button>
        <button id="nextBtn-hoeren" class="exam-btn ghost">Weiter</button>
      </div>
      <div class="status"><span id="statusText-hoeren">Nicht gespeichert</span></div>
    </footer>
  </div>

  <!-- Schreiben Page -->
  <div id="schreiben-page" class="exam-page" style="display: none;">
    <header class="topbar" role="banner">
      <div class="brand">
        <div class="logo">test</div>
        <div class="meta">
          <div class="main-title">Deutsch - B2 (√úbung)</div>
          <div class="sub-title">Schreiben ‚Äî Testbeispiel</div>
        </div>
      </div>

      <div id="timer-schreiben" class="timer" aria-live="polite">Verbleibende Zeit: 30:00</div>

      <div class="buttons-grid">
        <button id="resetBtn-schreiben" class="exam-btn reset">üîÑ Von neu beginnen</button>
        <button id="saveBtn-schreiben" class="exam-btn save">üìã Speichern</button>
        <button id="resultBtn-schreiben" class="exam-btn result">üìä Ergebnis</button>
        <button id="submitBtn-schreiben" class="exam-btn submit">üèÅ Abgabe</button>
        <button class="exam-btn next" id="nextBtn-schreiben">‚û°Ô∏è N√§chste Pr√ºfung</button>
      </div>
    </header>

    <div class="top-tiles" id="topTiles-schreiben" role="navigation" aria-label="Sections overview"></div>

    <div class="container-split">
      <main class="left-panel" id="leftPanel-schreiben">
        <div class="passage" id="passage-schreiben">
          <h2 id="passageTitle-schreiben">Aufgabe</h2>
          <div id="passageContent-schreiben"></div>
        </div>
      </main>

      <aside class="right-panel" id="rightPanel-schreiben">
        <div id="writingContainer-schreiben"></div>
      </aside>
    </div>

    <footer class="controls">
      <div class="footer-buttons">
        <button id="prevBtn-schreiben" class="exam-btn ghost">Zur√ºck</button>
        <button id="nextBtn-schreiben" class="exam-btn ghost">Weiter</button>
      </div>
      <div class="status"><span id="statusText-schreiben">Nicht gespeichert</span></div>
    </footer>
  </div>

  <!-- Ergebnisse Page -->
  <div id="ergebnisse-page" class="results-page" style="display: none;">
    <header class="results-header">
      <div class="results-logo">test</div>
      <div class="results-title">Gesamtergebnis ‚Äî Deutsch B2</div>
    </header>

    <div class="results-container">
      <div class="results-tiles" id="topTiles-ergebnisse"></div>
      <div id="details-ergebnisse"></div>
      <div class="summary" id="finalSummary-ergebnisse"></div>
      <div class="controls">
        <a class="button-like" href="#" id="backBtn-ergebnisse">
          <button class="results-btn">üîÅ Zur√ºck zur Startseite</button>
        </a>
        <button id="calcBtn-ergebnisse" class="results-btn">‚úÖ Ergebnisse anzeigen</button>
      </div>
      <div class="note">Hinweis: Schreiben (45 Punkte) wird manuell eingegeben, falls nicht automatisch vorhanden.</div>
    </div>
  </div>

  <script>
    // ===== PAGE NAVIGATION =====
    function showPage(pageId) {
      // Hide all pages
      document.getElementById('start-page').style.display = 'none';
      document.getElementById('lesen-page').style.display = 'none';
      document.getElementById('hoeren-page').style.display = 'none';
      document.getElementById('schreiben-page').style.display = 'none';
      document.getElementById('ergebnisse-page').style.display = 'none';
      
      // Change body class based on page
      document.getElementById('body').className = '';
      if (pageId === 'ergebnisse-page') {
        document.getElementById('body').className = 'results-body';
      } else if (pageId !== 'start-page') {
        document.getElementById('body').className = 'exam-body';
      }
      
      // Show selected page
      document.getElementById(pageId).style.display = 'block';
      
      // Initialize the page if needed
      if (pageId === 'lesen-page' && typeof initLesenPage === 'function') {
        initLesenPage();
      } else if (pageId === 'hoeren-page' && typeof initHoerenPage === 'function') {
        initHoerenPage();
      } else if (pageId === 'schreiben-page' && typeof initSchreibenPage === 'function') {
        initSchreibenPage();
      } else if (pageId === 'ergebnisse-page' && typeof initErgebnissePage === 'function') {
        initErgebnissePage();
      }
    }

    // ===== START PAGE FUNCTIONALITY =====
    let initialCounter = 30;
    let counter = initialCounter;
    let countdownInterval;
    let countdownRunning = false;
    let examStarted = false;
    const timerEl = document.getElementById("countdown");
    const timeDisplayEl = document.getElementById("time-display");
    const progressEl = document.getElementById("progress");
    const selectEl = document.getElementById("sectionSelect");
    const startBtn = document.getElementById("startBtn");
    const cancelBtn = document.getElementById("cancelBtn");

    function startCountdown() {
      // prevent double-starts or starting after exam already began
      if (countdownRunning || examStarted) return;
      countdownRunning = true;
      // disable start button while counting
      try { startBtn.disabled = true; startBtn.setAttribute('aria-disabled','true'); } catch(e){}
      // reset counter & UI
      counter = initialCounter;
      timerEl.textContent = counter;
      timeDisplayEl.textContent = counter;
      progressEl.style.transform = "scaleX(0)";
      timerEl.style.color = "";

      countdownInterval = setInterval(() => {
        counter--;
        timerEl.textContent = counter;
        timeDisplayEl.textContent = counter;
        const progressValue = (initialCounter - counter) / initialCounter;
        progressEl.style.transform = `scaleX(${progressValue})`;
        if (counter <= 0) {
          clearInterval(countdownInterval);
          countdownInterval = null;
          countdownRunning = false;
          progressEl.style.transform = "scaleX(1)";
          // ensure exam starts only once
          if (!examStarted) {
            examStarted = true;
            startExam();
          }
          // safety: re-enable start button (page usually navigates away)
          try { startBtn.disabled = false; startBtn.removeAttribute('aria-disabled'); } catch(e){}
        }
      }, 1000);
    }

    function stopCountdown(reset = true) {
      if (countdownInterval) {
        clearInterval(countdownInterval);
        countdownInterval = null;
      }
      countdownRunning = false;
      try { startBtn.disabled = false; startBtn.removeAttribute('aria-disabled'); } catch(e){}
      progressEl.style.transform = "scaleX(0)";
      if (reset) {
        counter = initialCounter;
        timerEl.textContent = counter;
        timeDisplayEl.textContent = counter;
      } else {
        timerEl.textContent = "Gestoppt";
      }
    }

    function startExam() {
      // guard to ensure startExam is triggered once
      if (!examStarted) examStarted = true;
      const selectedSection = selectEl.value;
      if (selectedSection === 'lesen') {
        showPage('lesen-page');
      } else if (selectedSection === 'hoeren') {
        showPage('hoeren-page');
      } else if (selectedSection === 'schreiben') {
        showPage('schreiben-page');
      }
    }

    // wire buttons: start will now start the countdown (not the exam directly)
    startBtn.addEventListener('click', startCountdown);

    cancelBtn.addEventListener('click', () => {
      stopCountdown(true);
      timerEl.textContent = "Abgebrochen";
      timerEl.style.color = "#e53e3e";
    });

    // ===== EXAM DATA =====
    const EXAM_DATA = {
      lesen: {
        id: "exam-lesen-001",
        durationSec: 90 * 60,
        sections: [
          { 
            id: "s1", 
            title: "Leseverstehen, Teil 1", 
            points: 25,
            passageTitle: "Aufgabe: Ziehen Sie die passenden √úberschriften auf die Texte.",
            passage: "",
            questions: [],
            texts: [
              {
                id: "text1",
                content: "F√ºr Raucher wird es an der Universit√§t in K√∂ln ab dem kommenden Wintersemester eng. Denn nach zahllosen Beschwerden sowohl vom Personal der Universit√§t als auch von Studierenden erweiterte nun die Universit√§tsverwaltung das bereits bestehende Rauchverbot. Bisher erstreckte es sich nur auf H√∂rs√§le und Seminarr√§ume. Doch kaum waren die Veranstaltungen zu Ende, fand man sich in den Fluren, Foyers und Cafeterias eingeh√ºllt in dicke Schwaden von Zigarettenqualm wieder. Dieser Zustand war vielen Nichtrauchern schon seit L√§ngerem ein Dorn im Auge. Unterst√ºtzt von mehreren Untersuchungsberichten √ºber die Gefahren des passiven Rauchens und angespornt von den guten Erfahrungen, die man an ausl√§ndischen Universit√§ten - vor allem in den USA - mit Rauchverboten gemacht hat, wollten die Nichtraucher diesen Zustand nicht l√§nger hinnehmen. Das Rauchverbot gilt nun in allen Geb√§uden einschlie√ülich der Toiletten. Die Professoren und Studierenden, die das Qualmen auch k√ºnftig nicht lassen k√∂nnen, werden in ihren Rauchpausen im kommenden Winter irgendwo auf den Campus ganz sicher kalte F√º√üe bekommen.",
                correctAnswer: "f"
              },
              {
                id: "text2", 
                content: "Urlaub in den Bergen ist sehr gesund. Das fanden jetzt Wissenschaftler am Anatomischen Zentrum der Universit√§t K√∂ln heraus. Besonders die H√∂henlagen um die 2.000 Meter wirken sich messbar positiv auf die Gesundheit aus. Die 'd√ºnnere Luft' in Hochgebirgslagen bewirke eine Senkung des Blutdrucks und des Pulsschlages, eine verbesserte Leistungsf√§higkeit des Herzens und damit eine St√§rkung der Funktion von Herz, Lunge und Kreislauf. Wichtig sei es aber, in den ersten Tagen auf eine ausreichende Akklimatisierung zu achten. Denn etwa eine Woche ben√∂tige der K√∂rper, um sich an die neuen klimatischen Bedingungen im Gebirge anzupassen. W√§hrend dieser Zeit solle man, so die Wissenschaftler, gr√∂√üere k√∂rperliche Anstrengungen und Extremsport vermeiden. Ab der zweiten Urlaubswoche habe man dann seine volle k√∂rperliche Leistungsf√§higkeit erreicht.",
                correctAnswer: "d"
              },
              {
                id: "text3",
                content: "Schlechte Haut, √ºbler Atem, leere Brieftasche. Das ist eigentlich ziemlich 'uncool'. Und doch dauert es ziemlich lange, bis junge Raucher begriffen haben, dass Rauchen nicht h√§lt, was viele Jugendliche in ihrer Phantasie damit verbinden: Freiheit und Attraktivit√§t - der Glimmst√§ngel macht 'cool' und begehrenswert. Stress und Leistungsdruck verfliegen angeblich, sobald man nur an der Zigarette zieht. Doch das Gegenteil ist der Fall: Die zuerst genannten Negativfolgen stellen sich oft schneller ein als gedacht. H√§ufig ist es aber dann schon zu sp√§t, denn das Entw√∂hnen von der Sucht des Rauchens ist ein langwieriger und oft auch schmerzhafter Weg. Obwohl dies alles bekannt ist, finden es in Deutschland fast 50% aller Teenager zwischen 12 und 16 Jahren schick, Zigaretten zu konsumieren - ein eindeutig zu gro√üer Anteil, warnen die Gesundheitsbeh√∂rden. Besonders gro√ü ist der prozentuale Anteil der Raucher √ºbrigens unter den jungen M√§dchen. Als Raucherinnen f√ºhlen sie sich erwachsen und der Cliquendruck - nahezu alle Freunde und Freundinnen rauchen auch - erzeugt oft ein vermeintliches Notwendigkeitsgef√ºhl, auch zu rauchen.",
                correctAnswer: "b"
              },
              {
                id: "text4",
                content: "Sport im Hochgebirge? Da denkt man zuallererst an Wintersport. Ski fahren, rodeln, eislaufen. Doch auch im Sommer ist das Hochgebirge ein Ort, an dem man sich vielf√§ltig sportlich bet√§tigen kann: Wandern, Klettern oder Schwimmen in einem der zahlreichen kristallklaren Bergseen erfreuen sich gro√üer Beliebtheit bei Jung und Alt. In Deutschland ist Hochgebirgssport vor allem in den Alpenregionen im s√ºdlichen Bayern m√∂glich. Es muss jedoch nicht unbedingt gleich Deutschlands h√∂chster Berg - die Zugspitze - sein, die man als Ziel ansteuert. Auch rund um Oberstdorf, F√ºssen, Berchtesgaden oder rund um den Tegernsee bieten sich viele M√∂glichkeiten f√ºr sportliche Naturliebhaber wie f√ºr naturverbundene Sportler. F√ºr die zumeist st√§dtischen Urlauber, die hier vor allem Ruhe und Erholung vom Alltagsstress suchen, haben die deutschen Alpengebiete au√üerdem den Vorteil, dass man keine weiten Wege zur√ºcklegen muss, wenn einen das Heimweh nach der Stadt packt, nach Schwimmhallen, Fu√üballstadien oder Golfpl√§tzen. Denn f√ºr die Stadtsporter ist es von keinem Alpenort weiter als eine gute Stunde in die bayerische Landeshauptstadt M√ºnchen.",
                correctAnswer: "a"
              },
              {
                id: "text5",
                content: "Sportvereine spielen eine immer wichtigere soziale Rolle f√ºr junge Leute in Deutschland. Das haben neueste Untersuchungen an den Tag gebracht. Ging man fr√ºher in einen Sportverein, um Fu√üball zu spielen, zu reiten oder zu turnen, geben die Clubs heute vielen Jugendlichen ein zweites Zuhause. Hier treffen sich Freunde, hier k√ºmmern sich jemand um sie, hier haben sie eine Aufgabe. Zuhause f√ºhlen sie sich einsam und √ºberfl√ºssig. Die Eltern arbeiten und sind nicht da, die Kommunikation mit dem Fernseher oder dem Computer ist eine recht einseitige Angelegenheit. Jugendliche, die in Sportvereinen Mitglied sind, sind geselliger, werden - so zahlreiche Studien - weniger gewaltt√§tig, leben gesundheitsbewusster, rauchen deutlich weniger als ihre Altersgenossen, die nicht im Verein sind, konsumieren erheblich weniger Alkohol gar Drogen. Das Zugeh√∂rigkeitsgef√ºhl zum Verein und das Gef√ºhl, etwas zu leisten, tragen sehr strongly dazu bei, dass die jungen Leuten gegen die Verf√ºhrungen der Zigaretten- und Alkoholindustrie resistent werden.",
                correctAnswer: "e"
              }
            ],
            headings: [
              {id: "a", text: "Freizeitsport in den Alpen"},
              {id: "b", text: "M√§dchen geben mehr Geld f√ºr Zigaretten aus als Jungen"},
              {id: "c", text: "Hochgebirge als Skiparadies"},
              {id: "d", text: "H√∂henluft - gut f√ºrs Herz"},
              {id: "e", text: "Junge Sportler: weniger suchtanf√§llig"},
              {id: "f", text: "Mit der Zigarette an die frische Luft"},
              {id: "g", text: "Rauchverbot in Sportvereinen"},
              {id: "h", text: "Uni-Campus: rauchfreie Zone eingerichtet"},
              {id: "i", text: "Zigaretten gegen Alleinsein"},
              {id: "j", text: "Zum Leistungssport in die Berge"}
            ]
          },
          { 
            id:"s2", 
            title:"Leseverstehen, Teil 2", 
            points:25,
            passageTitle: "Wer parkt, muss zahlen - Parkuhren in Deutschland",
            passage: `Es geschah am 1. Januar 1954. In Duisburg, einer Gro√üstadt am Rhein zwischen K√∂ln und der niederl√§ndischen Grenze am Rande des Ruhrgebiets, gibt es f√ºr die Autofahrer, die in der Stra√üe "Am Buchenbaum" ihre Autos parken wollten, eine √úberraschung. 20 etwa 1,5 Meter hohe Metallstangen mit unrenf√∂rmigen Aufs√§tzen standen am Stra√üenrand mit der unmissverst√§ndlichen Aufschrift: "Einwurf 10 Pfennig f√ºr eine Stunde". Die ersten Parkuhren in Deutschland waren aufgestellt.

Nur Basel in der Schweiz und Stockholm in Schweden hatten vor Duisburg Parkuhren installiert, um Dauerparker aus den Stadtzentren zu vertreiben. Das eingenommene Geld wurde in Duisburg anfangs f√ºr gemeinn√ºtzige Zwecke ausgegeben: f√ºr Alte, Kranke Kriegsversehrte, f√ºr elternlose Kinder. Und die Stadtverwaltung war sich sicher, dass die Autofahrer Verst√§ndnis f√ºr die Parkuhren aufbringen w√ºrden, dienten sie doch einem guten Zweck.

Doch bei den Autofahren war man nicht so erfreut √ºber diese neuen Apparate. "Groschengrab" wurden sie dann auch bald √ºberall genannt: ein Apparat, in den man Groschen ‚Äì wie die 10-Pfennig-St√ºcke damals genannt wurden ‚Äì hineinwarf. Dieser schluckte zwar gnadenlos Zehner, gab aber zum Verdruss vieler trotzdem oft keine Parkzeit frei. Tat er dies, dann aber in der Regel nur f√ºr h√∂chstens 60 Minuten. Viele Autofahrer waren au√üerdem ver√§rgert, weil sie immer passendes Kleingeld dabei haben mussten. Die ersten Parkuhren konnten n√§mlich nicht wechseln.

Wer parkte, ohne zu zahlen, riskierte damals wie heute einen Strafbescheid, liebevoll "Kn√∂llchen" genannt. In allen anderen deutschen St√§dten erschienen nach und nach auch Parkuhren. Bald geh√∂rten sie zu den Innenst√§dten wie das Rad zum Auto. And das blieb so bis zum Ende der 1980er Jahre.

Dann geschah so etwas wie eine Parkuhren-Revolution. Die guten, alten Parkuhren, die ein im Vergleich zu heute immer noch billiges Parken erlaubten, weil sie nicht beliebig oft auf neue Betr√§ge umgestellt werden konnten, wurden mehr und mehr ersetzt durch die gerade neu entwickelten Parkscheinautomaten. Mit Solarenergie angetrieben, computergesteuert und beliebig programmierbar machten sie es nun m√∂glich, ohne technische Beschr√§nkungen die Preise und Zeiten f√ºr das Parken flexibel zu gestalten. Von Vorteil ist auch ihre Kundenfreundlichkeit: Die Zeiten, in denen nur M√ºnzen als Zahlungsmittel akzeptiert wurden, sind pass√©; jetzt schlucken sie auch problemlos Papier- und Plastikgeld ‚Äì und Wechselgeld wird ausgespuckt.

Das Parken wurde immer teurer. Und l√§ngst dienten die eingenommenen Betr√§ge nicht mehr gemeinn√ºtzigen Zwecken. Sie wurden vielmehr als Einnahmequelle entdeckt f√ºr die leeren Stadtkassen, die nach immer mehr Geld verlangten. Gut 2 Millionen Euro verdient zum Beispiel Duisburg in einem Jahr an den Parkgeb√ºhren. In K√∂ln kommen etwa 10 Millionen Euro im Jahr zusammen. Noch einmal so viel Geld verdienen die St√§dte an den "Kn√∂llchen" f√ºr falsches Parken.

Aus 10 Pfennig f√ºr eine Stunde im Jahr 1954 ‚Äì das w√§ren heute etwa 5 Cents ‚Äì sind inzwischen weit h√∂here Betr√§ge geworden. Spitzenergie in Deutschland sind D√ºsseldorf und Berlin mit mehreren Euro pro Stunde. Tendenz steigend. Doch aus dem K√∂lner Rathaus hei√üt es an alle sich beschwerenden Autofahrer gerichtet, das Geld werde selbstverst√§ndlich zweckgebunden verwendet: f√ºr den Bau neuer Stra√üen. An denen neue Parkscheinautomaten stehen?`,
            questions: [
              {
                id: "s2q1",
                type: "single",
                text: "Die ersten Parkuhren Europas standen",
                options: [
                  {id: "s2q1o1", text: "in der Schweiz und in Deutschland."},
                  {id: "s2q1o2", text: "in der Schweiz und in Schweden."},
                  {id: "s2q1o3", text: "in Deutschland und in Schweden."}
                ],
                correctAnswer: "s2q1o2"
              },
              {
                id: "s2q2",
                type: "single", 
                text: "Fr√ºher wurden in Duisburg die Parkgeb√ºhren verwendet, um",
                options: [
                  {id: "s2q2o1", text: "Bed√ºrftige zu unterst√ºtzen."},
                  {id: "s2q2o2", text: "Dauerparker aus den Stadtzentren zu vertreiben."},
                  {id: "s2q2o3", text: "L√∂cher im st√§dtischen Haushalt zu stopfen."}
                ],
                correctAnswer: "s2q2o1"
              },
              {
                id: "s2q3",
                type: "single",
                text: "Die ersten Parkuhren",
                options: [
                  {id: "s2q3o1", text: "funktionierten problemlos."},
                  {id: "s2q3o2", text: "gaben nur Groschen zur√ºck."},
                  {id: "s2q3o3", text: "konnten nur M√ºnzen annehmen!"}
                ],
                correctAnswer: "s2q3o3"
              },
              {
                id: "s2q4",
                type: "single",
                text: "Die neuen Parkscheinautomaten",
                options: [
                  {id: "s2q4o1", text: "funktionieren nur bargeldlos."},
                  {id: "s2q4o2", text: "geben kein Wechselgeld zur√ºck."},
                  {id: "s2q4o3", text: "sind flexibel im Hinblick auf die Art der Bezahlung!"}
                ],
                correctAnswer: "s2q4o3"
              },
              {
                id: "s2q5", 
                type: "single",
                text: "In Berlin und in D√ºsseldorf",
                options: [
                  {id: "s2q5o1", text: "flie√üen die Parkgeb√ºhren nur in den Stra√üenbau."},
                  {id: "s2q5o2", text: "nimmt die Zahl der Parkscheinautomaten zu."},
                  {id: "s2q5o3", text: "werden die h√∂chsten Parkgeb√ºhren verlangt!"}
                ],
                correctAnswer: "s2q5o3"
              }
            ]
          },
          { 
            id:"s3", 
            title:"Leseverstehen, Teil 3", 
            points:25,
            passageTitle:"Aufgabe: Lesen Sie die zehn Situationen (11-20) und die zw√∂lf Texte (A-L). Welcher Text passt zu welcher Situation? Sie k√∂nnen jeden Text nur einmal verwenden. Manchmal passt kein Text. W√§hlen Sie dann 'x'.",
            passage: "",
            questions:[],
            texts: [
              {id: "A", text: "Bewerber sollten Bewerbungsgespr√§che um eine Stelle nicht dem Zufall √ºberlassen. In der Regel fangen sie mit Smalltalk an: Man redet √ºber das Wetter, den Verkehr und √Ñhnliches. Doch dabei kommt es schon auf das Wie? an. Wer viel kritisiert, hat schon verloren. Bei der Vorstellung ihrer Person sollten Bewerber darauf achten, dass sie ihre F√§higkeit und den Nutzen, den ihr potentiell zuk√ºnftiger Arbeitgeber von ihnen hat, in den Vordergrund stellen. Fragen nach Gesundheit, Familienplanung, Schwangerschaft oder Geld geh√∂ren nicht ins Bewerbungsgespr√§ch. Sollten Sie dennoch gestellt werden, ist man nicht verpflichtet, diese wahrheitsgem√§√ü zu beantworten.", correctAnswer: "11"},
              {id: "B", text: "Die Postbank gibt Bewerbern um einen Ausbildungsplatz ein Thema f√ºr ein Projekt, das sie ausarbeiten und then pr√§sentieren sollen. Nur wer diese H√ºrde nehmen kann und Engagement beweist, hat Chancen, aufgenommen zu werden. Schlie√ülich sollen die Bewerber zeigen, dass sie belastbar und entscheidungsf√§hig sind. Der Banker von heute hat ein weit gestecktes T√§tigkeitsfeld; Kassierer am Schalter, die nichts als Geld oder Formulare ausgeben oder entgegennehmen, wird es in Zukunft immer weniger geben.", correctAnswer: ""},
              {id: "C", text: "Rhetoriktrainer raten dazu, dem Anfang und dem Schluss eines Referats besonderes Augenmerk zu schenken. In den ersten zwei Minuten eines Vortrags entscheide sich n√§mlich, ob ein Zuh√∂rer an dem Referat Interesse hat oder nicht. Daher sei ein effektvoll und interessant gestalteter Einstieg √§u√üerst wichtig. Am Schluss soll man den Zuh√∂rern noch einmal mit auf den Weg geben, was dem Vortragenden besonders wichtig erscheint.", correctAnswer: ""},
              {id: "D", text: "Robert Sonntag, Autor des Buches Hilfe, ich muss reden behauptet, die Angst vor einem gr√∂√üeren Publikum zu reden, sei ein Problem f√ºr die meisten Menschen. In Deutschland liegt in etwa 60 % der Menschen an diesem Ph√§nomen. Dabei achten Zuh√∂rer nur zu 7 % auf das, —á—Ç–æ jemand sagt, 93 % der Wirkung eines Vortrags erziele man durch K√∂rpersprache und seine Stimme. Der Autor r√§t zu Entspannungstechniken wie dem Autogenen Training oder Yoga, um gelassener zu werden, und einer gr√ºndlichen Vorbereitung des Vortrags.Seminarangebote unter www.rs-rethorik.de.", correctAnswer: "19"},
              {id: "E", text: "Bereiten Sie sich auf ein Vorstellungsgespr√§ch intensiv vor. √úberlegen Sie sich genau, —á—Ç–æ Sie Ihrer zuk√ºnftigen Firma an Nutzen bringen k√∂nnen, denn Sie werden danach gefragt werden, warum Sie sich gerade bei dieser und nicht bei einer anderen Firma beworben haben. Analysieren Sie Ihre pers√∂nlichen St√§rken und Schw√§chen und √ºberlegen Sie, wie Sie Ihre schwachen Seiten m√∂glichst positiv pr√§sentieren k√∂nnen. √úberlegen Sie, was Ihre pers√∂nlichen Ziele sind, und sammeln Sie so viele Informationen wie m√∂glich √ºber Ihre zuk√ºnftige Arbeit und die Firma, bei der Sie sich beworben haben.", correctAnswer: ""},
              {id: "F", text: "Nichts ist auf privaten Feierlichkeiten wie Hochzeiten, runden Geburtstagen oder sonstigen Jubil√§en schlimmer als langatmige, nicht enden wollende Ansprachen von Familienmitgliedern. Deshalb bieten viele Volkshochschulen in Deutschland Weeksendseminare an, in denen der Aufbau und der Vortrag einer guten Festansprache trainiert werden. Das Ziel dieser Seminare ist es, die zuk√ºnftigen Teilnehmenden in die Lage zu versetzen, spritzige Reden frei halten zu k√∂nnen.", correctAnswer: "16"},
              {id: "G", text: "Ein Auszubildender bei einer Bank oder Sparkasse bekommt 690.- Euro im ersten Ausbildungsjahr. Am Ende seiner Ausbildung steigt die Verg√ºtung auf 800.- Euro. Das Einstiegsgehalt f√ºr Bankangestellte liegt bei etwas √ºber 2.000.- Euro monatlich. Aufstiegschancen haben die jungen Banker nur, wenn sie sich intensiv um ihre berufliche Fortbildung k√ºmmern. Daf√ºr bieten die Banken ihren Mitarbeitern viele M√∂glichkeiten an, wie das BankCollege der Volksbanken oder die Sparkassen-Akademie. Manche Banken geben besonders qualifizierten Mitarbeitern sogar Stipendien f√ºr ein Studium.", correctAnswer: "13"},
              {id: "H", text: "Wer zu seinem Vorstellungsgespr√§ch eingeladen wird, sollte auf korrekte und saubere Kleidung achten. F√ºr viele Firmen ist es wichtig, dass auch Auszubildende die Firma gegen√ºber den Kunden repr√§sentieren k√∂nnen. Zerrissene Jeans und selbst gef√§rbte T-Shirts m√∂gen zwar trendy sein, zu einem Vorstellungsgespr√§ch geh√∂ren sie aber nicht. In Zweifelsf√§llen ist es ratsam, sich bei Eltern oder Bekannten Rat zu holen.", correctAnswer: "18"},
              {id: "I", text: "F√ºr junge Leute kann das Internet zu einer Droge werden. Der typische Internet-S√ºchtige ist ca. 18 Jahre alt, m√§nnlich, Single und hat kaum soziale Kontakte. Er surft t√§glich um die 5 Stunden im World Wide Web und hat schlechte Laune, wenn er nicht vor dem Monitor sitzen kann. Pflichten werden oft vernachl√§ssigt. Psychologen raten, die Surfzeiten schrittweise zu verringern und dar√ºber ein Tagebuch zu f√ºhren sowie vor dem Surfen schriftlich zu notieren, was genau man im Internet suchen m√∂chte. Wer diese strengen Regels einh√§lt, kann aus der Internetsucht aussteigen.", correctAnswer: "14"},
              {id: "J", text: "Zu einem zunehmend gr√∂√üer werdenden Problem am Arbeitsplatz wird die immer gr√∂√üer werdende Kluft zwischen dem Sprachgebrauch junger und alter Kollegen. Viele junge Leute verstehen laut einer Studie der Universit√§t Kiel traditionelle Redewendungen wie z. B. Den Nagel auf den Kopf treffen oder √ñl ins Feuer gie√üen nicht mehr, w√§hrend √Ñltere nichts mit keinen Bock haben anzufangen wissen. Dadurch, dass Jung und Alt heute nicht more so lange wie in fr√ºheren Zeiten zusammenleben, sondern unter sich bleiben, verst√§rkt sich das Auseinanderdriften der Jugendsprache und der Sprache der Alten immer mehr.", correctAnswer: ""},
              {id: "K", text: "GRUNDS√ÑTZLICH HAT JEDER DIE M√ñGLICHKEIT, BEI UNS EINE AUSBILDUNG ZU MACHEN, hei√üt es bei der Sparkassen-Akademie in Bonn. Die Bewerber sollen aber gute bis sehr gute Noten in Deutsch und Mathematik von der Schule mitbringen, und sie m√ºssen in Rollenspielen ihre kommunikativen F√§higkeiten unter Beweis stellen, etwa, wie sie mit einem aggressiven Kunden umgehen w√ºrden.", correctAnswer: "15"},
              {id: "L", text: "Viele junge Leute fl√ºchten sich in die virtuelle Scheinwelt, weil ihnen die Realit√§t als eine zu gro√üe Belastung erscheint. Insbesondere Chatrooms verf√ºhren die Jugendlichen zu langen Sitzungen, die oft als Ersatz f√ºr mangelnde zwischenmenschliche Beziehungen herhalten. H√§ufige Folge: Vernachl√§ssigung von Hausaufgaben und schlechte Zensuren. Eltern, die sich Sorgen um ihre Internetabh√§ngigen Kinder machen, sollten viel mit ihnen sprechen - ohne Vorw√ºrfe zu machen - und versuchen ihren Z√∂glingen Alternativen in der realen Welt aufzuzeigen.", correctAnswer: "20"}
            ],
            situations: [
              {id: "11", text: "Ihre Schw√§gerin erwartet ein Kind. Sie ist nicht sicher, ob Sie in einem Vorstellungsgespr√§ch darauf hinweisen muss."},
              {id: "12", text: "Ihr Neffe sucht einen Ausbildungsplatz als Elektriker. Er wei√ü nicht genau, wie er seine Bewerbung korrekt schreiben soll."},
              {id: "13", text: " Eine Bekannte m√∂chte eine Ausbildung machen und vielleicht sp√§ter einmal studieren."},
              {id: "14", text: "Ein Freund surft t√§glich viele Stunden im Internet. Sie finden das zu viel und wollen ihm einen Rat geben."},
              {id: "15", text: "Ein Freund m√∂chte wissen, welche schulischen Leistungen f√ºr die Vergabe von Ausbildungspl√§tzen im Bankgewerbe besonders wichtig sind."},
              {id: "16", text: "Ein √§lteres Ehepaar hat Goldene Hochzeit. Die Tochter m√∂chte eine Rede halten und braucht daf√ºr eine Anleitung."},
              {id: "17", text: "Ein Bekannter ist Bankkaufmann und sucht eine Stelle."},
              {id: "18", text: "Eine Freundin sucht einen Ausbildungsplatz. Sie ist zu einem Vorstellungsgespr√§ch eingeladen und ist sich nicht sicher, was sie dazu anziehen soll."},
              {id: "19", text: "Eine Freundin, 20 Jahre alt, muss oft vor Arbeitskollegen Referate halten. Ihr Hauptproblem ist ihre Nervosit√§t."},
              {id: "20", text: "Eine befreundete Frau m√∂chte ihren Sohn davon abhalten, st√§ndig im Internet zu surfen, weil seine schulischen Leistungen rapide nachlassen."}
            ]
          },
          { 
            id:"s4", 
            title:"Sprachbausteine, Teil 1", 
            points:15,
            passageTitle:"Aufgabe: Erg√§nzen Sie den Text. W√§hlen Sie f√ºr jede L√ºcke das passende Wort.",
            passage: "",
            questions:[],
            fillBlanks: [
              {
                id: "21",
                options: ["anstatt", "ohne", "um"],
                correctAnswer: "um"
              },
              {
                id: "22",
                options: ["dass", "ob", "w√§hrend"],
                correctAnswer: "dass"
              },
              {
                id: "23",
                options: ["aber", "denn", "und"],
                correctAnswer: "aber"
              },
              {
                id: "24",
                options: ["bestimmt", "unbedingt", "v√∂llig"],
                correctAnswer: "unbedingt"
              },
              {
                id: "25",
                options: ["dich", "mich", "sich"],
                correctAnswer: "mich"
              },
              {
                id: "26",
                options: ["als", "wenn", "wie"],
                correctAnswer: "als"
              },
              {
                id: "27",
                options: ["baldigen", "kommenden", "vergangenen"],
                correctAnswer: "kommenden"
              },
              {
                id: "28",
                options: ["danach", "dar√ºber", "dazu"],
                correctAnswer: "dazu"
              },
              {
                id: "29",
                options: ["aber", "oder", "sondern"],
                correctAnswer: "sondern"
              },
              {
                id: "30",
                options: ["f√ºr", "gegen", "ohne"],
                correctAnswer: "f√ºr"
              }
            ],
            fillText: `Hallo Ferdinand,

nun habe ich mich schon so lange nicht bei dir gemeldet - das tut mir wirklich leid! Ich hatte in den vergangenen Monaten viel Stress, weil ich ja nun studiere und nebenbei noch arbeiten muss, ________ meine Miete und alles andere bezahlen zu k√∂nnen. Zum Gl√ºck macht mir mein Nebenjob wenigstens Spa√ü. Ich wei√ü nicht, ________ ich das sonst durchhalten w√ºrde. Vielleicht habe ich dir schon erz√§hlt, dass ich abends und am Wochenende in einer Kneipe in der K√ºche helfe. Das ist zwar oft sehr anstrengend, ________ anderseits ist dauernd was los, es wird nicht langweilig, und meine Kollegen sind total nett. Erinnerst du dich noch an unsere Zeit in der Grundschule? Mit acht Jahren wollte ich ja ________ Kellnerin werden, weil man da Trinkgeld bekommt. Naja, jetzt bin ich in der K√ºche gelandet, knapp daneben ist auch vorbei ;)

Was macht denn deine Ausbildung? Wenn ich ________ nicht t√§usche, bist du ja in einem halben Jahr schon fertig, oder? Das ist ja nicht more lang!

Neulich habe ich √ºbrigens Tina und Kevin hier in der N√§he der Uni getroffen - die waren ja schon ein Paar, ________ wir noch in der Schule gegangen sind, und jetzt will sie tats√§chlich verheiratet!

Wie sehen denn deine Pl√§ne f√ºr die ________ Wochenenden aus? Wir k√∂nnten uns ja vielleicht mal wieder treffen und in Ruhe quatschen - h√§ttest du Lust ________ ?

In meiner Stra√üe hat vor einem Monat ein nettes kleines Caf√© aufgemacht, die haben nicht nur sehr leckere Kuchen, ________ auch einige kleine Gerichte zu wirklich g√ºnstigen Preisen. W√§re das was ________ dich? Mail wir doch einfach, wenn du magst, ich w√ºrde mich freuen.

Viele Gr√º√üe,

Nadine`
          },
          { 
            id:"s5", 
            title:"Sprachbausteine, Teil 2", 
            points:15,
            passageTitle:"Aufgabe: Lesen Sie den Text und entscheiden Sie, welches Wort in welche L√ºcke passt. Sie k√∂nnen jedes Wort nur einmal verwenden. Nicht alle W√∂rter passen in den Text.",
            passage: "",
            questions:[],
            fillBlanks2: [
              {
                id: "31",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "KAUM"
              },
              {
                id: "32", 
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "AUF"
              },
              {
                id: "33",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "VORBEI"
              },
              {
                id: "34",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "STATT"
              },
              {
                id: "35",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "INNERHALB"
              },
              {
                id: "36",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "M√úSSEN"
              },
              {
                id: "37",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "AN"
              },
              {
                id: "38",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "SOLLEN"
              },
              {
                id: "39",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "DANN"
              },
              {
                id: "40",
                options: ["AN", "AUF", "BEINAHE", "DAF√úR", "DANN", "DENN", "D√úRFEN", "FAST", "INNERHALB", "KAUM", "M√úSSEN", "SOLLEN", "STATT", "VOR", "VORBEI"],
                correctAnswer: "DENN"
              }
            ],
            fillText2: `Das Fahrrad: ernsthafte Konkurrenz f√ºrs Auto?

Welches Fortbewegungsmittel, denken Sie, wird in Deutschland am h√§ufigsten benutzt? Nat√ºrlich das Automobil. Volkswagen, Porsche, Mercedes Benz, BMW, Audi: In ________ einem anderen Land gibt es so viele Automobilfabriken wie in Deutschland, spielt die Automobilindustrie eine so gro√üe Rolle. Nahezu jeder Haushalt verf√ºgt √ºber mindestens ein Auto, das Auto spielt im Leben der Deutschen eine gro√üe Rolle, sowohl als Fortbewegungsmittel zum Arbeitsplatz oder in den Urlaub als auch als Statussymbol: Zeig mir dein Auto und ich wei√ü, wer du bist.

Doch hat das Autofahren auch Schattenseiten. Mangelnde Bewegungsm√∂glichkeiten, gesundheitliche Probleme und Stress bringen zumindest in den Gro√üst√§dten immer more Autofahrer dazu, sich vom Automobil freizumachen und ________ ein anderes Verkehrsmittel umzusteigen, das in dem Ruf steht, ges√ºnder zu sein als das Auto: das Fahrrad. Not only in der Freizeit, sondern auch auf dem Weg zum Arbeitsplatz wird das Rad benutzt. "Ich habe keine Lust, Morgen f√ºr Morgen im Stau zu stehen und Zeit zu verlieren", sagt Bettina Meier (25): "Da ist es viel entspannender, auf den zumeist gut ausgebauten Fahrradwegen an den im Stau wartenden Fahrzeugen ________ und ausgeruht am Arbeitsplatz anzukommen."

Dass Fahrradfahren um einiges ges√ºnder ist, als hinter dem Lenkrad zu sitzen, best√§tigen auch die Mediziner. Wer Fahrrad f√§hrt ________ zu sitzen, bringt seinen Blutkreislauf in Schwung, st√§rkt die Abwehrkr√§fte des K√∂rpers und trainiert seinen K√∂rper. Auch die Bewegung an der frischen Luft tut Menschen gut, die sich sonst die meiste Zeit ________ geschlossener R√§ume in B√ºros, Schulen oder Fabriken aufhalten ________.

Auch die Gesch√§ftswelt hat die Fahrradfahrer als Kunden entdeckt. Ein breites Angebot ________ Zubeh√∂r f√ºr Fahrr√§der von schicken Radfelgen √ºber sportliche Mehrganggetriebe, mit denen Berge kein Problem mehr darstellen, bis zur Designer-Trinkflasche machen aus dem einfachen Fahrrad ein exklusives Fahrzeug. Und nat√ºrlich darf bei keinem Fahrradfahrer eine aufw√§ndige Sicherheitsausstattung more fehlen: Schutzhelme, Ellenbogen- und Kniesch√ºtzer, die das Fahrrad im Falle eines Unfalls fast so sicher wie einen Panzer machen ________.

Nur wenn es regnet und das passiert in Deutschland leider nicht so selten -, ________ sind die Autoschlangen wieder l√§nger. ________ einen praktischen Wetterschutz f√ºr Radfahrer haben die Gesch√§fte noch nicht im Angebot.`
          }
        ]
      },
      
      hoeren: {
        id: "exam-h√∂rverstehen",
        durationSec: 17 * 60,
        sections: [
          { 
            id:"h√∂rverstehen1", 
            title:"H√∂rverstehen, Teil 1", 
            points:25,
            correctAnswers: { "41": "falsch", "42": "richtig", "43": "richtig", "44": "falsch", "45": "falsch" },
            questions: [
              {
                id: "41",
                text: "Die Wetterlage in den Alpen wird sich in den n√§chsten Tagen verbessern."
              },
              {
                id: "42", 
                text: "Die Fans des FC Neustadt waren von dem Sieg ihrer Mannschaft √ºberrascht."
              },
              {
                id: "43",
                text: "Erzieherinnen verlangen eine bessere Bezahlung."
              },
              {
                id: "44",
                text: "Im Berliner Zoo gibt es eine gro√üe Pandafamilie."
              },
              {
                id: "45",
                text: "Die Zahl der Deutschland-Urlauber ist r√ºckl√§ufig."
              }
            ]
          },
          { 
            id:"h√∂rverstehen2", 
            title:"H√∂rverstehen, Teil 2", 
            points:25,
            correctAnswers: { "46": "richtig", "47": "falsch", "48": "richtig", "49": "richtig", "50": "falsch", "51": "falsch", "52": "falsch", "53": "richtig", "54": "richtig", "55": "falsch" },
            questions: [
              {
                id: "46",
                text: "In dem Restaurant gab es einen Wasserschaden."
              },
              {
                id: "47",
                text: "Anton Laurito ist bei seinen Gro√üeltern aufgewachsen."
              },
              {
                id: "48", 
                text: "Im Haus der Gro√üeltern lebten auch andere Kinder."
              },
              {
                id: "49",
                text: "Der Stress st√∂rte den Studiogast w√§hrend der Ausbildung nicht."
              },
              {
                id: "50",
                text: "Bei neuen Mitarbeitern legt Anton Laurito am meisten Wert auf viel Erfahrung."
              },
              {
                id: "51",
                text: "Aussehen und Geschlecht der Speisen haben f√ºr den Koch den gleichen Stellenwert."
              },
              {
                id: "52",
                text: "In der Essschule k√∂nnen Kinder kochen lernen."
              },
              {
                id: "53",
                text: "Anton Laurito lehnt Fastfood nicht grunds√§tzlich ab."
              },
              {
                id: "54",
                text: "Der Koch hat eine gesunde Einstellung zum Thema Wettbewerb."
              },
              {
                id: "55",
                text: "Zuhause probiert er gerne komplizierte Gerichte aus."
              }
            ]
          },
          { 
            id:"h√∂rverstehen3", 
            title:"H√∂rverstehen, Teil 3", 
            points:25,
            correctAnswers: { "56": "richtig", "57": "richtig", "58": "richtig", "59": "falsch", "60": "falsch" },
            questions: [
              {
                id: "56",
                text: "Am Wochenanfang soll man einen Aufenthalt im Freien vermeiden."
              },
              {
                id: "57",
                text: "Abends ist das Risiko, einen Wildunfall zu haben, am gr√∂√üten."
              },
              {
                id: "58",
                text: "Man kann bei dem Fest an verschiedenen Orten Musik h√∂ren."
              },
              {
                id: "59",
                text: "In dringenden F√§llen k√∂nnen Sie die Firma ab Montag erreichen."
              },
              {
                id: "60",
                text: "Am Abend werden Verkehrsbehinderungen erwartet."
              }
            ]
          }
        ]
      },
      
      schreiben: {
        id: "exam-schreiben-001",
        durationSec: 30 * 60,
        sections: [
          { 
            id:"s1", 
            title:"Schreiben, Teil 1", 
            points:45,
            passageTitle:"Aufgabe: Schreiben Sie eine E-Mail",
            passage: "",
            writingTask: {
              prompt: `Engagement f√ºr Jugendliche

Wie soll es nach dem Schulabschluss weitergehen? 
Was w√§re der ideale Beruf? 
Wie findet man einen Ausbildungsplatz und wie bewirbt man sich? 

Wollen Sie Jugendlichen dabei helfen, die richtigen Antworten auf diese Fragen zu finden 
und so ihre Zukunftsperspektiven zu verbessern? 

Dann werden Sie Bildungspatin/Bildungspate! 

Wir suchen Bildungspatinnen und Bildungspaten, die Sch√ºlerinnen und Sch√ºler ab 14 Jahren 
unterst√ºtzen k√∂nnen: 
- bei Problemen mit dem Schulabschluss, 
- bei der Suche nach einem Ausbildungsplatz, 
- beim Bewerbungsprozess, 
- beim Berufseinstieg. 

Sie helfen einer Sch√ºlerin oder einem Sch√ºler dabei, den √úbergang zwischen Schule und Beruf 
zu meistern. 

In drei Wochenendseminaren bereiten wir Sie auf diese spannende und anspruchsvolle 
Aufgabe vor. 

Sie erhalten au√üerdem regelm√§√üig Beratung und Unterst√ºtzung durch unser erfahrenes Team. 

Setzen Sie Ihre Zeit, Ihr Wissen und Ihr Engagement ein, um das Leben eines Jugendlichen 
positiv zu beeinflussen! 

Mehr Informationen erhalten Sie unter: www.bildungspaten-f√ºr-jugendliche.net 

Adresse: 
Bildungspaten f√ºr Jugendliche e. V. 
Hamburger Str. 112 
60824 Frankfurt am Main`,
              requirements: [
                "Beschreiben Sie, welche Erfahrungen Sie bei Ihrem Engagement in dem Verein gemacht haben.",
                "Erkl√§ren Sie, warum Sie Jugendlichen helfen wollten.",
                "Beschreiben Sie, wie Sie sich die Mitarbeit im Verein vorgestellt haben.",
                "Machen Sie Verbesserungsvorschl√§ge."
              ],
              wordCount: 0
            }
          }
        ]
      }
    };

    // ===== LESEN PAGE FUNCTIONALITY =====
    function initLesenPage() {
      const exam = EXAM_DATA.lesen;
      
      /* ===== State & DOM refs ===== */
      let state = { 
        sectionIndex: 0, 
        questionIndex: 0, 
        answers: {}, 
        marked: {}, 
        remaining: exam.durationSec,
        showResults: false,
        timerStarted: false,
        timerInterval: null
      };
      const topTiles = document.getElementById('topTiles-lesen');
      const passageTitleEl = document.getElementById('passageTitle-lesen');
      const passageContentEl = document.getElementById('passageContent-lesen');
      const sectionNameEl = document.getElementById('sectionName-lesen');
      const questionTitleEl = document.getElementById('questionTitle-lesen');
      const questionBodyEl = document.getElementById('questionBody-lesen');
      const headingsBankContainer = document.getElementById('headingsBankContainer-lesen');
      const timerEl = document.getElementById('timer-lesen');
      const statusText = document.getElementById('statusText-lesen');
      const resultBtn = document.getElementById('resultBtn-lesen');
      const resetBtn = document.getElementById('resetBtn-lesen');
      const resetSectionBtn = document.getElementById('resetSectionBtn-lesen');

      /* ===== Timer Functions ===== */
      function startTimer(){
        if(state.timerInterval) {
          clearInterval(state.timerInterval);
        }
        
        state.timerStarted = true;
        state.timerInterval = setInterval(()=>{
          if(state.remaining <= 0){
            clearInterval(state.timerInterval);
            timerEl.textContent = 'Zeit abgelaufen';
            return;
          }
          state.remaining--;
          updateTimerDisplay();
        }, 1000);
      }

      function resetTimer(){
        if(state.timerInterval) {
          clearInterval(state.timerInterval);
        }
        state.remaining = exam.durationSec;
        state.timerStarted = false;
        updateTimerDisplay();
        startTimer();
      }

      function updateTimerDisplay(){
        const min = Math.floor(state.remaining / 60);
        const sec = state.remaining % 60;
        timerEl.textContent = `Verbleibende Zeit: ${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
      }

      /* ===== Reset Section Function ===== */
      function resetCurrentSection() {
        const currentSection = exam.sections[state.sectionIndex];
        
        if (confirm(`M√∂chten Sie wirklich den Teil "${currentSection.title}" zur√ºcksetzen? Alle Antworten in diesem Teil werden gel√∂scht.`)) {
          if (currentSection.id === 's1') {
            currentSection.texts.forEach(text => {
              delete state.answers[text.id];
            });
          } else if (currentSection.id === 's2') {
            currentSection.questions.forEach(question => {
              delete state.answers[question.id];
            });
          } else if (currentSection.id === 's3') {
            currentSection.situations.forEach(situation => {
              delete state.answers[situation.id];
            });
          } else if (currentSection.id === 's4') {
            currentSection.fillBlanks.forEach(blank => {
              delete state.answers[blank.id];
            });
          } else if (currentSection.id === 's5') {
            currentSection.fillBlanks2.forEach(blank => {
              delete state.answers[blank.id];
            });
          }
          
          renderAll();
        }
      }

      /* ===== Render ===== */
      function renderTopTiles(){ 
        topTiles.innerHTML=''; 
        exam.sections.forEach((sec,idx)=>{ 
          const div=document.createElement('div'); 
          div.className='tile'+(idx===state.sectionIndex?' active':'')+(isSectionDone(sec)?' done':''); 
          div.innerHTML=`<div>${sec.title}</div><div class="points">${sec.points} P</div>`; 
          div.onclick=()=>{state.sectionIndex=idx; state.questionIndex=0; state.showResults=false; renderAll();}; 
          topTiles.appendChild(div); 
        }); 
      }

      function isSectionDone(section){
        if(section.id==='s1') return section.texts.every(t=>state.answers[t.id]);
        if(section.id==='s2') return section.questions.every(q=>state.answers[q.id]);
        if(section.id==='s3') return section.situations.every(h=>state.answers[h.id] || state.answers[h.id] === 'X');
        if(section.id==='s4') return section.fillBlanks.every(b=>state.answers[b.id]);
        if(section.id==='s5') return section.fillBlanks2.every(b=>state.answers[b.id]);
        return false;
      }

      function renderAll(){
        renderTopTiles();
        const section = exam.sections[state.sectionIndex];
        sectionNameEl.textContent = section.title;
        passageTitleEl.textContent = section.passageTitle;
        
        resetSectionBtn.style.display = 'block';
        
        if(state.showResults){
          renderResults();
          return;
        }
        
        if(section.id === 's1'){
          renderPart1();
        } else if(section.id === 's2'){
          renderPart2();
        } else if(section.id === 's3'){
          renderPart3();
        } else if(section.id === 's4'){
          renderSprachbausteine1();
        } else if(section.id === 's5'){
          renderSprachbausteine2();
        }
      }

      function renderPart1(){
        const section = exam.sections[state.sectionIndex];
        
        let textsHTML = `<div class="instructions">Ziehen Sie die passenden √úberschriften auf die Texte. Sie k√∂nnen jede √úberschrift nur einmal verwenden.</div>`;
        
        section.texts.forEach((text, idx) => {
          const letter = String.fromCharCode(97 + idx);
          const selectedHeading = state.answers[text.id];
          
          textsHTML += `
            <div class="text-container">
              <div class="text-title">Text ${letter.toUpperCase()}</div>
              <div class="text-content">${text.content}</div>
              <div class="title-slot ${selectedHeading ? 'has-title' : ''}" data-text-id="${text.id}">
                ${selectedHeading ? getHeadingTextById(selectedHeading) : 'Ziehen Sie hier eine √úberschrift hin'}
              </div>
            </div>
          `;
        });
        
        passageContentEl.innerHTML = textsHTML;
        
        let headingsHTML = `<div class="headings-bank">`;
        section.headings.forEach(heading => {
          const isUsed = section.texts.some(text => state.answers[text.id] === heading.id);
          
          headingsHTML += `
            <div class="heading-item ${isUsed ? 'used' : ''}" draggable="${!isUsed}" data-heading-id="${heading.id}">
              ${heading.id}) ${heading.text}
            </div>
          `;
        });
        
        headingsHTML += `</div>`;
        
        headingsBankContainer.innerHTML = headingsHTML;
        
        setupDragAndDrop();
        
        questionBodyEl.innerHTML = '';
        questionTitleEl.textContent = '';
      }

      function getHeadingTextById(id){
        const section = exam.sections[state.sectionIndex];
        const heading = section.headings.find(h => h.id === id);
        return heading ? `${heading.id}) ${heading.text}` : '';
      }

      function setupDragAndDrop(){
        const headingItems = document.querySelectorAll('.heading-item:not(.used)');
        const titleSlots = document.querySelectorAll('.title-slot');
        
        headingItems.forEach(item => {
          item.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', e.target.dataset.headingId);
          });
        });
        
        titleSlots.forEach(slot => {
          slot.addEventListener('dragover', (e) => {
            e.preventDefault();
            slot.style.background = '#e8f4ff';
          });
          
          slot.addEventListener('dragleave', (e) => {
            slot.style.background = slot.classList.contains('has-title') ? '#e8fbe9' : '#f8fbff';
          });
          
          slot.addEventListener('drop', (e) => {
            e.preventDefault();
            const headingId = e.dataTransfer.getData('text/plain');
            const textId = slot.dataset.textId;
            
            Object.keys(state.answers).forEach(key => {
              if(state.answers[key] === headingId) {
                delete state.answers[key];
              }
            });
            
            state.answers[textId] = headingId;
            renderAll();
          });
        });
      }

      function renderPart2(){
        const section = exam.sections[state.sectionIndex];
        
        passageContentEl.innerHTML = `<div class="passage">${section.passage}</div>`;
        
        let questionsHTML = `<div class="all-questions">`;
        
        section.questions.forEach((question, idx) => {
          const questionNumber = idx + 1;
          const userAnswer = state.answers[question.id];
          
          questionsHTML += `
            <div class="question-block">
              <div class="question-text">${questionNumber}. ${question.text}</div>
              <div class="options">
                ${question.options.map(opt => `
                  <div class="option ${userAnswer === opt.id ? 'selected' : ''}" 
                       onclick="window.lesenApp.selectOption('${question.id}', '${opt.id}')">
                    <div class="radio"></div>
                    <div>${opt.text}</div>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        });
        
        questionsHTML += `</div>`;
        
        questionBodyEl.innerHTML = questionsHTML;
        questionTitleEl.textContent = '';
        headingsBankContainer.innerHTML = '';
      }

      function renderPart3(){
        const section = exam.sections[state.sectionIndex];
        
        let textsHTML = `
          <div class="instructions">Ziehen Sie die passenden Situationen auf die Texte. Sie k√∂nnen jede Situation nur einmal verwenden. Manchmal passt keine Situation.</div>
          <div class="texts-list">
            <h3>Texte (A-L)</h3>
        `;
        
        section.texts.forEach(text => {
          const userAnswer = Object.keys(state.answers).find(key => state.answers[key] === text.id);
          const selectedSituation = userAnswer ? section.situations.find(h => h.id === userAnswer) : null;
          
          textsHTML += `
            <div class="text-item" data-text-id="${text.id}">
              <div class="text-letter">${text.id})</div>
              <div class="text-content">${text.text}</div>
              <div class="title-slot ${userAnswer ? 'has-title' : ''} ${userAnswer === 'X' ? 'has-x' : ''}" data-text-id="${text.id}">
                ${selectedSituation ? selectedSituation.text : (userAnswer === 'X' ? 'X - Keine passende Situation' : 'Ziehen Sie hier eine Situation hin')}
              </div>
            </div>
          `;
        });
        
        textsHTML += `</div>`;
        
        passageContentEl.innerHTML = textsHTML;
        
        let situationsHTML = `
          <div class="situations-list">
            <h3>Situationen (11-20)</h3>
        `;
        
        section.situations.forEach((situation, idx) => {
          const situationNumber = parseInt(situation.id);
          const isUsed = state.answers[situation.id];
          const isX = state.answers[situation.id] === 'X';
          
          situationsHTML += `
            <div class="situation-item ${isUsed ? 'used' : ''}" draggable="${!isUsed}" data-situation-id="${situation.id}">
              <div class="situation-number">${situationNumber}.</div>
              <div class="situation-text">${situation.text}</div>
              ${!isUsed ? `<button class="exam-btn no-match ${isX ? 'selected' : ''}" onclick="window.lesenApp.markNoMatch('${situation.id}')">X - Kein passender Text</button>` : ''}
            </div>
          `;
        });
        
        situationsHTML += `</div>`;
        
        questionBodyEl.innerHTML = situationsHTML;
        questionTitleEl.textContent = '';
        headingsBankContainer.innerHTML = '';
        
        setupPart3DragAndDrop();
      }

      function markNoMatch(situationId) {
        Object.keys(state.answers).forEach(key => {
          if(state.answers[key] === situationId) {
            delete state.answers[key];
          }
        });
        
        state.answers[situationId] = 'X';
        renderAll();
      }

      function setupPart3DragAndDrop(){
        const situationItems = document.querySelectorAll('.situation-item:not(.used)');
        const textSlots = document.querySelectorAll('.text-item .title-slot');
        
        situationItems.forEach(item => {
          item.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', e.target.dataset.situationId);
          });
        });
        
        textSlots.forEach(slot => {
          slot.addEventListener('dragover', (e) => {
            e.preventDefault();
            slot.style.background = '#e8f4ff';
          });
          
          slot.addEventListener('dragleave', (e) => {
            const hasTitle = slot.classList.contains('has-title');
            const hasX = slot.classList.contains('has-x');
            slot.style.background = hasTitle ? '#e8fbe9' : (hasX ? '#f8d7da' : '#f8fbff');
          });
          
          slot.addEventListener('drop', (e) => {
            e.preventDefault();
            const situationId = e.dataTransfer.getData('text/plain');
            const textId = slot.dataset.textId;
            
            Object.keys(state.answers).forEach(key => {
              if(state.answers[key] === situationId) {
                delete state.answers[key];
              }
            });
            
            state.answers[situationId] = textId;
            renderAll();
          });
        });
      }

      function renderSprachbausteine1(){
        const section = exam.sections[state.sectionIndex];
        
        let textWithBlanks = section.fillText;
        
        const blankPlaceholders = [];
        section.fillBlanks.forEach(blank => {
          blankPlaceholders.push(`BLANK_${blank.id}`);
        });
        
        let tempText = textWithBlanks;
        blankPlaceholders.forEach((placeholder, index) => {
          tempText = tempText.replace('________', placeholder);
        });
        
        section.fillBlanks.forEach(blank => {
          const userAnswer = state.answers[blank.id];
          const displayText = userAnswer ? userAnswer : '________';
          tempText = tempText.replace(`BLANK_${blank.id}`, `<span class="blank-word ${userAnswer ? 'has-answer' : ''}" data-blank-id="${blank.id}">${displayText}</span>`);
        });
        
        passageContentEl.innerHTML = `
          <div class="instructions">Klicken Sie auf jede L√ºcke und w√§hlen Sie das passende Wort aus. Sie k√∂nnen die L√ºcken ŸÅŸä beliebiger Reihenfolge ausf√ºllen.</div>
          <div class="fill-blank-container">${tempText}</div>
        `;
        
        document.querySelectorAll('.blank-word').forEach(blank => {
          blank.addEventListener('click', (e) => {
            showOptionsPopup(e.target);
          });
        });
        
        let optionsHTML = `<div class="horizontal-options" style="gap: 8px;">`;
        
        section.fillBlanks.forEach(blank => {
          const userAnswer = state.answers[blank.id];
          
          optionsHTML += `
            <div class="option-row" style="padding: 8px; margin-bottom: 5px;">
              <div class="option-number">${blank.id}</div>
              <div class="option-buttons">
                ${blank.options.map(opt => `
                  <div class="option-btn ${userAnswer === opt ? 'selected' : ''}" 
                       onclick="window.lesenApp.selectSprachbausteine1('${blank.id}', '${opt}')" 
                       style="padding: 6px 12px; font-size: 12px;">
                    ${opt}
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        });
        
        optionsHTML += `</div>`;
        
        questionBodyEl.innerHTML = optionsHTML;
        questionTitleEl.textContent = '';
        headingsBankContainer.innerHTML = '';
      }

      function showOptionsPopup(blankElement){
        const existingPopup = document.querySelector('.options-popup');
        if(existingPopup) {
          existingPopup.remove();
        }
        
        const blankId = blankElement.getAttribute('data-blank-id');
        const section = exam.sections.find(s => s.id === 's4');
        const blank = section.fillBlanks.find(b => b.id === blankId);
        
        if(!blank) return;
        
        const popup = document.createElement('div');
        popup.className = 'options-popup';
        
        blank.options.forEach(opt => {
          const optionItem = document.createElement('div');
          optionItem.className = 'option-item';
          optionItem.textContent = opt;
          optionItem.onclick = () => {
            selectSprachbausteine1(blankId, opt);
            popup.remove();
          };
          popup.appendChild(optionItem);
        });
        
        blankElement.appendChild(popup);
      }

      function selectSprachbausteine1(blankId, answer){
        state.answers[blankId] = answer;
        renderAll();
      }

      function renderSprachbausteine2(){
        const section = exam.sections[state.sectionIndex];
        
        let textWithBlanks = section.fillText2;
        
        section.fillBlanks2.forEach(blank => {
          const userAnswer = state.answers[blank.id];
          const displayText = userAnswer ? userAnswer : '________';
          textWithBlanks = textWithBlanks.replace('________', `<span class="blank-slot ${userAnswer ? 'has-answer' : ''}" data-blank-id="${blank.id}">${displayText}</span>`);
        });
        
        passageContentEl.innerHTML = `
          <div class="instructions">Klicken Sie auf jede L√ºcke und w√§hlen Sie das passende Wort aus. Sie k√∂nnen jedes Wort nur einmal verwenden.</div>
          <div class="fill-blank-container">${textWithBlanks}</div>
        `;
        
        document.querySelectorAll('.blank-slot').forEach(slot => {
          slot.addEventListener('click', (e) => {
            showSprachbausteine2Options(e.target);
          });
        });
        
        let wordBankHTML = `<div class="word-bank-vertical" style="gap: 8px;">`;
        
        const usedWords = Object.values(state.answers);
        
        section.fillBlanks2[0].options.forEach(word => {
          const isUsed = usedWords.includes(word);
          
          wordBankHTML += `
            <div class="bank-word-vertical ${isUsed ? 'used' : ''}" 
                 draggable="${!isUsed}" 
                 data-word="${word}"
                 onclick="${!isUsed ? `window.lesenApp.selectSprachbausteine2FromBank('${word}')` : ''}">
              ${word}
            </div>
          `;
        });
        
        wordBankHTML += `</div>`;
        
        questionBodyEl.innerHTML = wordBankHTML;
        questionTitleEl.textContent = '';
        headingsBankContainer.innerHTML = '';
        
        setupSprachbausteine2DragAndDrop();
      }

      function showSprachbausteine2Options(slotElement){
        const existingPopup = document.querySelector('.options-popup');
        if(existingPopup) {
          existingPopup.remove();
        }
        
        const blankId = slotElement.getAttribute('data-blank-id');
        const section = exam.sections.find(s => s.id === 's5');
        
        const usedWords = Object.values(state.answers);
        const availableWords = section.fillBlanks2[0].options.filter(word => !usedWords.includes(word));
        
        if(availableWords.length === 0) return;
        
        const popup = document.createElement('div');
        popup.className = 'options-popup';
        
        availableWords.forEach(word => {
          const optionItem = document.createElement('div');
          optionItem.className = 'option-item';
          optionItem.textContent = word;
          optionItem.onclick = () => {
            selectSprachbausteine2(blankId, word);
            popup.remove();
          };
          popup.appendChild(optionItem);
        });
        
        slotElement.appendChild(popup);
      }

      function setupSprachbausteine2DragAndDrop(){
        const wordItems = document.querySelectorAll('.bank-word-vertical:not(.used)');
        const blankSlots = document.querySelectorAll('.blank-slot');
        
        wordItems.forEach(item => {
          item.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', e.target.dataset.word);
          });
        });
        
        blankSlots.forEach(slot => {
          slot.addEventListener('dragover', (e) => {
            e.preventDefault();
            slot.style.background = '#e8f4ff';
          });
          
          slot.addEventListener('dragleave', (e) => {
            slot.style.background = slot.classList.contains('has-answer') ? '#e8fbe9' : '#f8fbff';
          });
          
          slot.addEventListener('drop', (e) => {
            e.preventDefault();
            const word = e.dataTransfer.getData('text/plain');
            const blankId = slot.dataset.blankId;
            
            selectSprachbausteine2(blankId, word);
          });
        });
      }

      function selectSprachbausteine2FromBank(word){
        const section = exam.sections.find(s => s.id === 's5');
        const emptyBlank = section.fillBlanks2.find(blank => !state.answers[blank.id]);
        
        if(emptyBlank) {
          selectSprachbausteine2(emptyBlank.id, word);
        }
      }

      function selectSprachbausteine2(blankId, answer){
        Object.keys(state.answers).forEach(key => {
          if(state.answers[key] === answer) {
            delete state.answers[key];
          }
        });
        
        state.answers[blankId] = answer;
        renderAll();
      }

      function selectOption(questionId, optionId){
        state.answers[questionId] = optionId;
        renderAll();
      }

      function renderResults(){
        let resultsHTML = `<h2>Ergebnisse</h2>`;
        let totalCorrect = 0;
        let totalQuestions = 0;
        
        exam.sections.forEach(section => {
          resultsHTML += `<div class="result-item"><h3>${section.title}</h3>`;
          
          if(section.id === 's1'){
            section.texts.forEach(text => {
              totalQuestions++;
              const userAnswer = state.answers[text.id];
              const isCorrect = userAnswer === text.correctAnswer;
              if(isCorrect) totalCorrect++;
              
              resultsHTML += `
                <div>Text ${text.id}: ${userAnswer || 'Nicht beantwortet'} 
                ${userAnswer ? `<span class="${isCorrect ? 'result-correct' : 'result-incorrect'}">${isCorrect ? '‚úì' : '‚úó'}</span>` : ''}
                </div>
              `;
            });
          } else if(section.id === 's2'){
            section.questions.forEach(question => {
              totalQuestions++;
              const userAnswer = state.answers[question.id];
              const isCorrect = userAnswer === question.correctAnswer;
              if(isCorrect) totalCorrect++;
              
              resultsHTML += `
                <div>${question.text}: ${userAnswer || 'Nicht beantwortet'} 
                ${userAnswer ? `<span class="${isCorrect ? 'result-correct' : 'result-incorrect'}">${isCorrect ? '‚úì' : '‚úó'}</span>` : ''}
                </div>
              `;
            });
          } else if(section.id === 's3'){
            section.situations.forEach(situation => {
              totalQuestions++;
              const userAnswer = state.answers[situation.id];
              const correctText = section.texts.find(t => t.correctAnswer === situation.id);
              const isCorrect = userAnswer === (correctText ? correctText.id : null);
              if(isCorrect) totalCorrect++;
              
              resultsHTML += `
                <div>Situation ${situation.id}: ${userAnswer || 'Nicht beantwortet'} 
                ${userAnswer ? `<span class="${isCorrect ? 'result-correct' : 'result-incorrect'}">${isCorrect ? '‚úì' : '‚úó'}</span>` : ''}
                </div>
              `;
            });
          } else if(section.id === 's4'){
            section.fillBlanks.forEach(blank => {
              totalQuestions++;
              const userAnswer = state.answers[blank.id];
              const isCorrect = userAnswer === blank.correctAnswer;
              if(isCorrect) totalCorrect++;
              
              resultsHTML += `
                <div>L√ºcke ${blank.id}: ${userAnswer || 'Nicht beantwortet'} 
                ${userAnswer ? `<span class="${isCorrect ? 'result-correct' : 'result-incorrect'}">${isCorrect ? '‚úì' : '‚úó'}</span>` : ''}
                </div>
              `;
            });
          } else if(section.id === 's5'){
            section.fillBlanks2.forEach(blank => {
              totalQuestions++;
              const userAnswer = state.answers[blank.id];
              const isCorrect = userAnswer === blank.correctAnswer;
              if(isCorrect) totalCorrect++;
              
              resultsHTML += `
                <div>L√ºcke ${blank.id}: ${userAnswer || 'Nicht beantwortet'} 
                ${userAnswer ? `<span class="${isCorrect ? 'result-correct' : 'result-incorrect'}">${isCorrect ? '‚úì' : '‚úó'}</span>` : ''}
                </div>
              `;
            });
          }
          
          resultsHTML += `</div>`;
        });
        
        const percentage = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
        resultsHTML += `<div class="result-item"><h3>Gesamtergebnis: ${totalCorrect}/${totalQuestions} (${percentage}%)</h3></div>`;
        
        passageContentEl.innerHTML = resultsHTML;
        questionBodyEl.innerHTML = '';
        sectionNameEl.textContent = 'Ergebnisse';
        questionTitleEl.textContent = '';
      }

      /* ===== Event Listeners ===== */
      document.getElementById('prevBtn-lesen').addEventListener('click', ()=>{
        if(state.sectionIndex > 0){
          state.sectionIndex--;
          state.questionIndex = 0;
          renderAll();
        }
      });

      document.getElementById('nextBtn-lesen').addEventListener('click', ()=>{
        if(state.sectionIndex < exam.sections.length - 1){
          state.sectionIndex++;
          state.questionIndex = 0;
          renderAll();
        } else {
          showPage('hoeren-page');
        }
      });

      resultBtn.addEventListener('click', ()=>{
        state.showResults = !state.showResults;
        renderAll();
      });

      resetBtn.addEventListener('click', ()=>{
        if(confirm('M√∂chten Sie wirklich von neu beginnen? Alle Antworten werden gel√∂scht.')){
          state.answers = {};
          state.marked = {};
          state.showResults = false;
          resetTimer();
          renderAll();
        }
      });

      resetSectionBtn.addEventListener('click', resetCurrentSection);

      document.getElementById('saveBtn-lesen').addEventListener('click', ()=>{
        statusText.textContent = 'Gespeichert';
        setTimeout(()=>{statusText.textContent = 'Nicht gespeichert'}, 2000);
      });

      document.getElementById('submitBtn-lesen').addEventListener('click', ()=>{
        if(confirm('M√∂chten Sie die Pr√ºfung wirklich abgeben?')){
          state.showResults = true;
          renderAll();
        }
      });

      document.getElementById('nextBtn-lesen').addEventListener('click', ()=>{
        showPage('hoeren-page');
      });

      /* ===== Initialize ===== */
      updateTimerDisplay();
      renderAll();
      startTimer();
      
      window._lesenState = state;
      window.lesenApp = {
        selectOption,
        markNoMatch,
        selectSprachbausteine1,
        selectSprachbausteine2,
        selectSprachbausteine2FromBank
      };
    }

    // ===== H√ñREN PAGE FUNCTIONALITY =====
    function initHoerenPage() {
      const exam = EXAM_DATA.hoeren;

      let state = { 
        sectionIndex: 0, 
        answers: {}, 
        remaining: exam.durationSec,
        showResults: false,
        timerStarted: false,
        timerInterval: null
      };
      
      const topTiles = document.getElementById('topTiles-hoeren');
      const contentContainer = document.getElementById('contentContainer-hoeren');
      const timerEl = document.getElementById('timer-hoeren');
      const statusText = document.getElementById('statusText-hoeren');

      function startTimer() {
        if (state.timerInterval) {
          clearInterval(state.timerInterval);
        }
        
        state.timerStarted = true;
        state.timerInterval = setInterval(() => {
          if (state.remaining <= 0) {
            clearInterval(state.timerInterval);
            timerEl.textContent = 'Zeit abgelaufen';
            return;
          }
          state.remaining--;
          updateTimerDisplay();
        }, 1000);
      }

      function resetTimer() {
        if (state.timerInterval) {
          clearInterval(state.timerInterval);
        }
        state.remaining = exam.durationSec;
        state.timerStarted = false;
        updateTimerDisplay();
        startTimer();
      }

      function updateTimerDisplay() {
        const min = Math.floor(state.remaining / 60);
        const sec = state.remaining % 60;
        timerEl.textContent = `Verbleibende Zeit: ${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
      }

      function renderTopTiles() { 
        topTiles.innerHTML = ''; 
        exam.sections.forEach((sec, idx) => { 
          const div = document.createElement('div'); 
          div.className = 'tile' + (idx === state.sectionIndex ? ' active' : '') + (isSectionDone(sec) ? ' done' : ''); 
          div.innerHTML = `<div>${sec.title}</div><div class="points">${sec.points} P</div>`; 
          div.onclick = () => { state.sectionIndex = idx; state.showResults = false; renderAll(); }; 
          topTiles.appendChild(div); 
        }); 
      }

      function isSectionDone(section) {
        const answers = state.answers[section.id];
        if (!answers) return false;
        
        const answeredQuestions = Object.keys(answers).length;
        const totalQuestions = section.questions.length;
        
        return answeredQuestions === totalQuestions;
      }

      function renderAll() {
        renderTopTiles();
        
        if (state.showResults) {
          renderResults();
          return;
        }
        
        renderListeningSection();
      }

      function renderListeningSection() {
        const section = exam.sections[state.sectionIndex];
        const currentAnswers = state.answers[section.id] || {};
        
        let contentHTML = `
          <div class="panel-title">${section.title}</div>
          <div class="instructions">
            Sie h√∂ren die Nachrichten. Entscheiden Sie beim H√∂ren, ob die Aussagen richtig oder falsch sind. 
            Sie h√∂ren die Nachrichten nur einmal. Sie haben jetzt 30 Sekunden, um die Aussagen zu lesen.
          </div>
          
          <div class="listening-task">
            <table class="true-false-table">
              <thead>
                <tr>
                  <th style="width: 10%">Nr.</th>
                  <th style="width: 60%">Aussage</th>
                  <th style="width: 30%">Ihre Antwort</th>
                </tr>
              </thead>
              <tbody>
        `;
        
        section.questions.forEach((question, index) => {
          const currentAnswer = currentAnswers[question.id] || '';
          contentHTML += `
            <tr>
              <td><strong>${question.id}</strong></td>
              <td class="question-text">${question.text}</td>
              <td>
                <div class="answer-options">
                  <label class="answer-option">
                    <input 
                      type="radio" 
                      name="q${section.id}_${question.id}" 
                      value="richtig" 
                      ${currentAnswer === 'richtig' ? 'checked' : ''}
                      onchange="window.hoerenApp.updateListeningAnswer('${section.id}', '${question.id}', this.value)"
                    >
                    Richtig
                  </label>
                  <label class="answer-option">
                    <input 
                      type="radio" 
                      name="q${section.id}_${question.id}" 
                      value="falsch" 
                      ${currentAnswer === 'falsch' ? 'checked' : ''}
                      onchange="window.hoerenApp.updateListeningAnswer('${section.id}', '${question.id}', this.value)"
                    >
                    Falsch
                  </label>
                </div>
              </td>
            </tr>
          `;
        });
        
        contentHTML += `
              </tbody>
            </table>
          </div>
        `;
        
        contentContainer.innerHTML = contentHTML;
      }

      function updateListeningAnswer(sectionId, questionId, answer) {
        if (!state.answers[sectionId]) {
          state.answers[sectionId] = {};
        }
        state.answers[sectionId][questionId] = answer;
        
        renderTopTiles();
      }

      function renderResults() {
        let resultsHTML = `<div class="panel-title">Ergebnisse - H√∂rverstehen</div>`;
        
        exam.sections.forEach(section => {
          const userAnswers = state.answers[section.id] || {};
          let correctCount = 0;
          
          resultsHTML += `
            <div class="listening-task">
              <h3>${section.title} (${section.points} Punkte)</h3>
              <table class="true-false-table">
                <thead>
                  <tr>
                    <th style="width: 10%">Nr.</th>
                    <th style="width: 50%">Aussage</th>
                    <th style="width: 15%">Ihre Antwort</th>
                    <th style="width: 15%">Richtige Antwort</th>
                    <th style="width: 10%">Punkte</th>
                  </tr>
                </thead>
                <tbody>
          `;
          
          section.questions.forEach((question) => {
            const userAnswer = userAnswers[question.id] || '-';
            const correctAnswer = section.correctAnswers[question.id];
            const gotCorrect = userAnswer === correctAnswer;
            const points = gotCorrect ? "1" : "0";
            
            if (gotCorrect) correctCount++;
            
            const rowClass = gotCorrect ? 'correct-answer' : 'incorrect-answer';
            
            resultsHTML += `
              <tr class="${rowClass}">
                <td><strong>${question.id}</strong></td>
                <td class="question-text">${question.text}</td>
                <td>${userAnswer}</td>
                <td>${correctAnswer}</td>
                <td><strong>${points}</strong></td>
              </tr>
            `;
          });
          
          const totalPoints = Math.round((correctCount / section.questions.length) * section.points);
          
          resultsHTML += `
                </tbody>
              </table>
              <div style="margin-top: 15px; padding: 15px; background: #e3f2fd; border-radius: 6px;">
                <strong>Erreichte Punkte: ${correctCount}/${section.questions.length} richtig = ${totalPoints}/${section.points} Punkten</strong>
              </div>
            </div>
          `;
        });
        
        contentContainer.innerHTML = resultsHTML;
      }

      document.getElementById('prevBtn-hoeren').addEventListener('click', () => {
        if (state.sectionIndex > 0) {
          state.sectionIndex--;
          state.showResults = false;
          renderAll();
        }
      });

      document.getElementById('nextBtn-hoeren').addEventListener('click', () => {
        if (state.sectionIndex < exam.sections.length - 1) {
          state.sectionIndex++;
          state.showResults = false;
          renderAll();
        } else {
          showPage('schreiben-page');
        }
      });

      document.getElementById('resultBtn-hoeren').addEventListener('click', () => {
        state.showResults = !state.showResults;
        renderAll();
      });

      document.getElementById('resetBtn-hoeren').addEventListener('click', () => {
        if (confirm('M√∂chten Sie wirklich von neu beginnen? Alle Antworten werden gel√∂scht.')) {
          state.answers = {};
          state.showResults = false;
          resetTimer();
          renderAll();
        }
      });

      document.getElementById('saveBtn-hoeren').addEventListener('click', () => {
        statusText.textContent = 'Gespeichert';
        setTimeout(() => { statusText.textContent = 'Nicht gespeichert' }, 2000);
      });

      document.getElementById('submitBtn-hoeren').addEventListener('click', () => {
        if (confirm('M√∂chten Sie die Pr√ºfung wirklich abgeben?')) {
          state.showResults = true;
          renderAll();
        }
      });

      document.getElementById('nextBtn-hoeren').addEventListener('click', () => {
        showPage('schreiben-page');
      });

      updateTimerDisplay();
      renderAll();
      startTimer();
      
      window._hoerenState = state;
      window.hoerenApp = {
        updateListeningAnswer
      };
    }

    // ===== SCHREIBEN PAGE FUNCTIONALITY =====
    function initSchreibenPage() {
      const exam = EXAM_DATA.schreiben;

      let state = { 
        sectionIndex: 0, 
        answers: {}, 
        remaining: exam.durationSec,
        showResults: false,
        timerStarted: false,
        timerInterval: null
      };
      
      const topTiles = document.getElementById('topTiles-schreiben');
      const passageTitleEl = document.getElementById('passageTitle-schreiben');
      const passageContentEl = document.getElementById('passageContent-schreiben');
      const writingContainer = document.getElementById('writingContainer-schreiben');
      const timerEl = document.getElementById('timer-schreiben');
      const statusText = document.getElementById('statusText-schreiben');

      function startTimer() {
        if (state.timerInterval) {
          clearInterval(state.timerInterval);
        }
        
        state.timerStarted = true;
        state.timerInterval = setInterval(() => {
          if (state.remaining <= 0) {
            clearInterval(state.timerInterval);
            timerEl.textContent = 'Zeit abgelaufen';
            return;
          }
          state.remaining--;
          updateTimerDisplay();
        }, 1000);
      }

      function resetTimer() {
        if (state.timerInterval) {
          clearInterval(state.timerInterval);
        }
        state.remaining = exam.durationSec;
        state.timerStarted = false;
        updateTimerDisplay();
        startTimer();
      }

      function updateTimerDisplay() {
        const min = Math.floor(state.remaining / 60);
        const sec = state.remaining % 60;
        timerEl.textContent = `Verbleibende Zeit: ${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
      }

      function renderTopTiles() { 
        topTiles.innerHTML = ''; 
        exam.sections.forEach((sec, idx) => { 
          const div = document.createElement('div'); 
          div.className = 'tile' + (idx === state.sectionIndex ? ' active' : '') + (isSectionDone(sec) ? ' done' : ''); 
          div.innerHTML = `<div>${sec.title}</div><div class="points">${sec.points} P</div>`; 
          div.onclick = () => { state.sectionIndex = idx; state.showResults = false; renderAll(); }; 
          topTiles.appendChild(div); 
        }); 
      }

      function isSectionDone(section) {
        return state.answers[section.id] && state.answers[section.id].length > 0;
      }

      function renderAll() {
        renderTopTiles();
        const section = exam.sections[state.sectionIndex];
        passageTitleEl.textContent = section.passageTitle;
        
        if (state.showResults) {
          renderResults();
          return;
        }
        
        renderWritingSection();
      }

      function renderWritingSection() {
        const section = exam.sections[state.sectionIndex];
        
        passageContentEl.innerHTML = `
          <div class="writing-task">
            <div class="writing-prompt">${section.writingTask.prompt}</div>
            <div class="instructions" style="border:1px solid #e1e8f6; padding:10px; margin:10px 0; border-radius:6px; background:#ffffff;">Sie wollten sich ehrenamtlich f√ºr Jugendliche engagieren, waren aber mit der Organisation unzufrieden. 
Schreiben Sie eine Beschwerde an den Verein.</div>
            <div class="writing-requirements">
              <h4>Schreiben Sie in Ihrer E-Mail:</h4>
              <ul>
                ${section.writingTask.requirements.map(req => `<li>${req}</li>`).join('')}
              </ul>
            </div>
            <div class="instructions">
              Schreiben Sie eine E-Mail (ca. 150-200 W√∂rter). Achten Sie auf den Textaufbau (Anrede, Einleitung, Hauptteil, Schluss) und eine angemessene Formulierung.
            </div>
          </div>
        `;
        
        const currentAnswer = state.answers[section.id] || '';
        const wordCount = countWords(currentAnswer);
        
        writingContainer.innerHTML = `
          <div class="writing-area">
            <textarea 
              class="writing-textarea" 
              placeholder="Schreiben Sie hier Ihre E-Mail..."
              oninput="window.schreibenApp.updateWritingAnswer('${section.id}', this.value)"
            >${currentAnswer}</textarea>
            <div class="word-counter">
              W√∂rter: <span class="count">${wordCount}</span>
            </div>
          </div>
        `;
      }

      function countWords(text) {
        return text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
      }

      function updateWritingAnswer(sectionId, text) {
        state.answers[sectionId] = text;
        
        const wordCount = countWords(text);
        document.querySelector('.word-counter .count').textContent = wordCount;
      }

      function renderResults() {
        let resultsHTML = `<h2>Ergebnisse</h2>`;
        
        exam.sections.forEach(section => {
          resultsHTML += `<div class="writing-task"><h3>${section.title}</h3>`;
          
          const userAnswer = state.answers[section.id];
          const wordCount = countWords(userAnswer);
          
          resultsHTML += `
            <div class="writing-requirements">
              <h4>Ihre Antwort (${wordCount} W√∂rter):</h4>
              <div style="white-space: pre-wrap; background: white; padding: 15px; border-radius: 6px; border: 1px solid #e1e8f6; margin-top: 10px;">${userAnswer || 'Keine Antwort'}</div>
            </div>
          `;
          
          resultsHTML += `</div>`;
        });
        
        passageContentEl.innerHTML = resultsHTML;
        writingContainer.innerHTML = '';
      }

      document.getElementById('prevBtn-schreiben').addEventListener('click', () => {
        if (state.sectionIndex > 0) {
          state.sectionIndex--;
          state.showResults = false;
          renderAll();
        }
      });

      document.getElementById('nextBtn-schreiben').addEventListener('click', () => {
        if (state.sectionIndex < exam.sections.length - 1) {
          state.sectionIndex++;
          state.showResults = false;
          renderAll();
        } else {
          showPage('ergebnisse-page');
        }
      });

      document.getElementById('resultBtn-schreiben').addEventListener('click', () => {
        state.showResults = !state.showResults;
        renderAll();
      });

      document.getElementById('resetBtn-schreiben').addEventListener('click', () => {
        if (confirm('M√∂chten Sie wirklich von neu beginnen? Alle Antworten werden gel√∂scht.')) {
          state.answers = {};
          state.showResults = false;
          resetTimer();
          renderAll();
        }
      });

      document.getElementById('saveBtn-schreiben').addEventListener('click', () => {
        statusText.textContent = 'Gespeichert';
        setTimeout(() => { statusText.textContent = 'Nicht gespeichert' }, 2000);
      });

      document.getElementById('submitBtn-schreiben').addEventListener('click', () => {
        if (confirm('M√∂chten Sie die Pr√ºfung wirklich abgeben?')) {
          state.showResults = true;
          renderAll();
        }
      });

      document.getElementById('nextBtn-schreiben').addEventListener('click', () => {
        showPage('ergebnisse-page');
      });

      updateTimerDisplay();
      renderAll();
      startTimer();
      
      window._schreibenState = state;
      window.schreibenApp = {
        updateWritingAnswer
      };
    }

    // ===== ERGEBNISSE PAGE FUNCTIONALITY =====
    function initErgebnissePage() {
      const CONFIG = {
        totals: { 
          lesen: 105, 
          hoeren: 75, 
          schreiben: 45, 
          gesamt: 225 
        },
        counts: { 
          lesen: 40, 
          hoeren: 20 
        }
      };

      const CORRECT_ANSWERS = {
        lesen: {
          "text1": "f",
          "text2": "d",
          "text3": "b",
          "text4": "a",
          "text5": "e",
          "s2q1": "s2q1o2",
          "s2q2": "s2q2o1",
          "s2q3": "s2q3o3",
          "s2q4": "s2q4o3",
          "s2q5": "s2q5o3",
          "11": "A",
          "12": "X",
          "13": "G",
          "14": "I",
          "15": "K",
          "16": "F",
          "17": "X",
          "18": "H",
          "19": "D",
          "20": "L",
          "21": "um",
          "22": "dass",
          "23": "aber",
          "24": "unbedingt",
          "25": "mich",
          "26": "als",
          "27": "kommenden",
          "28": "dazu",
          "29": "sondern",
          "30": "f√ºr",
          "31": "KAUM",
          "32": "AUF",
          "33": "VORBEI",
          "34": "STATT",
          "35": "INNERHALB",
          "36": "M√úSSEN",
          "37": "AN",
          "38": "SOLLEN",
          "39": "DANN",
          "40": "DENN"
        },
        hoeren: {
          "41": "falsch",
          "42": "richtig",
          "43": "richtig",
          "44": "falsch",
          "45": "falsch",
          "46": "richtig",
          "47": "falsch",
          "48": "richtig",
          "49": "richtig",
          "50": "falsch",
          "51": "falsch",
          "52": "richtig",
          "53": "richtig",
          "54": "richtig",
          "55": "falsch",
          "56": "richtig",
          "57": "richtig",
          "58": "richtig",
          "59": "falsch",
          "60": "falsch"
        }
      };

      function readExamResults() {
        try {
          const lesen = window._lesenState ? window._lesenState.answers : {};
          const hoeren = window._hoerenState ? window._hoerenState.answers : {};
          const schreiben = window._schreibenState ? window._schreibenState.answers : {};

          return { hoeren, lesen, schreiben };
        } catch (e) {
          return { hoeren: {}, lesen: {}, schreiben: {} };
        }
      }

      function calculateLesenResults(answers) {
        const exam = EXAM_DATA.lesen;
        let correct = 0;
        let total = 0;
        
        exam.sections.forEach(section => {
          if (section.id === 's1') {
            section.texts.forEach(text => {
              total++;
              if (answers[text.id] === text.correctAnswer) correct++;
            });
          } else if (section.id === 's2') {
            section.questions.forEach(question => {
              total++;
              if (answers[question.id] === question.correctAnswer) correct++;
            });
          } else if (section.id === 's3') {
            section.situations.forEach(situation => {
              total++;
              const correctText = section.texts.find(t => t.correctAnswer === situation.id);
              if (answers[situation.id] === (correctText ? correctText.id : null)) correct++;
            });
          } else if (section.id === 's4') {
            section.fillBlanks.forEach(blank => {
              total++;
              if (answers[blank.id] === blank.correctAnswer) correct++;
            });
          } else if (section.id === 's5') {
            section.fillBlanks2.forEach(blank => {
              total++;
              if (answers[blank.id] === blank.correctAnswer) correct++;
            });
          }
        });
        
        const points = Math.round((correct / total) * CONFIG.totals.lesen);
        
        return { correct, total, points };
      }

      function calculateHoerenResults(answers) {
        const exam = EXAM_DATA.hoeren;
        let correct = 0;
        let total = 0;
        
        exam.sections.forEach(section => {
          section.questions.forEach(question => {
            total++;
            if (answers[section.id] && answers[section.id][question.id] === section.correctAnswers[question.id]) {
              correct++;
            }
          });
        });
        
        const points = Math.round((correct / total) * CONFIG.totals.hoeren);
        
        return { correct, total, points };
      }

      function getHeadingText(questionId, answerId) {
        if (!answerId || answerId === '-') return '';
        
        const headings = EXAM_DATA.lesen.sections[0].headings;
        const heading = headings.find(h => h.id === answerId);
        return heading ? heading.text : '';
      }

      function getAnswerText(section, questionId, answerId) {
        if (!answerId || answerId === '-') return '-';
        
        if (section === 'lesen') {
          const lesenExam = EXAM_DATA.lesen;
          const teil2 = lesenExam.sections[1];
          const question = teil2.questions.find(q => q.id === questionId);
          if (question) {
            const option = question.options.find(o => o.id === answerId);
            return option ? option.text : answerId;
          }
        }
        return answerId;
      }

      function renderLesenDetails(answers) {
        let html = `<div class="section-table">`;
        
        html += `<h4>Teil 1: √úberschriften zuordnen</h4><table class="true-false-table">`;
        html += `<thead><tr><th>Text</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 1; i <= 5; i++) {
          const questionId = `text${i}`;
          const userAnswer = answers[questionId] || '-';
          const correctAnswer = CORRECT_ANSWERS.lesen[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>Text ${String.fromCharCode(96 + i).toUpperCase()}</td>
                    <td>${userAnswer}) ${getHeadingText(questionId, userAnswer)}</td>
                    <td>${correctAnswer}) ${getHeadingText(questionId, correctAnswer)}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table>`;
        
        html += `<h4 style="margin-top: 20px;">Teil 2: Fragen zum Text</h4><table class="true-false-table">`;
        html += `<thead><tr><th>Frage</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 1; i <= 5; i++) {
          const questionId = `s2q${i}`;
          const userAnswer = answers[questionId] || '-';
          const correctAnswer = CORRECT_ANSWERS.lesen[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>Frage ${i}</td>
                    <td>${getAnswerText('lesen', questionId, userAnswer)}</td>
                    <td>${getAnswerText('lesen', questionId, correctAnswer)}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table>`;
        
        html += `<h4 style="margin-top: 20px;">Teil 3: Texte zuordnen</h4><table class="true-false-table">`;
        html += `<thead><tr><th>Situation</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 11; i <= 20; i++) {
          const questionId = `${i}`;
          const userAnswer = answers[questionId] || '-';
          const correctAnswer = CORRECT_ANSWERS.lesen[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>Situation ${i}</td>
                    <td>${userAnswer === 'X' ? 'X - Kein Text' : (userAnswer || '-')}</td>
                    <td>${correctAnswer || 'X - Kein Text'}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table>`;
        
        html += `<h4 style="margin-top: 20px;">Sprachbausteine</h4><table class="true-false-table">`;
        html += `<thead><tr><th>L√ºcke</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 21; i <= 40; i++) {
          const questionId = `${i}`;
          const userAnswer = answers[questionId] || '-';
          const correctAnswer = CORRECT_ANSWERS.lesen[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>L√ºcke ${i}</td>
                    <td>${userAnswer}</td>
                    <td>${correctAnswer}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table></div>`;
        
        return html;
      }

      function renderHoerenDetails(answers) {
        let html = `<div class="section-table">`;
        
        html += `<h4>Teil 1</h4><table class="true-false-table">`;
        html += `<thead><tr><th>Frage</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 41; i <= 45; i++) {
          const questionId = `${i}`;
          const section = 'h√∂rverstehen1';
          const userAnswer = (answers[section] && answers[section][questionId]) || '-';
          const correctAnswer = CORRECT_ANSWERS.hoeren[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>${questionId}</td>
                    <td>${userAnswer}</td>
                    <td>${correctAnswer}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table>`;
        
        html += `<h4 style="margin-top: 20px;">Teil 2</h4><table class="true-false-table">`;
        html += `<thead><tr><th>Frage</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 46; i <= 55; i++) {
          const questionId = `${i}`;
          const section = 'h√∂rverstehen2';
          const userAnswer = (answers[section] && answers[section][questionId]) || '-';
          const correctAnswer = CORRECT_ANSWERS.hoeren[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>${questionId}</td>
                    <td>${userAnswer}</td>
                    <td>${correctAnswer}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table>`;
        
        html += `<h4 style="margin-top: 20px;">Teil 3</h4><table class="true-false-table">`;
        html += `<thead><tr><th>Frage</th><th>Ihre Antwort</th><th>Richtige Antwort</th><th>Ergebnis</th></tr></thead><tbody>`;
        
        for(let i = 56; i <= 60; i++) {
          const questionId = `${i}`;
          const section = 'h√∂rverstehen3';
          const userAnswer = (answers[section] && answers[section][questionId]) || '-';
          const correctAnswer = CORRECT_ANSWERS.hoeren[questionId];
          const isCorrect = userAnswer === correctAnswer;
          
          html += `<tr class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                    <td>${questionId}</td>
                    <td>${userAnswer}</td>
                    <td>${correctAnswer}</td>
                    <td><strong>${isCorrect ? '‚úì Richtig' : '‚úó Falsch'}</strong></td>
                  </tr>`;
        }
        html += `</tbody></table></div>`;
        
        return html;
      }

      function calculateResults() {
        const st = readExamResults() || { hoeren: {}, lesen: {}, schreiben: {} };
        const details = document.getElementById('details-ergebnisse');
        const tiles = document.getElementById('topTiles-ergebnisse');

        details.innerHTML = '';
        tiles.innerHTML = '';

        const lesenResults = calculateLesenResults(st.lesen);
        const hoerenResults = calculateHoerenResults(st.hoeren);
        
        const tL = `<div class="results-tile">
                    <h3>Lesen</h3>
                    <div class="score">${lesenResults.points}/${CONFIG.totals.lesen} Punkte</div>
                    <div class="small-muted">(${lesenResults.correct}/${lesenResults.total} richtig)</div>
                  </div>`;
                  
        const tH = `<div class="results-tile">
                    <h3>H√∂ren</h3>
                    <div class="score">${hoerenResults.points}/${CONFIG.totals.hoeren} Punkte</div>
                    <div class="small-muted">(${hoerenResults.correct}/${hoerenResults.total} richtig)</div>
                  </div>`;
                  
        const tS = `<div class="results-tile">
                    <h3>Schreiben</h3>
                    <div class="score">Manuelle Bewertung</div>
                    <div class="small-muted">(45 Punkte max.)</div>
                  </div>`;
                  
        tiles.innerHTML = tL + tH + tS;

        details.innerHTML = `
          <h2>üìä Detaillierte Ergebnisse</h2>
          <div class="instructions">
            Hier sehen Sie Ihre Antworten im Vergleich zu den richtigen Antworten:
          </div>
          
          <h3>üìñ Leseverstehen - Detaillierte Auswertung</h3>
        `;
        
        details.innerHTML += renderLesenDetails(st.lesen);
        
        details.innerHTML += `
          <h3>üëÇ H√∂rverstehen - Detaillierte Auswertung</h3>
        `;
        details.innerHTML += renderHoerenDetails(st.hoeren);
        
        details.innerHTML += `
          <h3>‚úçÔ∏è Schreiben</h3>
          <div class="writing-task">
            <div class="writing-requirements">
              <h4>Ihre Antwort:</h4>
              <div style="white-space: pre-wrap; background: white; padding: 15px; border-radius: 6px; border: 1px solid #e1e8f6; margin-top: 10px;">
                ${st.schreiben['s1'] || 'Keine Antwort vorhanden'}
              </div>
              <div style="margin-top: 10px; display: flex; gap: 10px; align-items: center">
                Punkte vergeben (0‚Äì45): 
                <input id="schreibenInput" type="number" min="0" max="45" step="1" value="0"> 
                <button id="saveSchreiben" class="results-btn">Speichern</button>
              </div>
            </div>
          </div>
        `;

        const totalPoints = lesenResults.points + hoerenResults.points;
        const maxPoints = CONFIG.totals.lesen + CONFIG.totals.hoeren;
        const percentage = Math.round((totalPoints / maxPoints) * 100);

        document.getElementById('finalSummary-ergebnisse').innerHTML = `
          <div class="left">
            Gesamtergebnis (ohne Schreiben)<br>
            <span class="small-muted">Automatisch korrigierte Bereiche</span>
          </div>
          <div class="right">
            <strong>${totalPoints}/${maxPoints} Punkte (${percentage}%)</strong>
          </div>`;

        document.getElementById('saveSchreiben').onclick = function() {
          const points = parseInt(document.getElementById('schreibenInput').value) || 0;
          localStorage.setItem('schreibenPoints', points);
          alert('Schreiben-Punkte gespeichert!');
        };
      }

      document.getElementById('calcBtn-ergebnisse').onclick = () => calculateResults();
      document.getElementById('backBtn-ergebnisse').onclick = (e) => {
        e.preventDefault();
        showPage('start-page');
      };
      
      calculateResults();
    }

    // ÿ™ÿ≠ÿ≥ŸäŸÜ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ•ŸÅŸÑÿßÿ™ ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿπŸÖŸÑ ÿ®ÿßŸÑŸÑŸÖÿ≥
    function setupTouchDragAndDrop() {
      if ('ontouchstart' in window) {
        // ÿ™ÿ∫ŸäŸäÿ± ÿ≥ŸÑŸàŸÉ ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ≥ÿ≠ÿ®
        document.querySelectorAll('[draggable="true"]').forEach(item => {
          item.addEventListener('touchstart', handleTouchStart);
          item.addEventListener('touchend', handleTouchEnd);
        });
        
        document.querySelectorAll('.title-slot, .blank-slot').forEach(slot => {
          slot.addEventListener('touchmove', handleTouchMove);
          slot.addEventListener('touchend', handleTouchDrop);
        });
      }
    }

    function handleTouchStart(e) {
      // ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ≥ÿ≠ÿ® ÿπŸÜÿØ ÿßŸÑŸÑŸÖÿ≥
    }

    // ÿßÿ≥ÿ™ÿØÿπÿßÿ° ÿßŸÑÿØÿßŸÑÿ© ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
    document.addEventListener('DOMContentLoaded', setupTouchDragAndDrop);
  </script>
</body>
</html>